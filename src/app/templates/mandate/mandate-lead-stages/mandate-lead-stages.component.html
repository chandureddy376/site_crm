<!-- HEADER -->
<app-header></app-header>
<!-- HEADER -->


<!-- SIDE-NAV-ENDS -->

<!-- MAIN-CONTENTS  -->
<div class="row main_count_header px-4 d-flex justify-content-between align-items-center"
  [ngStyle]="{'margin-left': isSidebarHovered ? '13rem' : '2rem'}">
  <div class="col-12 d-flex justify-content-between align-items-center"
    *ngIf="type == 'visits' || (type == 'leads' && normalcallparam == '1')">
    <div class="visitype">
      <span class="font_style visit_type" [ngClass]="{'visittype_active' : visitType == '3'}"
        (click)="selectedVisitType('all')">
        <img src="../../../../assets/images/all.png" *ngIf="visitType != '3'">
        <img src="../../../../assets/images/all_clr.png" *ngIf="visitType == '3'">
        All <span *ngIf="type == 'visits'"> Visits</span>
      </span>
      <span class="font_style" [ngClass]="{'visittype_active' : visitType == '2'}" (click)="selectedVisitType('self')">
        <img src="../../../../assets/images/self.png" *ngIf="visitType != '2'">
        <img src="../../../../assets/images/self_clr.png" *ngIf="visitType == '2'">
        Self <span *ngIf="type == 'visits'"> Visits</span>
      </span>
      <span class="font_style" [ngClass]="{'visittype_active' : visitType == '1'}"
        (click)="selectedVisitType('assigned')">
        <img src="../../../../assets/images/assigned.png" *ngIf="visitType != '1'">
        <img src="../../../../assets/images/assigned_clr.png" *ngIf="visitType == '1'">
        Assigned <span *ngIf="type == 'visits'"> Visits</span>
      </span>
    </div>
    <div class="text-right" *ngIf="isAssignedLeads">
      <button type="button" class="btn btn-warning" (click)="onclickReAssign('feedback')" data-toggle="modal"
        data-target="#feedback_assign_lead"
        *ngIf="(roleid == '1' || roleid == '2') && (type == 'visits' || (type == 'leads' && normalcallparam == 1))"><i
          class="fas fa-share"></i>
        Feedback-Assign</button>
      <button class="btn btn-warning" type="button" (click)="downloadDocument()"
        *ngIf="(roleid == 1 || roleid == '2') && pendingleadsparam != 1"><i class="fa fa-download"></i>
        Download</button>
      <button type="button" class="btn btn-warning" (click)="onclickReAssign('reassign')" data-toggle="modal"
        data-target="#assign_lead" *ngIf="(roleid == '1' || roleid == '2') && type != 'bookings'"><i
          class="fas fa-share"></i>
        Re-Assign</button>
      <!-- <button type="button" class="btn btn-warning" (click)="onclickReAssign('reassign')" data-toggle="modal"
              data-target="#assign_lead" *ngIf="(role_type == '1') && type != 'bookings'"><i class="fas fa-share"></i>
              Re-Assign</button> -->
      <button type="button" class="btn btn-warning" (click)="refresh()"><i class="fas fa-redo"></i>Reset</button>
    </div>
  </div>
  <div class="button_section  p-2 d-flex ">
    <div class="planleadassign">

      <a class="add_class pending_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'leads'"
        [queryParams]="{pending: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid, execname:execname,receivedFrom:receivedFromDate,receivedTo:receivedToDate,source:source,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,fromtime:fromTime,totime:toTime,htype:'mandate',rnrCount:rnrCount}">
        Untouched
        <span>- {{pendingleadcounts}}</span>
      </a>

      <a class="add_class followups_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'leads'"
        [queryParams]="{followups: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid, execname:execname,receivedFrom:receivedFromDate,receivedTo:receivedToDate,source:source,followupcategoryName:'',followupcategory:'',type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,fromtime:fromTime,totime:toTime,htype:'mandate',remarks:serachRemarks,rnrCount:rnrCount}">
        General Followups
        <span>- {{followupleadcounts}}</span>
      </a>

      <a class="add_class nc_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'leads'"
        [queryParams]="{nc: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid, execname:execname,receivedFrom:receivedFromDate,receivedTo:receivedToDate,source:source,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,fromtime:fromTime,totime:toTime,htype:'mandate',remarks:serachRemarks,rnrCount:rnrCount}">
        NC
        <span>- {{normalcallcounts}}</span>
      </a>

      <a class="add_class inactive_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'leads'"
        [queryParams]="{inactive: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid, execname:execname,receivedFrom:receivedFromDate,receivedTo:receivedToDate,source:source,followupcategoryName:'',followupcategory:'',type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,fromtime:fromTime,totime:toTime,htype:'mandate',inactivecount:inactiveTotal}">
        Inactive
        <span>- {{inactivecounts}}</span>
      </a>

      <a class="add_class junkleads_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'leads'"
        [queryParams]="{junkleads: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid, execname:execname,source:source,receivedFrom:receivedFromDate,receivedTo:receivedToDate,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,fromtime:fromTime,totime:toTime,htype:'mandate',junkleadcount:junkLeadsTotal}">
        Junk Leads
        <span>- {{junkleadsCounts}}</span>
      </a>

      <a class="add_class bookingPen_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'bookings'"
        [queryParams]="{bookingPending: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid, execname:execname,receivedFrom:receivedFromDate,receivedTo:receivedToDate,visitedfrom:visitedFrom,visitedto:visitedTo,source:source,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,htype:'mandate'}">
        Deal Closing Pending
        <span>({{bookingPendingCounts}})</span>
      </a>

      <a class="add_class booking_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'bookings'"
        [queryParams]="{bookingRequest: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid, execname:execname,receivedFrom:receivedFromDate,receivedTo:receivedToDate,visitedfrom:visitedFrom,visitedto:visitedTo,source:source,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,htype:'mandate'}">
        Booking Requests
        <span>({{bookingRequestCounts}})</span>
      </a>

      <a class="add_class bookingRej_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'bookings'"
        [queryParams]="{bookingRejected: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid,execname:execname,receivedFrom:receivedFromDate,receivedTo:receivedToDate,visitedfrom:visitedFrom,visitedto:visitedTo,source:source,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,htype:'mandate'}">
        Request Rejected
        <span>({{bookingRejectedCounts}})</span>
      </a>

      <a class="add_class booked_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'bookings'"
        [queryParams]="{booked: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid,source:source,execname:execname,receivedFrom:receivedFromDate,receivedTo:receivedToDate,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,htype:'mandate'}">
        Booked
        <span>({{bookedCounts}})</span>
      </a>

      <a class="add_class usv_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'visits'"
        [queryParams]="{usv: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid, execname:execname, stage:'', stagestatus:stagestatusval,receivedFrom:receivedFromDate,receivedTo:receivedToDate,visitedfrom:visitedFrom,visitedto:visitedTo,source:source,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,fromtime:fromTime,totime:toTime,htype:'mandate',id:visitType}">
        USV
        <span>({{usvCounts}})</span>
      </a>

      <a class="add_class rsv_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'visits'"
        [queryParams]="{rsv: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid, execname:execname, stage:'', stagestatus:stagestatusval,receivedFrom:receivedFromDate,receivedTo:receivedToDate,visitedfrom:visitedFrom,visitedto:visitedTo,source:source,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,fromtime:fromTime,totime:toTime,fromtime:fromTime,totime:toTime,htype:'mandate',id:visitType}">
        RSV
        <span>({{rsvCounts}})</span>
      </a>

      <a class="add_class fn_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'visits'"
        [queryParams]="{fn: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid, execname:execname, stage:'', stagestatus:stagestatusval,receivedFrom:receivedFromDate,receivedTo:receivedToDate,visitedfrom:visitedFrom,visitedto:visitedTo,source:source,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,fromtime:fromTime,totime:toTime,htype:'mandate',id:visitType}">
        FN
        <span>({{fnCounts}})</span>
      </a>

      <a class="add_class junkvisits_section other_section" routerLink="/mandate-lead-stages" *ngIf="type == 'visits'"
        [queryParams]="{junkvisits: 1,from:fromdate,visits:leadstatusVisits,to:todate,execid:execid, execname:execname, stage:'', stagestatus:stagestatusval,source:source,receivedFrom:receivedFromDate,receivedTo:receivedToDate,visitedfrom:visitedFrom,visitedto:visitedTo,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,fromtime:fromTime,totime:toTime,htype:'mandate',overduejunk:'',id:visitType,junkvisitcount:junkVisitsTotal}">
        Junk Visits
        <span>({{junkvisitsCounts}})</span>
      </a>

    </div>
  </div>

  <div class="text-right"
    *ngIf="isAssignedLeads && type != 'visits' &&  ((type == 'leads' && normalcallparam != 1) || type =='bookings')">
    <button type="button" class="btn btn-warning" (click)="onclickReAssign('feedback')" data-toggle="modal"
      data-target="#feedback_assign_lead"
      *ngIf="(roleid == '1' || roleid == '2') && (type == 'visits' || (type == 'leads' && normalcallparam == 1))"><i
        class="fas fa-share"></i>
      Feedback-Assign</button>
    <button class="btn btn-warning" type="button" (click)="downloadDocument()"
      *ngIf="(roleid == 1 || roleid == '2') && pendingleadsparam != 1"><i class="fa fa-download"></i> Download</button>
    <button type="button" class="btn btn-warning" (click)="onclickReAssign('reassign')" data-toggle="modal"
      data-target="#assign_lead"
      *ngIf="type != 'bookings' && (roleid == '1' || roleid == '2') && (inactiveparam != 1 || (inactiveparam == 1 && inactiveTotal != 5))"><i
        class="fas fa-share"></i>
      Re-Assign</button>
    <!-- <button type="button" class="btn btn-warning" (click)="onclickReAssign('reassign')" data-toggle="modal"
                data-target="#assign_lead" *ngIf="(role_type == '1') && type != 'bookings'"><i class="fas fa-share"></i>
                Re-Assign</button> -->
    <button type="button" class="btn btn-warning" (click)="refresh()"><i class="fas fa-redo"></i>Reset</button>
  </div>

  <div class="col-12 d-flex justify-content-between align-items-center pb-2"
    *ngIf="(inactiveparam == 1 || junkleadsParam == 1 || junkvisitsParam == 1) && (roleid == 1 || roleid == 2)">
    <div class="visitype" *ngIf="inactiveparam == 1">
      <span class="font_style" [ngClass]="{'inactive_count' : inactiveTotal == '1'}"
        (click)="selectedInactiveType('1')">
        Inactive - I({{inactive1Count}})
      </span>
      <span class="font_style" [ngClass]="{'inactive_count' : inactiveTotal == '2'}"
        (click)="selectedInactiveType('2')">
        Inactive - II({{inactive2Count}})
      </span>
      <span class="font_style" [ngClass]="{'inactive_count' : inactiveTotal == '3'}"
        (click)="selectedInactiveType('3')">
        Inactive - III({{inactive3Count}})
      </span>
      <span class="font_style" [ngClass]="{'inactive_count' : inactiveTotal == '4'}"
        (click)="selectedInactiveType('4')">
        Inactive - IV({{inactive4Count}})
      </span>
      <span class="font_style" [ngClass]="{'inactive_count' : inactiveTotal == '5'}"
        (click)="selectedInactiveType('5')">
        Final Inactive({{inactiveFinalCount}})
      </span>
    </div>

    <div class="visitype" *ngIf="junkvisitsParam == 1">
      <span class="font_style" [ngClass]="{'junkVisits_count' : junkVisitsTotal == '1'}"
        (click)="selectedJunkVisitsType('1')">
        Junk - I({{junkvisits1Count}})
      </span>
      <span class="font_style" [ngClass]="{'junkVisits_count' : junkVisitsTotal == '2'}"
        (click)="selectedJunkVisitsType('2')">
        Junk - II({{junkvisits2Count}})
      </span>
      <span class="font_style" [ngClass]="{'junkVisits_count' : junkVisitsTotal == '3'}"
        (click)="selectedJunkVisitsType('3')">
        Junk - III({{junkvisits3Count}})
      </span>
      <span class="font_style" [ngClass]="{'junkVisits_count' : junkVisitsTotal == '4'}"
        (click)="selectedJunkVisitsType('4')">
        Junk - IV({{junkvisits4Count}})
      </span>
      <span class="font_style" [ngClass]="{'junkVisits_count' : junkVisitsTotal == '5'}"
        (click)="selectedJunkVisitsType('5')">
        Final Junk({{junkvisitsFinalCount}})
      </span>
    </div>

    <div class="visitype" *ngIf="junkleadsParam == 1">
      <span class="font_style" [ngClass]="{'junk_count' : junkLeadsTotal == '1'}" (click)="selectedJunkLeadsType('1')">
        Junk - I({{junklead1Count}})
      </span>
      <span class="font_style" [ngClass]="{'junk_count' : junkLeadsTotal == '2'}" (click)="selectedJunkLeadsType('2')">
        Junk - II({{junklead2Count}})
      </span>
      <span class="font_style" [ngClass]="{'junk_count' : junkLeadsTotal == '3'}" (click)="selectedJunkLeadsType('3')">
        Junk - III({{junklead3Count}})
      </span>
      <span class="font_style" [ngClass]="{'junk_count' : junkLeadsTotal == '4'}" (click)="selectedJunkLeadsType('4')">
        Junk - IV({{junklead4Count}})
      </span>
      <span class="font_style" [ngClass]="{'junk_count' : junkLeadsTotal == '5'}" (click)="selectedJunkLeadsType('5')">
        Final Junk({{junkleadFinalCount}})
      </span>
    </div>
  </div>

  <div class="text-right" *ngIf="type == 'visits' && junkvisitsParam != 1">
    <div class="button_stage_section  p-2 d-flex" [ngClass]="{'blurred' : usvParam == '1' && visitedFrom != ''}">
      <div class="planleadstage">

        <!-- <a class="add_class untouched_section active" [ngClass]="{'active' : untouchedVisit == 1 && (stagestatusval != 1 || stagestatusval != 3)}"
          (click)="untouchedChange('1')">Untouched</a> -->

        <a class="add_class fix_section active" [ngClass]="{'active' : stagestatusval == 1 && untouchedVisit != 1}"
          (click)="stagestatuschange('1')">FIXED</a>

        <a class="add_class done_section" [ngClass]="{'active' : stagestatusval == 3 && untouchedVisit != 1}"
          (click)="stagestatuschange('3')">DONE</a>

      </div>
    </div>
  </div>
</div>

<div *ngIf=filterLoader class="main-lds-ring-div">
  <!-- <div class="lds-ring">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div> -->
  <img src="../../../../assets/images/infinity_loader.gif">
</div>

<div [ngStyle]="{'margin-left': isSidebarHovered ? '14rem' : '3rem'}" class="bg_color" *ngIf="(roleid == '1' || roleid == '2') && this.rnrCount == 1"> 
  <span class="mark_as_active" (click)="convertToActive()">Mark all as Active <img class="ml-2" src="../../../../assets/images/mark_as_active_icon.png"></span>
</div>

<div class="body-cntnts dimmable blurring" [ngStyle]="{'padding-left': isSidebarHovered ? '15rem' : '4rem'}">
  <div class="enquiry_content_main">
    <!-- this is the table for assigned leads -->
    <div class="table-container " [hidden]="!isAssignedLeads">
      <div class="button_section">
        <!-- <div class="leadassign">
          <div *ngFor="let category of followctgFilter">
            <a class="add_class" routerLink="/mandate-lead-stages" *ngIf="followupleadsparam == 1"
              [ngClass]="{'active': category.followup_categories == categoryStageName}"
              [queryParams]="{followups: 1,from:fromdate,to:todate,visits:leadstatusVisits,execid:execid, execname:execname, stage:stagevalue, stagestatus:stagestatusval,receivedFrom:receivedFromDate,receivedTo:receivedToDate,visitedfrom:visitedFrom,visitedto:visitedTo,source:source,followupcategoryName:category.followup_categories,followupcategory:category.followup_section_IDPK,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,htype:'mandate'}">
              {{category.followup_categories}}
            </a>

            <a class="add_class" routerLink="/mandate-lead-stages" *ngIf="inactiveparam == 1"
              [ngClass]="{'active': category.followup_categories == categoryStageName}"
              [queryParams]="{inactive: 1,from:fromdate,to:todate,visits:leadstatusVisits,execid:execid, execname:execname, stage:stagevalue, stagestatus:stagestatusval,receivedFrom:receivedFromDate,receivedTo:receivedToDate,visitedfrom:visitedFrom,visitedto:visitedTo,source:source,followupcategoryName:category.followup_categories,followupcategory:category.followup_section_IDPK,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,htype:'mandate'}">
              {{category.followup_categories}}
            </a>
          </div>

          <a class="add_class" [ngClass]="{'active': stagestatusval == '3'}"
            *ngIf="type == 'visits' && junkvisitsParam != '1'" (click)="stageSelected('3')">
            {{visitStageType}} DONE
            <span>({{fnCounts}})</span>
          </a>

          <a class="add_class" [ngClass]="{'active': stagestatusval == '1'}"
            *ngIf="type == 'visits' && usvParam != '1' && junkvisitsParam != '1'" (click)="stageSelected('1')">
            {{visitStageType}} FIXED
            <span>({{usvCounts}})</span>
          </a>

          <a class="add_class" [ngClass]="{'active': overduejunk == '4'}"
            *ngIf="type == 'visits' && junkvisitsParam != '1'" (click)="stageSelected('4')">
            {{visitStageType}} Overdues
            <span>({{overdueCount}})</span>
          </a>

          <a class="add_class" [ngClass]="{'active': overduejunk == '5'}"
            *ngIf="type == 'visits' && junkvisitsParam != '1'" (click)="stageSelected('5')">
            {{visitStageType}} Junk
            <span>({{stageJunkCount}})</span>
          </a>

          <a class="add_class usv_section" routerLink="/mandate-lead-stages"
            *ngIf="type == 'visits' && junkvisitsParam == '1'" [ngClass]="{'active': stagevalue == 'USV'}"
            [queryParams]="{junkvisits: 1,visits:leadstatusVisits,execid:execid, execname:execname, stage:'USV', stagestatus:stagestatusval,receivedFrom:receivedFromDate,receivedTo:receivedToDate,visitedfrom:visitedFrom,visitedto:visitedTo,source:source,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,htype:'mandate'}">
            USV Junk
            <span>({{usvCounts}})</span>
          </a>

          <a class="add_class rsv_section" routerLink="/mandate-lead-stages"
            *ngIf="type == 'visits' && junkvisitsParam == '1'" [ngClass]="{'active': stagevalue == 'RSV'}"
            [queryParams]="{junkvisits: 1,visits:leadstatusVisits,execid:execid, execname:execname, stage:'RSV', stagestatus:stagestatusval,receivedFrom:receivedFromDate,receivedTo:receivedToDate,visitedfrom:visitedFrom,visitedto:visitedTo,source:source,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,htype:'mandate'}">
            RSV Junk
            <span>({{rsvCounts}})</span>
          </a>

          <a class="add_class fn_section" routerLink="/mandate-lead-stages"
            *ngIf="type == 'visits' && junkvisitsParam == '1'" [ngClass]="{'active': stagevalue == 'Final Negotiation'}"
            [queryParams]="{junkvisits: 1,visits:leadstatusVisits,execid:execid, execname:execname, stage:'Final Negotiation', stagestatus:stagestatusval,receivedFrom:receivedFromDate,receivedTo:receivedToDate,visitedfrom:visitedFrom,visitedto:visitedTo,source:source,type:type,assignedfrom:assignedFrom,assignedto:assignedTo, property:propertyid, propname:propertyname,htype:'mandate'}">
            FN Junk
            <span>({{fnCounts}})</span>
          </a>
        </div> -->
      </div>

      <!-- ----------------------------to show Table filter data---------------------------- -->
      <div id="filtermaindiv" class="filterspan ml-2">
        <span *ngIf="propertyfilterview && propertyid != ''">
          <div class="p-2 chip">
            {{propertyname}}
            <span class="closebtn" (click)="propertyclose()">&times;</span>
          </div>
        </span>
        <span *ngIf="sourceFilter && source != ''">
          <div class="p-2 chip">
            {{source == 'GR - Microsite' ? 'GR - campaign' : source}}
            <span class="closebtn" (click)="sourceClose()">&times;</span>
          </div>
        </span>
        <span *ngIf="executivefilterview && execid != ''">
          <div class="p-2 chip">
            {{execname}}
            <span class="closebtn" (click)="executiveclose()">&times;</span>
          </div>
        </span>
        <span *ngIf="priorityFilter">
          <div class="p-2 chip">
            {{priorityType}}
            <span class="closebtn" (click)="priorityClose()">&times;</span>
          </div>
        </span>
        <span
          *ngIf="stagefilterview && (pendingleadsparam || followupleadsparam || bookingRequestParam || bookedParam || inactiveparam || usvParam || rsvParam || fnParam) != 1">
          <div class="p-2 chip">
            {{stagevalue}}
            <span *ngIf="stagestatusfilterview">{{stagestatusvaltext}}</span>
            <span class="closebtn" (click)="stageclose()">&times;</span>
          </div>
        </span>
        <span *ngIf="categeoryfilterview && categoryStageName != '' && categoryStage != ''">
          <div class="p-2 chip" *ngIf="categeoryfilterview && categoryStageName != '' && categoryStage != ''">
            {{categoryStageName}}
            <span class="closebtn" (click)="stageclose()">&times;</span>
          </div>
        </span>
        <span *ngIf="datefilterview && fromdate && todate">
          <div class="p-2 chip">
            Next Action: {{fromdate | date:'dd-MMM-yyyy'}} {{ fromTime}} - {{todate | date:'dd-MMM-yyyy' }} {{ toTime}}
            <span class="closebtn" (click)="dateclose()">&times;</span>
          </div>
        </span>
        <span *ngIf="receivedDatefilterview && receivedFromDate && receivedToDate">
          <div class="p-2 chip">
            Received On: {{receivedFromDate | date:'dd-MMM-yyyy'}} - {{receivedToDate | date:'dd-MMM-yyyy'}}
            <span class="closebtn" (click)="receivedDateclose()">&times;</span>
          </div>
        </span>
        <span *ngIf="visitedDatefilterview ">
          <div class="p-2 chip">
            Visited On: {{visitedFrom | date:'dd-MMM-yyyy'}} - {{visitedTo | date:'dd-MMM-yyyy'}}
            <span class="closebtn" (click)="visitedDateclose()">&times;</span>
          </div>
        </span>
        <span *ngIf="assignedOnDatefilterview && assignedFrom && assignedTo">
          <div class="p-2 chip">
            Assigned On: {{assignedFrom | date:'dd-MMM-yyyy'}} - {{assignedTo | date:'dd-MMM-yyyy'}}
            <span class="closebtn" (click)="assignedOnDateclose()">&times;</span>
          </div>
        </span>
        <span *ngIf="isAdditonalParamPresent">
          <div class="p-2 chip">
            {{additionalParam }} ({{additionalParamCount}})
            <span class="closebtn" (click)="removeAdditionalParam()">&times;</span>
          </div>
        </span>
        <span *ngIf="visitAssignExecutivefilterview && visitAssignExecid != ''">
          <div class="p-2 chip">
            Visit Assigned From : {{visitAssignExecname}}
            <span class="closebtn" (click)="VisitAssignExecutiveclose()">&times;</span>
          </div>
        </span>
        <span *ngIf="selectedLeadStatus && selectedLeadStatus != 'All'">
          <div class="p-2 chip">
            Visit Type : {{selectedLeadStatus}}
            <span class="closebtn" (click)="removeselectedLeadStatus()">&times;</span>
          </div>
        </span>
        <span *ngIf="selectedBookingLeadStatus && selectedBookingLeadStatus != 'All'">
          <div class="p-2 chip">
            {{selectedBookingLeadStatus}}
            <span class="closebtn" (click)="removeselectedLeadStatus()">&times;</span>
          </div>
        </span>
        <span *ngIf="latestRemarkFilter">
          <div class="p-2 chip">
            {{serachRemarks}}
            <span class="closebtn" (click)="latestRemarksClose()">&times;</span>
          </div>
        </span>
      </div>

      <div class="CSassigned_table" #scrollContainer>
        <div class="crm-sub-container padding-medium-full">
          <div class="panel-1 crm-auto-scrollrm panel-content">
            <!-- All Visits Related Data listing table For ADMIN View-->
            <table class="content_table_main table table-striped table-bordered" infinite-scroll [fromRoot]="true"
              [scrollWindow]="false" [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50"
              (scrolled)="loadMoreassignedleads()" [infiniteScrollContainer]="'.CSassigned_table'">
              <thead>
                <tr class="header">
                  <!-- ----------------------------sl no---------------------------- -->
                  <th style="width: 3%;">#</th>
                  <!-- ----------------------------Lead received with recivedFrom and recivedTo date filter---------------------------- -->
                  <th *ngIf="roleid == '1' || roleid == '2'"
                    [ngStyle]="{'width': pendingleadsparam == '1' ?'165px' : ''}">
                    <div class="d-flex justify-content-between align-items-center">
                      <span>Lead Date</span>
                      <span class="leadreceiveddrop d-flex">
                        <!-- <div>
                          <button class="btn btn-warning" type="button" id="leadReceivedDropdown" data-toggle="dropdown"
                            (click)="showdateRange()" aria-haspopup="true" aria-expanded="false"
                            style="padding: 0px 5px !important;">
                            <i class="fas fa-filter" style="color: white;"></i>
                          </button>
                          <div class="dropdown-menu " aria-labelledby="leadReceivedDropdown"
                            style="cursor:pointer;padding: 0rem;;display: none;">
                            <div style="position: relative;display: none;">
                              <input #datepicker1 class="form-control" id="todate" name="options" type="text"
                                bsDaterangepicker autocomplete="off" [maxDate]="currentdateforcompare"
                                placeholder="Select Date" [(bsValue)]="leadReceivedDateRange"
                                (bsValueChange)="onLeadReceivedDateRangeSelected($event)" required>
                              <span style="position: absolute; top: 25%;right: 10px; opacity: 75%;color: #0B7AB2;">
                                <i class="fas fa-calendar-alt"></i>
                              </span>
                            </div>
                          </div>
                        </div> -->
                        <div id="leadReceivedDates" class="cursor-pointer">
                          <i class="fas fa-calendar" style="color: white;"></i>&nbsp;
                        </div>
                      </span>
                    </div>
                  </th>
                  <!-- ----------------------------Name---------------------------- -->
                  <th style="width: 22%;" [ngStyle]="{'width' : pendingleadsparam == 1 || normalcallparam == 1 || followupleadsparam == 1 ? '22%' : ''}">
                    <div class="d-flex justify-content-between align-items-baseline">
                      <span>Name</span>
                      <span *ngIf="(roleid == '1' || roleid == '2') && (pendingleadsparam == 1 || normalcallparam == 1 || followupleadsparam == 1)" class="d-flex">Show only Inactive   <input type="checkbox" [(ngModel)]="rnrCount" class="mx-2 big_size cursor-pointer" name='programming' (change)="getAllInactiveLeads()"></span>
                    </div>
                  </th>
                  <th *ngIf="type != 'bookings'">
                    <div class="d-flex justify-content-between align-items-center">
                      <span>Priority</span>
                      <span class="leadstatusdrop d-flex">
                        <div>
                          <button class="btn btn-warning" type="button" id="assignLeadDropdown" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false" style="padding: 0px 5px !important;">
                            <i class="fas fa-filter" style="color: white;"></i>
                          </button>
                          <div class="dropdown-menu " aria-labelledby="assignLeadDropdown" style="cursor:pointer;">
                            <a class="dropdown-item dropDownCursor" (click)="prioritychange('1')">Hot</a>
                            <a class="dropdown-item dropDownCursor" (click)="prioritychange('2')">Warm</a>
                            <a class="dropdown-item dropDownCursor" (click)="prioritychange('3')">Cold</a>
                          </div>
                        </div>
                      </span>
                    </div>
                  </th>
                  <!-- ----------------------------Lead status with filter---------------------------- -->
                  <th *ngIf="type != 'leads'">
                    <div class="d-flex justify-content-between align-items-center">
                      <span>Visit Type</span>
                      <span class="leadstatusdrop d-flex">
                        <!-- <span style="font-size: 14px;">{{selectedLeadStatus}}</span> -->
                        <div>
                          <button class="btn btn-warning" type="button" id="assignLeadDropdown" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false" style="padding: 0px 5px !important;">
                            <i class="fas fa-filter" style="color: white;"></i>
                          </button>
                          <div class="dropdown-menu " aria-labelledby="assignLeadDropdown" style="cursor:pointer;">
                            <a class="dropdown-item dropDownCursor" (click)="leadStatus('All')">All</a>
                            <a class="dropdown-item dropDownCursor" (click)="leadStatus('Assigned')">Assigned</a>
                            <a class="dropdown-item dropDownCursor" (click)="leadStatus('Direct Visits')">Direct
                              Visits</a>
                          </div>
                        </div>
                      </span>
                    </div>
                  </th>
                  <!-- ----------------------------source with filter--------------------------- -->
                  <th *ngIf="roleid == '1' || roleid == '2' || roleid == '50013' || roleid == '50014'">
                    <div class="d-flex justify-content-between">
                      <span>Source</span>
                      <div>
                        <button class="btn btn-warning" type="button" id="bookingLeadDropdown_source"
                          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                          style="padding: 0px 5px !important;">
                          <i class="fas fa-filter" style="color: white;"></i>
                        </button>
                        <div class="dropdown-menu propertyBasedFilter" aria-labelledby="bookingLeadDropdown_source"
                          style="cursor:pointer; max-height: 250px;max-width: auto;overflow-y: auto;overflow-x: hidden;">
                          <!-- Filter Search  input -->
                          <div class="dropdown-search-container"><input type="text" class="form-control sourcesearch"
                              placeholder="Search..." [(ngModel)]="searchTerm_source" (input)="filtersource()"
                              style="margin-bottom: 2px;"></div>
                          <!-- Dropdown items with checkboxes -->
                          <div class="source_list_checkbox">
                            <div *ngFor="let sourcelist of sourceList">
                              <label class="dropdown-item dropDownCursor mb-1">
                                <input type="checkbox" class="mr-2 loopcheckbox hidesourcecheckbox"
                                  id="hidesourcecheckboxid" value="{{sourcelist?.source}}" name='sourceFilter'
                                  (change)="onCheckboxChangesource()">
                                {{ sourcelist.source }}
                              </label>
                            </div>
                          </div>

                        </div>
                      </div>
                    </div>
                  </th>
                  <!-- ----------------------------property with filter---------------------------- -->
                  <th>
                    <div class="d-flex justify-content-between">
                      <span>Property</span>
                      <div>
                        <button class="btn btn-warning" type="button" id="bookingLeadDropdown" data-toggle="dropdown"
                          aria-haspopup="true" aria-expanded="false" style="padding: 0px 5px !important;">
                          <i class="fas fa-filter" style="color: white;"></i>
                        </button>
                        <div class="dropdown-menu propertyBasedFilter" aria-labelledby="bookingLeadDropdown"
                          style="cursor:pointer; max-height: 250px;max-width: 250px;overflow-y: auto;">
                          <!-- Filter Search  input -->
                          <div class="dropdown-search-container"><input type="text" class="form-control propsearch"
                              placeholder="Search..." [(ngModel)]="searchTerm" (input)="filterProjects()"
                              style="margin-bottom: 2px;"></div>
                          <!-- Dropdown items with checkboxes -->
                          <div *ngIf="mandateprojects?.length">
                            <div *ngFor="let project of mandateprojects">
                              <label class="dropdown-item dropDownCursor mb-1">
                                <!-- <input type="checkbox" class="mr-2 loopcheckbox hidepropcheckbox"
                                  id="hidepropcheckboxid" value="{{project?.property_idfk}}" name='propFilter'
                                  (change)="onCheckboxChange()"> -->
                                <span (click)="onCheckboxChange(project)"> {{ project.property_info_name }}</span>
                              </label>
                            </div>
                          </div>
                          <div *ngIf="!mandateprojects?.length" class="text-center" style="color: #666666;">
                            <h4>No Properties Found</h4>
                          </div>
                        </div>
                      </div>
                    </div>
                  </th>
                  <!-- ----------------------------stage with filter---------------------------- -->
                  <th *ngIf="!(pendingleadsparam == '1' || usvParam == '1' || rsvParam == '1' || fnParam == '1')" style="width: 7%;">
                    <span
                      *ngIf="(bookedParam || bookingRequestParam || bookingPendingParam || bookingRejectedParam || normalcallparam || junkleadsParam || additionalParam == 'Active' || additionalParam == 'Touched' )  == '1' && ( rsvParam || fnParam || followupleadsparam || junkvisitsParam) != 1">Stage</span>
                    <div class="d-flex justify-content-between align-items-center" *ngIf=" (rsvParam || fnParam || usvParam) == 1 ">
                      <span>Stage</span>
                     </div>

                    <div class="d-flex justify-content-between align-items-center"
                      *ngIf="(junkvisitsParam == 1 || additionalParam == 'AllVisits' || additionalParam == 'Assigned' || additionalParam == 'ActiveVisits')&& (normalcallparam || usvParam || rsvParam ||fnParam || followupleadsparam || inactiveparam || bookingRequestParam || bookedParam || junkleadsParam || bookingPendingParam) != 1">
                      <span>Stage</span>
                      <span class="leadstatusdrop d-flex">
                        <div>
                          <button class="btn btn-warning" type="button" id="bookingLeadDropdown" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false" style="padding: 0px 5px !important;">
                            <i class="fas fa-filter" style="color: white;"></i>
                          </button>
                          <div class="dropdown-menu" aria-labelledby="bookingLeadDropdown" style="cursor:pointer;">
                            <div class="dropdown-item dropDownCursor ">
                              <div class="d-flex justify-content-between" (click)="junkstatuschange('USV','')">
                                <span>USV</span><i class="fa fa-angle-right"
                                  *ngIf="additionalParam != 'AllVisits' && additionalParam != 'ActiveVisits'"></i>
                              </div>
                              <div class="submenu"
                                *ngIf="additionalParam != 'AllVisits' && additionalParam != 'ActiveVisits'">
                                <a class="submenu-item" (click)="junkStageStatusChange('USV','1')">Fix</a>
                                <a class="submenu-item" (click)="junkStageStatusChange('USV','3')">Done</a>
                              </div>
                            </div>
                            <div class="dropdown-item dropDownCursor">
                              <div class="d-flex justify-content-between" (click)="junkstatuschange('RSV','')">
                                <span>RSV</span><i class="fa fa-angle-right"
                                  *ngIf="additionalParam != 'AllVisits' && additionalParam != 'ActiveVisits'"></i>
                              </div>
                              <div class="submenu"
                                *ngIf="additionalParam != 'AllVisits' && additionalParam != 'ActiveVisits'">
                                <a class="submenu-item" (click)="junkStageStatusChange('RSV','1')">Fix</a>
                                <a class="submenu-item" (click)="junkStageStatusChange('RSV','3')">Done</a>
                              </div>
                            </div>
                            <div class="dropdown-item dropDownCursor">
                              <div class="d-flex justify-content-between"
                                (click)="junkstatuschange('Final Negotiation','')"><span>FN</span><i
                                  class="fa fa-angle-right"
                                  *ngIf="additionalParam != 'AllVisits' && additionalParam != 'ActiveVisits'"></i>
                              </div>
                              <div class="submenu"
                                *ngIf="additionalParam != 'AllVisits' && additionalParam != 'ActiveVisits'">
                                <a class="submenu-item" (click)="junkStageStatusChange('Final Negotiation','1')">Fix</a>
                                <a class="submenu-item"
                                  (click)="junkStageStatusChange('Final Negotiation','3')">Done</a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </span>
                    </div>

                    <div class="d-flex justify-content-between align-items-center"
                      *ngIf=" (followupleadsparam || inactiveparam) == 1 ">
                      <span>Stage</span>
                      <span class="leadstatusdrop d-flex">
                        <div>
                          <button class="btn btn-warning" type="button" id="bookingLeadDropdown" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false" style="padding: 0px 5px !important;">
                            <i class="fas fa-filter" style="color: white;"></i>
                          </button>
                          <div class="dropdown-menu categoryBasedFilter" aria-labelledby="category  Dropdown"
                            style="cursor:pointer; max-height: 250px;max-width: 250px;overflow-y: auto;">
                            <div class="dropdown-search-container"><input type="text"
                                class="form-control categorysearch" placeholder="Search..."
                                [(ngModel)]="searchTerm_stagecategory" (input)="filterStageCategory()"
                                style="margin-bottom: 2px;"></div>
                            <div *ngIf="followctgFilter?.length">
                              <div class="exec_list_checkbox">
                                <div *ngFor="let category of followctgFilter">
                                  <label class="dropdown-item dropDownCursor mb-1"
                                    (click)="onCheckboxstageCategoryChange(category)">
                                    {{ category.followup_categories }}
                                  </label>
                                </div>
                              </div>


                            </div>
                            <div *ngIf="!followctgFilter?.length" class="text-center" style="color: #666666;">
                              <h4>No Categories Found</h4>
                            </div>
                          </div>
                        </div>
                      </span>
                    </div>

                  </th>
                  <!-- ----------------------------Assigned to(RM)---------------------------- -->
                  <th
                    *ngIf="(roleid == '1' || roleid == '2' || (role_type == '1' && visitType != '1')) && visitType != 1">
                    <div class="d-flex justify-content-between">
                      <span>Assignees</span>
                      <div>
                         <!-- <button class="btn btn-warning" type="button" data-toggle="modal" data-target="#filtermodal" style="padding: 0px 5px !important;">
                          <i class="fas fa-filter" style="color: white;"></i>
                        </button> -->
                        <button class="btn btn-warning" type="button" id="executiveDropdown" data-toggle="dropdown"
                          aria-haspopup="true" aria-expanded="false" style="padding: 0px 5px !important;">
                          <i class="fas fa-filter" style="color: white;"></i>
                        </button>
                        <div class="dropdown-menu propertyBasedFilter" aria-labelledby="executiveDropdown" (click)="$event.stopPropagation()"
                          style="cursor:pointer; max-height: 350px;max-width: 400px;width: 300px !important;">
                          <div class="">
                            <div class="form-group col-12 pt-2">
                              <label>Assignees:</label><br />
                              <p-multiSelect id="mandateExec_dropdown" [options]="mandateExecutivesFilter" [appenTo]="main_count_header"
                                [(ngModel)]="selectedFilteredEXECUTIVES" [filter]="true" optionLabel="name" #customersupport="ngModel"
                                name="customersupport" defaultLabel="Select Executives"
                                (onChange)="filterExecutiveSelect($event)"></p-multiSelect>
                            </div>
                        
                            <div class="form-group col-12">
                              <label>Assigned On:</label><br />
                              <input type="text" id="assigedOnDates" class="form-control form-control-sm cursor-pointer" style="height: 2.9rem;width: 250px;"
                                placeholder="Select Date Range" readonly />
                            </div>
                          </div>
                        </div>
                        <!-- <div class="dropdown-menu propertyBasedFilter" aria-labelledby="executiveDropdown"
                          style="cursor:pointer; max-height: 250px;max-width: 350px;overflow-y: auto;">
                          <div class="dropdown-search-container" *ngIf="visitType != '1'">
                            <input type="text" class="form-control executivesearch" placeholder="Search..." [(ngModel)]="searchTerm_executive"
                              (input)="filterExecutive()" style="margin-bottom: 2px;">
                          </div>
                          <div *ngIf="mandateExecutivesFilter?.length" class="d-flex">
                            <div class="exec_list_checkbox" *ngIf="visitType != '1'">
                              <div *ngFor="let exec of mandateExecutivesFilter">
                                <label class="dropdown-item dropDownCursor mb-1">
                                  <input type="checkbox" class="mr-2 loopcheckbox hideExecutivecheckbox" id="hideExecutivecheckboxid"
                                    value="{{exec?.id}}" name='executiveFilter' (change)="onCheckboxExecutiveChange()">
                                  {{ exec.name }}
                                </label>
                              </div>
                            </div> -->
                            <!-- All & self Visit executive filter  -->
                        
                            <!-- Assigned Visit executive filter  -->
                            <!-- <div *ngIf="visitType == '1'" class="px-1">
                                                      <span style="font-weight: 700;text-decoration: underline;" class="text-center">Assigned
                                                        From</span>
                                                      <div *ngFor="let exec of assignedVisitsBy">
                                                        <label class="dropdown-item dropDownCursor mb-1">
                                                          <span (click)="onCheckboxTeamExecutiveChange(exec,'cs')">{{ exec.name }}</span>
                                                        </label>
                                                      </div>
                                                    </div> -->
                            <!-- <div style="border: 1px solid grey;" *ngIf="visitType == '1'"></div>
                                                    <div *ngIf="visitType == '1'" class="px-1">
                                                      <span style="font-weight: 700;text-decoration: underline;" class="text-center">Assigned
                                                        To</span>
                                                      <div *ngFor="let exec of mandateExecutivesFilter">
                                                        <label class="dropdown-item dropDownCursor mb-1">
                                                          <span (click)="onCheckboxTeamExecutiveChange(exec,'rm')">{{ exec.name }}</span>
                                                        </label>
                                                      </div>
                                                    </div> -->
                            <!-- Assigned Visit executive filter  -->
                            <!-- </div>
                                                  <div *ngIf="!mandateExecutivesFilter?.length" class="text-center" style="color: #666666;">
                                                    <h4>No Executives Found</h4>
                                                  </div>
                                                </div> -->
                      </div>
                        </div>
                  </th>
                  <!-- Mandate Executives list for CS account -->
                  <th
                    *ngIf="(roleid == '50013' || roleid == '50014' || role_type == 1 || roleid == 1) && visitType == '1'">
                    <div class="d-flex justify-content-between">
                      <span>Assigned To</span>
                      <div>
                        <button class="btn btn-warning" type="button" id="executiveDropdown" data-toggle="dropdown"
                          aria-haspopup="true" aria-expanded="false" style="padding: 0px 5px !important;">
                          <i class="fas fa-filter" style="color: white;"></i>
                        </button>
                        <div class="dropdown-menu executiveBasedFilter" aria-labelledby="executiveDropdown"
                          style="cursor:pointer; max-height: 250px;max-width: 250px;overflow-y: auto;">
                          <!-- Filter Search  input -->
                          <div class="dropdown-search-container"><input type="text" class="form-control executivesearch"
                              placeholder="Search..." [(ngModel)]="searchTerm_executive" (input)="filterExecutive()"
                              style="margin-bottom: 2px;"></div>
                          <!-- Dropdown items with checkboxes -->
                          <div *ngIf="rmMandateExecutivesFilter?.length">
                            <div *ngFor="let exec of rmMandateExecutivesFilter">
                              <label class="dropdown-item dropDownCursor mb-1">
                                <input type="checkbox" class="mr-2 loopcheckbox hideExecutivecheckbox"
                                  id="hideExecutivecheckboxid" value="{{exec?.id}}" name='executiveFilter'
                                  (change)="onCheckboxExecutiveChange()">
                                {{ exec.name }}
                              </label>
                            </div>
                          </div>
                          <div *ngIf="!rmMandateExecutivesFilter?.length" class="text-center" style="color: #666666;">
                            <h4>No Executives Found</h4>
                          </div>
                        </div>
                      </div>
                    </div>
                  </th>
                  <!-- Mandate Executives list for CS account -->

                  <!-- mandate Rm filter  -->
                  <th *ngIf="(roleid != '50013' && roleid != '50014') && visitType == '1'">
                    <div class="d-flex justify-content-between">
                      <span>Assigned by</span>
                      <div>
                        <button class="btn btn-warning" type="button" id="executiveDropdown" data-toggle="dropdown"
                          aria-haspopup="true" aria-expanded="false" style="padding: 0px 5px !important;">
                          <i class="fas fa-filter" style="color: white;"></i>
                        </button>
                        <div class="dropdown-menu executiveBasedFilter" aria-labelledby="executiveDropdown"
                          style="cursor:pointer; max-height: 250px;max-width: 250px;overflow-y: auto;">
                          <!-- Filter Search  input -->
                          <div class="dropdown-search-container"><input type="text" class="form-control executivesearch"
                              placeholder="Search..." [(ngModel)]="searchTerm_cs_executives"
                              (input)="filterCsExecutive()" style="margin-bottom: 2px;"></div>
                          <!-- Dropdown items with checkboxes -->
                          <div *ngIf="assignedVisitsBy?.length">
                            <div *ngFor="let exec of assignedVisitsBy">
                              <label class="dropdown-item dropDownCursor mb-1">
                                <!-- <input type="checkbox" class="mr-2 loopcheckbox hideExecutivecheckbox"
                                  id="hideExecutivecheckboxid" value="{{exec?.id}}" name='executiveFilter'
                                  (change)="onCheckboxCSExecutiveChange()"> -->
                                <span (click)="onCheckboxCSExecutiveChange(exec)">{{ exec.name }}</span>
                              </label>
                            </div>
                          </div>
                          <div *ngIf="!assignedVisitsBy?.length" class="text-center" style="color: #666666;">
                            <h4>No Executives Found</h4>
                          </div>
                        </div>
                      </div>
                    </div>
                  </th>
                  <!-- mandate Rm filter  -->
                  <!-- ----------------------------ASSIGNED ON for pending---------------------------- -->
                  <!-- <th>
                    <div class="d-flex justify-content-between align-items-center">
                      <span>Assigned On</span>
                      <span class="leadstatusdrop d-flex">
                        <div id="assigedOnDates" class="cursor-pointer">
                          <i class="fas fa-calendar" style="color: white;"></i>&nbsp;
                        </div>
                      </span>
                    </div>
                  </th> -->
                  <!-- ----------------------------NEXT FOLLOWUP for general followups---------------------------- -->
                  <!-- <th *ngIf="followupleadsparam == '1'">Next Followup</th> -->
                  <!-- ----------------------------Next action for NC,USV,RSV,FN with from and to date filter---------------------------- -->
                  <th
                    *ngIf="((normalcallparam == 1 || followupleadsparam == '1') || ( additionalParam == 'Active' || additionalParam == 'Assigned')) || ((visitedFrom == '' || visitedFrom == undefined) && (visitedTo == '' || visitedTo == undefined) && (usvParam ==1 || rsvParam ==1 || fnParam == 1))"
                    style="width: 10%;">
                    <div class="d-flex justify-content-between align-items-center">
                      <span *ngIf="followupleadsparam != '1'">Next Action </span>
                      <span *ngIf="followupleadsparam == '1'">Next Followup </span>
                      <span class="leadstatusdrop d-flex">
                        <div>
                          <div id="nextActionDates" class="cursor-pointer">
                            <i class="fas fa-calendar" style="color: white;"></i>&nbsp;
                          </div>
                        </div>
                      </span>
                    </div>
                  </th>
                  <!-- ----------------------------USV,RSV,FN with visitedfrom and visitedto date filter---------------------------- -->
                  <th
                    *ngIf="((((usvParam || rsvParam || fnParam || junkvisitsParam) == '1') && stagestatusval == 3) || (additionalParam == 'AllVisits' || additionalParam == 'ActiveVisits'  || additionalParam == 'Assigned'))">
                    <div class="d-flex justify-content-between align-items-center">
                      <span>Visited On</span>
                      <span class="leadstatusdrop d-flex">
                        <div id="visitedOnDates" class="cursor-pointer">
                          <i class="fas fa-calendar" style="color: white;"></i>&nbsp;
                        </div>
                      </span>
                    </div>
                  </th>
                  <!-- ----------------------------Last Updated for inactive---------------------------- -->
                  <!-- <th *ngIf="inactiveparam == '1'">Last Update</th> -->
                  <!-- ----------------------------Lastest remarks---------------------------- -->
                  <th class="remarksection" *ngIf="!(pendingleadsparam == '1')" style="width: 20%;">
                    <div class="d-flex justify-content-between">
                      <span>Latest Remarks</span>
                      <div *ngIf="followupleadsparam == 1 || normalcallparam == 1">
                        <button class="btn btn-warning" type="button" id="bookingLeadDropdown_source"
                          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                          style="padding: 0px 5px !important;">
                          <i class="fas fa-filter" style="color: white;"></i>
                        </button>
                        <div class="dropdown-menu propertyBasedFilter" aria-labelledby="bookingLeadDropdown_source"
                          style="cursor:pointer; max-height: 250px;max-width: 250px;; overflow-y: auto;padding-inline:1rem !important;padding-block: 0.5rem !important;">
                          <!-- Filter Search  input -->
                          <input type="text" class="form-control sourcesearch" placeholder="Search Remarks"
                            [(ngModel)]="serachRemarks" style="margin-bottom: 2px;">
                          <div class="text-right pt-2"><button class="btn btn-warning" type="button"
                              (click)="filterRemarks()">Search</button></div>
                        </div>
                      </div>
                    </div>
                  </th>
                  <!-- ----------------------------view section with Reject and approve only for booking request and view only data for booked---------------------------- -->
                  <th *ngIf="bookingRequestParam == 1 || bookedParam == 1 || bookingRejectedParam == 1"></th>
                </tr>
              </thead>
              <tbody *ngIf="callerleads?.length" class="enquiry_table_body">
                <tr *ngFor="let leads of callerleads; let i = index" style="background: white !important;">
                  <!-- ----------------------------Sl.no---------------------------- -->
                  <td style="text-align: center;">
                    {{i+1}}</td>
                  <!-- ----------------------------Sl.no---------------------------- -->

                  <!-- ----------------------------Lead Received---------------------------- -->
                  <td *ngIf="roleid == '1' || roleid == '2'">
                    <!-- ----------------------------Lead Received date if its assigned for the same person again---------------------------- -->
                    <span
                      *ngIf="(leads?.leadDate | date: 'dd-MMM-yyyy') !== (leads?.latestDateTime | date: 'dd-MMM-yyyy')">
                      {{leads?.latestDateTime | date: 'dd-MMM-yyyy'}}
                      <span *ngIf="leads?.latestDateTime">,{{ leads?.latestDateTime | date: 'hh:mm a'}}</span>
                    </span>
                    <!-- ----------------------------Lead Received date if its assigned for the same person again---------------------------- -->
                    <hr class="m-0"
                      *ngIf="(leads?.leadDate | date: 'dd-MMM-yyyy') !== (leads?.latestDateTime | date: 'dd-MMM-yyyy')">
                    <!-- ----------------------------Lead Received date if its assigned for the first time---------------------------- -->
                    <span style="font-size: 12px; font-weight: 300;display: block;" class="mt-1"
                      *ngIf="(leads?.leadDate | date: 'dd-MMM-yyyy') !== (leads?.latestDateTime | date: 'dd-MMM-yyyy')">First
                      Received</span>
                    <span style="font-size: 12px;font-weight: 300"
                      *ngIf="(leads?.leadDate | date: 'dd-MMM-yyyy') !== (leads?.latestDateTime | date: 'dd-MMM-yyyy')">{{leads.leadDate
                      | date: 'dd-MMM-yyyy'}} <span *ngIf="leads.leadTime">,{{ leads.leadTime}}</span> </span>
                    <span
                      *ngIf="((leads?.leadDate | date: 'dd-MMM-yyyy') == (leads?.latestDateTime | date: 'dd-MMM-yyyy')) || leads?.latestDateTime == null">{{leads.leadDate
                      | date: 'dd-MMM-yyyy'}} <span *ngIf="leads.leadTime">,{{ leads.leadTime}}</span></span>
                    <!-- ----------------------------Lead Received date if its assigned for the first time---------------------------- -->
                  </td>
                  <!-- ----------------------------Lead Received---------------------------- -->

                  <!-- ----------------------------Customer name and number---------------------------- -->
                  <td *ngIf="roleid == 1 || roleid == '2'"
                    [ngStyle]="{'width': pendingleadsparam == '1' ?'280px' : '','color': (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? 'red' : ' ' , 'opacity' : (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? '' :''}">
                    <a class="btn_style cursor-pointer" (click)="detailsPageRedirection()">
                      <div class="statuscard"
                        routerLink="/mandate-customers/{{leads.LeadID}}/{{leads?.ExecId}}/{{'0'}}/{{'mandate'}}/{{leads.propertyid}}"
                        [ngStyle]="{'color': (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? 'red' : '' , 'opacity' : (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? '' :''}">
                        {{leads.CustomerName}}
                        <span class="blocked_des" *ngIf="leads.rnr_counts >= 5"><i class="fas fa-ban"
                            style="color: white;"></i> Inactive</span>
                        <span class="statusbatch"
                          *ngIf="(leads.assigneddate | date:'yyyy-MM-dd') == todaysdateforcompare && pendingleadsparam == '1'">{{leads.Leadphase}}
                          <i class="fa fa-sync-alt"></i>
                        </span>
                        <span *ngIf="leads?.qualified_leads == '2'" class="d-flex"><img
                            src="../../../../assets/images/qualified.svg" style="width: 20px;"></span>
                        <span *ngIf="leads?.qualified_leads == '3'" class="d-flex"><img
                            src="../../../../assets/images/not_qualified.svg" style="width: 20px;"></span>
                      </div>
                      <div class="d-flex gap-3"
                        [ngStyle]="{'color': (todaysdateforcompare > leads?.nextactiondate && ( normalcallparam || usvParam || rsvParam || fnParam)) ? 'red' : '' , 'opacity' : (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? '' :''}">
                        <span class="call_des" *ngIf="leads?.number && leads.Leadphase != 'Junk'"
                          (click)="triggerCall(leads)" data-toggle="tooltip" data-placement="right"
                          [attr.title]="'Click to Call: ' +  (((roleid != 50001 && roleid != 50002) || (leads?.Leadphase != 'Fresh' || (leads?.Leadphase == 'Fresh' && leads.followupreason == 8))) ? leads?.number : 'xxxxxxxxxx')"><img
                            src="../../../../assets/images/call_btn.png"></span>
                        <!-- <span class="call_des" *ngIf="leads?.number" (click)="moveToWhatsapp(leads)"
                          data-toggle="tooltip" data-placement="right" title="Click to Chat"><img
                            src="../../../../assets/images/whatsapp_btn.png"></span> -->
                        <span class="call_des"
                          *ngIf="leads?.number && pendingleadsparam != 1 && ((leads.Leadphase != 'Fresh' || (leads.Leadphase == 'Fresh' && leads.followupreason == 8)) || (roleid == 1 || roleid == 2))"
                          (click)="recordingList(leads)" data-toggle="tooltip" data-placement="right"
                          title="Click to listen to the recordings"><img src="../../../../assets/images/play_btn.png">
                        </span>
                      </div>
                    </a>
                  </td>

                  <td *ngIf="roleid != 1 && roleid != '2'"
                    [ngStyle]="{'color': (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? 'red' : '' , 'opacity' : (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? '' :''}">
                    <span *ngIf="inactiveparam == '1' || junkvisitsParam == '1' || junkleadsParam == '1'">
                      <!-- ----------------------------Customer name and stage (lead pushed junk/inactive above 2 hours not clickable---------------------------- -->
                      <span
                        *ngIf="(inactiveparam == '1' && (leads?.rnr_counts >= 5 || leads?.rnr_counts < 5 || leads?.rnr_counts == null) && isOverAnHourOld(leads?.lastupdated)) || ((junkvisitsParam == '1' || junkleadsParam == '1'))">
                        <a>
                          <div class=" anchor disabled"
                            [ngStyle]="{'color': (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? 'red' : '' , 'opacity' : (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? '' :''}">
                            {{leads.CustomerName}}
                            <span *ngIf="leads?.qualified_leads == '2'"><img
                                src="../../../../assets/images/qualified.svg" style="width: 20px;"></span>
                            <span *ngIf="leads?.qualified_leads == '3'"><img
                                src="../../../../assets/images/not_qualified.svg" style="width: 20px;"></span>
                          </div>
                          <div>+91xxxxxxxx</div>
                        </a>
                      </span>
                      <!-- ----------------------------Customer name and stage (lead pushed junk/inactive within 2 hours it's clickable---------------------------- -->
                      <span
                        *ngIf="inactiveparam == '1' && (leads?.rnr_counts < 5 || leads?.rnr_counts == null || leads?.rnr_counts >= 5) && !isOverAnHourOld(leads?.lastupdated)">
                        <a class="btn_style cursor-pointer" (click)="detailsPageRedirection()"
                          routerLink="/mandate-customers/{{leads.LeadID}}/{{leads?.ExecId}}/{{'0'}}/{{'mandate'}}/{{leads.propertyid}}">
                          <div class="statuscard"
                            [ngStyle]="{'color': (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? 'red' : '' , 'opacity' : (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? '' :''}">
                            {{leads.CustomerName}}
                            <span *ngIf="leads?.qualified_leads == '2'"><img
                                src="../../../../assets/images/qualified.svg" style="width: 20px;"></span>
                            <span *ngIf="leads?.qualified_leads == '3'"><img
                                src="../../../../assets/images/not_qualified.svg" style="width: 20px;"></span>
                            <!-- <br>{{leads?.number}} -->
                          </div>
                        </a>
                        <div>
                          <span class="call_des" *ngIf="leads?.number" (click)="triggerCall(leads)"
                            data-toggle="tooltip" data-placement="right"
                            [attr.title]="'Click to Call: ' + (((roleid != 50001 && roleid != 50002) || (leads.Leadphase != 'Fresh' || (leads?.Leadphase == 'Fresh' && leads.followupreason == 8))) ? leads?.number : 'xxxxxxxxxx')"><img
                              src="../../../../assets/images/call_btn.png"></span>
                          <!-- <span class="call_des" *ngIf="leads?.number" (click)="moveToWhatsapp(leads)"
                            data-toggle="tooltip" data-placement="right" title="Click to Chat"><img
                              src="../../../../assets/images/whatsapp_btn.png"></span> -->
                          <span class="call_des"
                            *ngIf="leads?.number && pendingleadsparam != 1 && ((leads.Leadphase != 'Fresh' || (leads.Leadphase == 'Fresh' && leads.followupreason == 8)) || (roleid == 1 || roleid == 2))"
                            (click)="recordingList(leads)" data-toggle="tooltip" data-placement="right"
                            title="Click to listen to the recordings"><img src="../../../../assets/images/play_btn.png">
                          </span>
                        </div>
                      </span>
                    </span>

                    <!-- ----------------------------Customer name and stage for all the stages execpt junk and inactive---------------------------- -->
                    <a *ngIf="inactiveparam != '1' && junkvisitsParam != '1' && junkleadsParam != '1'"
                      class="btn_style cursor-pointer" (click)="detailsPageRedirection()"
                      [ngStyle]="{'color': (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? 'red' : '' , 'opacity' : (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? '' :''}">
                      <div class="statuscard"
                        routerLink="/mandate-customers/{{leads?.LeadID}}/{{leads?.ExecId}}/{{'0'}}/{{'mandate'}}/{{leads.propertyid}}">
                        {{leads?.CustomerName}}
                        <span *ngIf="leads?.qualified_leads == '2'"><img src="../../../../assets/images/qualified.svg"
                            style="width: 20px;"></span>
                        <span *ngIf="leads?.qualified_leads == '3'"><img
                            src="../../../../assets/images/not_qualified.svg" style="width: 20px;"></span>
                      </div>
                      <div class="d-flex gap-3"
                        [ngStyle]="{'color': (todaysdateforcompare > leads?.nextactiondate && ( normalcallparam || usvParam || rsvParam || fnParam)) ? 'red' : '' , 'opacity' : (todaysdateforcompare > leads?.nextactiondate && (normalcallparam || usvParam || rsvParam || fnParam)) ? '' :''}">
                        <span class="call_des" *ngIf="leads?.number" (click)="triggerCall(leads)" data-toggle="tooltip"
                          data-placement="right"
                          [attr.title]="'Click to Call: ' + (((roleid != 50001 && roleid != 50002) || (leads.Leadphase != 'Fresh' || (leads?.Leadphase == 'Fresh' && leads.followupreason == 8))) ? leads?.number : 'xxxxxxxxxx')"><img
                            src="../../../../assets/images/call_btn.png"></span>
                        <!-- <span class="call_des" *ngIf="leads?.number" (click)="moveToWhatsapp(leads)"
                          data-toggle="tooltip" data-placement="right" title="Click to Chat"><img
                            src="../../../../assets/images/whatsapp_btn.png"></span> -->
                        <span class="call_des"
                          *ngIf="leads?.number && pendingleadsparam != 1 && ((leads.Leadphase != 'Fresh' || (leads.Leadphase == 'Fresh' && leads.followupreason == 8)) || (roleid == 1 || roleid == 2))"
                          (click)="recordingList(leads)" data-toggle="tooltip" data-placement="right"
                          title="Click to listen to the recordings"><img src="../../../../assets/images/play_btn.png">
                        </span>
                      </div>
                    </a>
                  </td>
                  <!-- ----------------------------Customer name and number---------------------------- -->

                  <!-- priority  -->
                   <td *ngIf="type != 'bookings'">
                    <span class="priority_hot flex" *ngIf="leads?.lead_priority == 1"><span
                        style="font-weight: 600;font-size: 14px;">HOT</span>&nbsp;<img src="../../../assets/images/hot-icon.png"></span>
                    <span class="priority_warm flex" *ngIf="leads?.lead_priority == 2"><span
                        style="font-weight: 600;font-size: 14px;">WARM</span>&nbsp;<img src="../../../assets/images/warm-icon.png"></span>
                    <span class="priority_cold flex" *ngIf="leads?.lead_priority == 3"><span
                        style="font-weight: 600;font-size: 14px;">COLD</span>&nbsp;<img
                        src="../../../assets/images/cold-clr-icon.png"></span>

                    <div *ngIf="leads?.lead_priority == 0">
                      <span style="font-style: italic;font-weight: 900;">Priority not Set</span>
                      <div class="text-right py-2">
                        <span id="executiveDropdown" data-toggle="dropdown" style="border-radius: 50px;padding-inline: 5px;border: 1px solid lightgray;cursor: pointer;">Set Here >></span>
                        <div>
                          <div class="dropdown-menu propertyBasedFilter" aria-labelledby="executiveDropdown"
                            (click)="$event.stopPropagation()"
                            style="cursor:pointer; max-height: 350px;max-width: 400px;width: 300px !important;">
                            <div class="">
                              <div class="form-group col-12 pt-2">
                                <label class="mb-0">Priority:</label>
                                <div class="d-flex gap-3 priority_btn">
                                  <span class="update_priority_btn" [ngClass]="{'active' : selectedUpdatePriority == 1}" (click)="updatePrriority('1')">Hot</span>
                                  <span class="update_priority_btn" [ngClass]="{'active' : selectedUpdatePriority == 2}" (click)="updatePrriority('2')">Warm</span>
                                  <span class="update_priority_btn" [ngClass]="{'active' : selectedUpdatePriority == 3}" (click)="updatePrriority('3')">Cold</span>
                                </div>
                              </div>

                              <div class="col-12 py-2 d-flex justify-content-end">
                                <button class="btn btn-warning mb-0" type="button" (click)="updateLeadPriority(leads)">Update</button>
                              </div>
                    
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                   </td>
                  <!-- priority  -->

                  <!-- ----------------------------Lead Assigned or Direct visit---------------------------- -->
                  <td *ngIf="type != 'leads'">
                    <span *ngIf="leads?.Leadidentifier == 0">Assigned</span>
                    <span *ngIf="leads?.Leadidentifier == 1">Direct</span>
                  </td>
                  <!-- ----------------------------Lead Assigned or Direct visit---------------------------- -->

                  <!-- ----------------------------Lead source---------------------------- -->
                  <td *ngIf="roleid == '1' || roleid == '2' || roleid == '50013' || roleid == '50014'">
                    {{leads.source == 'GR - Microsite' ? 'GR - campaign' : leads.source}}</td>
                  <!-- ----------------------------Lead source---------------------------- -->

                  <!-- ----------------------------Lead properties---------------------------- -->
                  <td>
                    {{leads.propertyname}}</td>
                  <!-- ----------------------------Lead properties---------------------------- -->

                  <!-- ----------------------------Lead stage---------------------------- -->
                  <td *ngIf="!(pendingleadsparam == '1' || usvParam == '1' || rsvParam == '1' || fnParam == '1')">
                  
                    <!-- ----------------------------lead stage is displayed for the stages not equal to usv and lead phase not equal to junk and Final negotiation and not equal to done stage---------------------------- -->
                    <span
                      *ngIf="leads.Leadphase != 'Final Negotiation' && leads.Leadphase != 'Junk' && stagestatusval != 3 && stagestatusval != '' && stagestatusval != undefined && usvParam != 1 && normalcallparam != 1 && additionalParam != 'AllVisits' && additionalParam != 'Assigned' && additionalParam != 'Active' && additionalParam != 'Touched' && additionalParam != 'ActiveVisits'">{{leads.Leadphase}}<span
                        *ngIf="inactiveparam == '1' || followupleadsparam == '1' && leads.Leadphase == 'Fresh'">
                        - {{leads.followup_categories}}</span></span>
                    <!-- ----------------------------lead stage is displayed for the stages not equal to usv and lead phase not equal to junk and Final negotiation and not equal to done stage---------------------------- -->
                  
                    <!-- ----------------------------lead stage is displayed for the stages  booked,booking request,followup and inactive and done stage---------------------------- -->
                    <span
                      *ngIf="(bookingRequestParam == 1 || bookedParam == 1 || bookingPendingParam == 1 || bookingRejectedParam == 1 || inactiveparam == '1' || followupleadsparam == '1') && (stagestatusval == 3 || stagestatusval == '' || stagestatusval == undefined)">{{leads.Leadphase}}
                      <span *ngIf="inactiveparam == '1' || followupleadsparam == '1' && leads.Leadphase == 'Fresh'"> -
                        {{leads.followup_categories}}</span></span>
                    <!-- ----------------------------lead stage is displayed for the stages  booked,booking request,followup and inactive and done stage---------------------------- -->
                  
                    <!-- ----------------------------To show leadstatus for allvisits---------------------------- -->
                    <span
                      *ngIf="(additionalParam == 'Assigned' || additionalParam == 'Active' || additionalParam == 'Touched' || additionalParam == 'ActiveVisits') && leads.Leadphase != 'Final Negotiation' ">{{leads.Leadphase}}
                      <span *ngIf="leads.Leadphase == 'Fresh'">- {{leads.followup_categories}}</span></span>
                    <!-- ----------------------------To show leadstatus for allvisits---------------------------- -->
                  
                    <!-- ----------------------------lead stage which are in junk ,where are showing the laststage---------------------------- -->
                    <span
                      *ngIf="leads.Leadphase == 'Junk' && stagestatusval != 3 && stagestatusval != ''  && stagestatusval != undefined && leads.laststage != 'Final Negotiation' && usvParam != 1 && normalcallparam != 1">{{leads.laststage}}</span>
                    <span
                      *ngIf="leads.Leadphase == 'Junk' && (stagestatusval == 3 || stagestatusval == '' || stagestatusval == undefined) && (junkvisitsParam == 1 || junkleadsParam == 1) && leads.laststage != 'Final Negotiation' && usvParam != 1 && normalcallparam != 1">{{leads.laststage}}</span>
                    <!-- ----------------------------lead stage which are in junk ,where are showing the laststage---------------------------- -->
                  
                  
                    <!-- ----------------------------lead stage which are in Final Negotiation is shown as FN---------------------------- -->
                    <span
                      *ngIf="leads.Leadphase == 'Final Negotiation' && junkvisitsParam != 1 && junkleadsParam != 1 && leads.Leadphase != leads.laststage && (stagestatusval == '3' || stagestatusval == '' || stagestatusval == undefined) && additionalParam != 'AllVisits' && additionalParam != 'Assigned' && additionalParam != 'Active' && additionalParam != 'Touched'">{{"FN"}}</span>
                    <span
                      *ngIf="leads.Leadphase == 'Final Negotiation' && junkvisitsParam != 1 && junkleadsParam != 1 && stagestatusval != '3' && stagestatusval != '' && stagestatusval != undefined && fnParam == 1 ">{{"FN"}}</span>
                    <span *ngIf="leads.laststage == 'Final Negotiation' && (junkvisitsParam == 1 || junkleadsParam == 1)">{{"FN"}}</span>
                    <span
                      *ngIf="leads.laststage == 'Final Negotiation' && (additionalParam == 'AllVisits' || additionalParam == 'Assigned' || additionalParam == 'Active' || additionalParam == 'Touched' || additionalParam == 'ActiveVisits') && junkvisitsParam != 1 && junkleadsParam != 1 && leads.Leadphase != 'Closing Request Rejected' && leads.Leadphase != 'Deal Closing Pending' && leads.Leadphase != 'Deal Closing Requested' && leads.Leadphase != 'DCRR' && leads.Leadphase != 'Deal Closed' && leads.Leadphase != 'Junk'">{{"FN"}}</span>
                    <!-- ----------------------------lead stage which are in Final Negotiation is shown as FN---------------------------- -->
                  
                    <!-- ----------------------------lead stage USV fix shown for NC---------------------------- -->
                    <span *ngIf="normalcallparam == 1">NC</span>
                    <!-- ----------------------------lead stage USV fix shown for NC---------------------------- -->
                  
                    <!-- ----------------------------lead stage USV fix---------------------------- -->
                    <span
                      *ngIf="(usvParam == 1 && (leads.stagestatus == 1 || leads.stagestatus == 2) && leads.Leadphase == 'USV')">{{leads.Leadphase}}</span>
                    <!-- ----------------------------lead stage USV fix---------------------------- -->
                  
                    <!-- ----------------------------lead stage Leadphase2 for all visits shown---------------------------- -->
                    <span *ngIf="additionalParam == 'AllVisits'">{{leads.Leadphase2}} Done</span>
                    <!-- ----------------------------lead stage Leadphase2 for all visits shown---------------------------- -->
                  
                    <!-- ----------------------------To show leadstatus for NC,RSV,FN with lead status not equal to done---------------------------- -->
                    <span
                      *ngIf="(leads.stagestatus == '1' || leads.stagestatus == '2') && usvParam != '1' && inactiveparam != '1' && bookingRequestParam != 1 && bookingPendingParam != 1 && bookingRejectedParam != 1 && bookedParam != 1 && stagestatusval != 3 && stagestatusval != '' && stagestatusval != undefined && normalcallparam != 1 && additionalParam != 'AllVisits' && additionalParam != 'Assigned' && additionalParam != 'Active' && additionalParam != 'Touched' && additionalParam != 'ActiveVisits'">{{'Fix'}}</span>
                    <span
                      *ngIf="leads.stagestatus == '3' && usvParam != '1' && inactiveparam != '1' && bookingRequestParam != 1 && bookingRejectedParam != 1 && bookingPendingParam != 1 &&  bookedParam != 1 && stagestatusval != 3 && stagestatusval != '' && stagestatusval != undefined && normalcallparam != 1 && additionalParam != 'AllVisits' && additionalParam != 'Assigned' && additionalParam != 'Active' && additionalParam != 'Touched' && additionalParam != 'ActiveVisits'">{{'Done'}}</span>
                    <!-- ----------------------------To show leadstatus for NC,RSV,FN with lead status not equal to done---------------------------- -->
                  
                    <!-- ----------------------------To show leadstatus for NC,RSV,FN with lead status equal to done  and showing followup if leadphase and laststage is equal---------------------------- -->
                    <span
                      *ngIf="(rsvParam || fnParam) == 1 && (stagestatusval == 3 || stagestatusval == '' || stagestatusval == undefined) && leads.Leadphase != leads.laststage && (leads.stagestatus == '1' || leads.stagestatus == '2') && leads.Leadphase != 'Closing Request Rejected' && leads.Leadphase != 'Deal Closing Requested' && leads.Leadphase != 'DCRR' && leads.Leadphase != 'Deal Closed' && leads.Leadphase != 'Deal Closing Pending' && leads.Leadphase != 'Junk' ">{{'Fix'}}</span>
                    <span
                      *ngIf="(rsvParam || fnParam) == 1 && (stagestatusval == 3 || stagestatusval == '' || stagestatusval == undefined) && leads.Leadphase != leads.laststage && leads.stagestatus == '3' && leads.Leadphase != 'Closing Request Rejected' && leads.Leadphase != 'Deal Closing Requested' && leads.Leadphase != 'DCRR' && leads.Leadphase != 'Deal Closed' && leads.Leadphase != 'Deal Closing Pending' && leads.Leadphase != 'Junk'">{{'Done'}}</span>
                    <!-- ----------------------------To show leadstatus for NC,RSV,FN with lead status equal to done  and showing followup if leadphase and laststage is equal---------------------------- -->
                  
                    <!-- ----------------------------To show leadstatus for junk lead status equal to done---------------------------- -->
                    <span
                      *ngIf="(junkvisitsParam == 1 ) && (stagestatusval == 3 || stagestatusval == '' || stagestatusval == undefined) && leads.laststage != 'Junk' && (leads.stagestatus == '1' || leads.stagestatus == '2')">{{'Fix'}}</span>
                    <span
                      *ngIf="(junkvisitsParam == 1 ) && (stagestatusval == 3 || stagestatusval == '' || stagestatusval == undefined) && leads.laststage != 'Junk' && leads.stagestatus == '3'">{{'Done'}}</span>
                    <!-- ----------------------------To show leadstatus for junk lead status equal to done---------------------------- -->
                  
                    <!-- ----------------------------To show leadstatus for usv done status and showing followup if leadphase and laststage is equal---------------------------- -->
                    <span
                      *ngIf="(usvParam) == 1 &&  leads.Leadphase != leads.laststage && (leads.stagestatus == '1' || leads.stagestatus == '2') && leads.Leadphase != 'Deal Closing Requested' && leads.Leadphase != 'Deal Closed' && leads.Leadphase != 'Deal Closing Pending' && leads.Leadphase != 'Junk' && leads.Leadphase != 'Closing Request Rejected' && leads.Leadphase != 'DCRR' && additionalParam != 'AllVisits' && additionalParam != 'Assigned' && additionalParam != 'Active' && additionalParam != 'Touched' && additionalParam != 'ActiveVisits'">{{'Fix'}}</span>
                    <span
                      *ngIf="(usvParam) == 1 &&  leads.Leadphase != leads.laststage && leads.stagestatus == '3' && leads.Leadphase != 'Deal Closing Requested' && leads.Leadphase != 'Deal Closed' && leads.Leadphase != 'Deal Closing Pending' && leads.Leadphase != 'Junk' && leads.Leadphase != 'Closing Request Rejected' && leads.Leadphase != 'DCRR' && additionalParam != 'AllVisits' && additionalParam != 'Assigned' && additionalParam != 'Active' && additionalParam != 'Touched' && additionalParam != 'ActiveVisits'">{{'Done'}}</span>
                    <!-- ----------------------------To show leadstatus for usv done status and showing followup if leadphase and laststage is equal---------------------------- -->
                  
                    <!-- ----------------------------To show leadstatus for allvisits---------------------------- -->
                    <span
                      *ngIf="(additionalParam == 'Assigned' || additionalParam == 'Active' || additionalParam == 'Touched' || additionalParam == 'ActiveVisits') && leads.Leadphase == 'Final Negotiation' && leads.laststage != 'Final Negotiation'">{{"FN"}}</span>
                    <span
                      *ngIf="(additionalParam == 'Assigned' || additionalParam == 'Active' || additionalParam == 'Touched' || additionalParam == 'ActiveVisits') && (leads.stagestatus == '1' || leads.stagestatus == '2') && leads.Leadphase != 'Deal Closing Requested' && leads.Leadphase != 'Deal Closed' && leads.Leadphase != 'Deal Closing Pending' && leads.Leadphase != 'Junk' && leads.Leadphase != 'Closing Request Rejected' && leads.Leadphase != 'DCRR'">{{'Fix'}}</span>
                    <span
                      *ngIf="(additionalParam == 'Assigned' || additionalParam == 'Active' || additionalParam == 'Touched' || additionalParam == 'ActiveVisits') && leads.stagestatus == '3' && leads.Leadphase != 'Deal Closing Requested' && leads.Leadphase != 'Deal Closed' && leads.Leadphase != 'Deal Closing Pending' && leads.Leadphase != 'Junk' && leads.Leadphase != 'Closing Request Rejected' && leads.Leadphase != 'DCRR'">{{'Done'}}</span>
                    <!-- ----------------------------To show leadstatus for allvisits---------------------------- -->
                  </td>
                  <!-- ----------------------------Lead stage---------------------------- -->

                  <!-- ----------------------------Assigned-Executive-Name---------------------------- -->
                  <td *ngIf="(roleid == '1' || roleid == '2' || role_type == '1') && visitType != '1'">
                    <span style="font-size: 14px;font-weight: 600;" *ngIf="visitType != '1'">{{leads.Executivename}}</span>

                    <div> {{leads.assigneddate |
                      date: 'dd-MMM-yyyy'}}
                      <div>{{leads.assigneddate | date: 'hh:mm a'}}</div>
                    </div>
                  </td>

                  <td
                    *ngIf="(roleid == '50013' || roleid == '50014' || roleid == '1' || roleid == '2' || role_type == 1) && visitType == '1'">
                    {{leads.visit_ass_to}}</td>

                  <td *ngIf="(roleid != '50013' && roleid != '50014') && visitType == '1'">
                    {{leads.visitsassignedby}}</td>


                  <!-- ----------------------------Assigned-Executive-Name---------------------------- -->

                  <!-- ----------------------------Assigned-DATE---------------------------- -->
                  <!-- <td>
                    {{leads.assigneddate |
                    date: 'dd-MMM-yyyy'}}
                    <div>{{leads.assigneddate | date: 'hh:mm a'}}</div>
                  </td> -->
                  <!-- ----------------------------Assigned-DATE---------------------------- -->

                  <!-- ----------------------------Next Action Date as Next Followup Date---------------------------- -->
                  <!-- <td *ngIf=" followupleadsparam == '1'">
                    {{leads.nextactiondate | date: 'dd-MMM-yyyy' }}
                    <div>{{leads.nextactiontime}}</div>
                  </td> -->
                  <!-- ----------------------------Next Action Date as Next Followup Date---------------------------- -->

                  <!------------------------------Next Action Date for NC,USV,SV,RSV,FN------------------------------>

                  <td  *ngIf="((normalcallparam == 1 ||  followupleadsparam == '1') || (additionalParam == 'Active' || additionalParam == 'Assigned')) || ((visitedFrom == '' || visitedFrom == undefined) && (visitedTo == '' || visitedTo == undefined) && (usvParam ==1 || rsvParam ==1 || fnParam == 1))">
                    <div *ngIf="(usvParam || rsvParam || fnParam) == '1'" class="pb-1">
                      <span class="stageStatusCard">
                        <!-- ----------------------------lead stage USV fix---------------------------- -->
                        <span
                          *ngIf="(usvParam == 1 && (leads.stagestatus == 1 || leads.stagestatus == 2) && leads.Leadphase == 'USV')">{{leads.Leadphase}}</span>
                    
                        <span *ngIf="usvParam == '1' && (stagestatusval == '3' || stagestatusval == '' || stagestatusval == undefined)">
                          <span
                            *ngIf="leads.Leadphase != leads.laststage && leads.Leadphase != 'Final Negotiation'">{{leads.Leadphase}}</span>
                          <span *ngIf="leads.Leadphase == leads.laststage">{{'Followup'}}</span>
                        </span>
                    
                        <!-- ----------------------------Status which is in done is shown for RSV stage---------------------------- -->
                        <span *ngIf="rsvParam == '1' && (stagestatusval == '3' || stagestatusval == '' || stagestatusval == undefined)">
                          <span
                            *ngIf="leads.Leadphase != leads.laststage && leads.Leadphase != 'Final Negotiation'">{{leads.Leadphase}}</span>
                          <span *ngIf="leads.Leadphase == leads.laststage">{{'Followup'}}</span></span>
                    
                        <!-- ----------------------------Status which is in done is shown for FN stage---------------------------- -->
                        <span *ngIf="fnParam == '1' && (stagestatusval == '3' || stagestatusval == '' || stagestatusval == undefined)"><span
                            *ngIf="leads.Leadphase != leads.laststage && leads.Leadphase != 'Final Negotiation'">{{leads.Leadphase}}</span>
                          <span
                            *ngIf="leads.Leadphase == 'Final Negotiation' && junkvisitsParam != 1 && junkleadsParam != 1 && leads.Leadphase != 'Final Negotiation'">{{"FN"}}</span>
                          <span *ngIf="leads.Leadphase == leads.laststage">{{'Followup'}}</span></span>
                    
                        <!-- to be shown FN if the leadphase if fn -->
                        <span
                          *ngIf="leads.Leadphase == 'Final Negotiation' && junkvisitsParam != 1 && junkleadsParam != 1 && leads.Leadphase != leads.laststage && (stagestatusval == '3' || stagestatusval == '' || stagestatusval == undefined) && additionalParam != 'AllVisits' && additionalParam != 'Assigned' && additionalParam != 'Active' && additionalParam != 'Touched'">{{"FN"}}</span>
                    
                        <!-- ----------------------------To show leadstatus for usv done status and showing followup if leadphase and laststage is equal---------------------------- -->
                        <span
                          *ngIf="(usvParam) == 1 &&  leads.Leadphase != leads.laststage && (leads.stagestatus == '1' || leads.stagestatus == '2') && leads.Leadphase != 'Deal Closing Requested' && leads.Leadphase != 'Deal Closed' && leads.Leadphase != 'Deal Closing Pending' && leads.Leadphase != 'Junk' && leads.Leadphase != 'Closing Request Rejected' && leads.Leadphase != 'DCRR' && additionalParam != 'AllVisits' && additionalParam != 'Assigned' && additionalParam != 'Active' && additionalParam != 'Touched' && additionalParam != 'ActiveVisits'">{{'Fix'}}</span>
                        <span
                          *ngIf="(usvParam) == 1 &&  leads.Leadphase != leads.laststage && leads.stagestatus == '3' && leads.Leadphase != 'Deal Closing Requested' && leads.Leadphase != 'Deal Closed' && leads.Leadphase != 'Deal Closing Pending' && leads.Leadphase != 'Junk' && leads.Leadphase != 'Closing Request Rejected' && leads.Leadphase != 'DCRR' && additionalParam != 'AllVisits' && additionalParam != 'Assigned' && additionalParam != 'Active' && additionalParam != 'Touched' && additionalParam != 'ActiveVisits'">{{'Done'}}</span>
                    
                        <!-- ----------------------------To show leadstatus for NC,RSV,FN with lead status not equal to done---------------------------- -->
                        <span
                          *ngIf="(leads.stagestatus == '1' || leads.stagestatus == '2') && usvParam != '1' && inactiveparam != '1' && bookingRequestParam != 1 && bookingPendingParam != 1 && bookingRejectedParam != 1 && bookedParam != 1 && stagestatusval != 3 && stagestatusval != '' && stagestatusval != undefined && normalcallparam != 1 && additionalParam != 'AllVisits' && additionalParam != 'Assigned' && additionalParam != 'Active' && additionalParam != 'Touched' && additionalParam != 'ActiveVisits'">{{'Fix'}}</span>
                        <span
                          *ngIf="leads.stagestatus == '3' && usvParam != '1' && inactiveparam != '1' && bookingRequestParam != 1 && bookingRejectedParam != 1 && bookingPendingParam != 1 &&  bookedParam != 1 && stagestatusval != 3 && stagestatusval != '' && stagestatusval != undefined && normalcallparam != 1 && additionalParam != 'AllVisits' && additionalParam != 'Assigned' && additionalParam != 'Active' && additionalParam != 'Touched' && additionalParam != 'ActiveVisits'">{{'Done'}}</span>
                    
                    
                        <!-- ----------------------------To show leadstatus for NC,RSV,FN with lead status equal to done  and showing followup if leadphase and laststage is equal---------------------------- -->
                        <span
                          *ngIf="(rsvParam || fnParam) == 1 && (stagestatusval == 3 || stagestatusval == '' || stagestatusval == undefined) && leads.Leadphase != leads.laststage && (leads.stagestatus == '1' || leads.stagestatus == '2') && leads.Leadphase != 'Closing Request Rejected' && leads.Leadphase != 'Deal Closing Requested' && leads.Leadphase != 'DCRR' && leads.Leadphase != 'Deal Closed' && leads.Leadphase != 'Deal Closing Pending' && leads.Leadphase != 'Junk' ">{{'Fix'}}</span>
                    
                        <span
                          *ngIf="(rsvParam || fnParam) == 1 && (stagestatusval == 3 || stagestatusval == '' || stagestatusval == undefined) && leads.Leadphase != leads.laststage && leads.stagestatus == '3' && leads.Leadphase != 'Closing Request Rejected' && leads.Leadphase != 'Deal Closing Requested' && leads.Leadphase != 'DCRR' && leads.Leadphase != 'Deal Closed' && leads.Leadphase != 'Deal Closing Pending' && leads.Leadphase != 'Junk'">{{'Done'}}</span>
                      </span>
                    </div>

                    <span
                      *ngIf="(leads.nextactiondate != '' && leads.nextactiondate != undefined && leads.nextactiondate != null) && (leads.nextactiontime!= '' && leads.nextactiontime!= undefined && leads.nextactiontime != null)">
                      {{leads.nextactiondate | date: 'dd-MMM-yyyy' }}
                      <div>{{leads.nextactiontime}}</div>
                    </span>
                    <span
                      *ngIf="(leads.nextactiondate == '' || leads.nextactiondate == undefined || leads.nextactiondate == null) || (leads.nextactiontime == '' || leads.nextactiontime == undefined || leads.nextactiontime == null)">
                      <div style="font-weight: 600;" class="text-center">Moved To</div>
                      <div style="font-weight: 600;" class="text-center">Junk</div>
                    </span>
                  </td>
                  <!------------------------------Next Action Date for NC,USV,RSV,FN------------------------------>

                  <!------------------------------Visited Date for NC,USV,RSV,FN------------------------------>
                  <td
                    *ngIf="((((usvParam|| rsvParam || fnParam || junkvisitsParam) == '1') && stagestatusval == 3) || (additionalParam == 'AllVisits' || additionalParam == 'ActiveVisits'  || additionalParam == 'Assigned'))  ">
                    {{leads.visiteddate | date: 'dd-MMM-yyyy'}}
                    <div>{{leads.visitedtime}}</div>
                  </td>
                  <!------------------------------Visited Date for NC,USV,RSV,FN------------------------------>

                  <!------------------------------Last Updated Date for Inactive List------------------------------>
                  <!-- <td *ngIf="inactiveparam == '1'">
                    {{leads.lastupdated | date: 'dd-MMM-yyyy'}}
                    <div>{{leads.lastupdated | date: 'hh:mm a'}}</div>
                  </td> -->
                  <!------------------------------Last Updated Date for Inactive List------------------------------>

                  <!------------------------------Latest Remarks Fetch Section------------------------------>
                  <td class="remarksection" *ngIf="!(freshleadsparam == '1' || pendingleadsparam == '1')">
                    <div class="last_update" *ngIf="inactiveparam == '1'">{{leads.lastupdated | date: 'dd-MMM-yyyy'}}
                      <span class="pr-1">{{leads.lastupdated | date: 'hh:mm a'}}</span>
                    </div>
                    <div style="overflow: hidden;white-space: normal;">
                      <div style="word-wrap: break-word;"
                        *ngIf="leads.Leadphase2 != 'USV' && leads.Leadphase2 != 'RSV' && (leads.visitremarks != 'got this lead from Admin' && leads.visitremarks != 'got this new lead Admin')">
                        {{leads.visitremarks}}</div>
                      <div style="word-wrap: break-word;" *ngIf="leads.Leadphase2 == 'USV'">{{leads.usvvisitremarks}}
                      </div>
                      <div style="word-wrap: break-word;" *ngIf="leads.Leadphase2 == 'RSV'">{{leads.rsvvisitremarks}}
                      </div>
                      <hr class="m-0"
                        *ngIf="(leads.visitremarks && leads.visitremarks != 'got this lead from Admin' && leads.visitremarks != 'got this new lead Admin') && leads.manualremarks">
                      {{leads.manualremarks}}
                    </div>
                    <div style="font-size: 18px;font-style: italic;font-weight: 900;text-align: center;"
                      *ngIf="(leads.usvvisitremarks == null && leads.Leadphase2 == 'USV') || (leads.Leadphase2 == 'RSV' && leads.Leadphase2 == 'RSV') || (leads.manualremarks == null && (leads.visitremarks == null || leads.visitremarks == 'got this lead from Admin' || leads.visitremarks == 'got this new lead Admin'))">
                      No Remarks </div>
                  </td>
                  <!------------------------------Latest Remarks Fetch Section------------------------------>

                  <!-- ----------------------------view section with Reject and approve only for booking request and view only data for booked---------------------------- -->
                  <td *ngIf="bookingRequestParam == 1  || bookedParam == 1 || bookingRejectedParam == 1"
                    class="text-center" style="width: 5%;cursor: pointer;">
                    <span
                      (click)="verifyrequest(leads.LeadID,leads.suggestedprop[0].propid,leads.ExecId,leads.suggestedprop[0].name,leads.Leadphase)"
                      data-toggle="modal" data-target="#dealcloserequest"><i class="fa fa-eye"></i> </span>
                  </td>
                  <!-- ----------------------------view section with Reject and approve only for booking request and view only data for booked---------------------------- -->
                </tr>
              </tbody>
            </table>
            <!-- All Visits Related Data listing table For ADMIN View-->
          </div>
        </div>

        <!-- Followup Sections Table -->
        <div class="text-center lead_norecord" *ngIf="! callerleads?.length">
          No Leads Found.....
        </div>
      </div>
    </div>
  </div>

  <div hidden class="more_filter_maindiv p-3">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" (click)="close()"><span aria-hidden="true">&times;</span><span
            class="sr-only">Close</span></button>
      </div>
      <div class="modal-body">
        <div class="row datfiltermain">

          <div class="col-6 pt-2">
            <label>Select Priority Type :</label>
            <select id="project_dropdown3" class="form-control ui dropdown dashboard_dropdown mr-3"
              (change)="prioritychange($event)">
              <option value="">Select Priority</option>
              <option value="hot" [selected]="'hot' === priorityType">HOT</option>
              <option value="warm" [selected]="'warm' === priorityType">WARM</option>
              <option value="cold" [selected]="'cold' === priorityType">COLD</option>
            </select>
          </div>

        </div>
      </div>
      <div class="modal-footer">
        <a class="apply_btn" (click)="filterhere()">Apply</a>
      </div>
    </div>
  </div>
</div>

<!-- MAIN-CONTENTS -->

<!-- ---------------------------- reassign table---------------------------- -->
<div class="modal fade" id="assign_lead" tabindex="-1" role="dialog" aria-labelledby="defModalHead" aria-hidden="true">
  <div class="modal-dialog assignlead_modal">
    <div class="modal-content enquiry_modal_body" id="assign_leads">
      <div class="modal-header">
        <h4 class="col-10 m-0">Total Re-Assign Leads : {{reassignleadsCount}}</h4>
        <div class="d-flex" style="gap: 0.2rem">
          <label>Random Assign</label>
          <div class="custom-control custom-switch">
            <input type="checkbox" class="custom-control-input" id="customSwitch5" (change)="checkRandom($event)"
              [disabled]="maxSelectedLabels == 1">
            <label class="custom-control-label" for="customSwitch5"></label>
          </div>
        </div>
        <button type="button" class="close" id="closereassignmodal" data-dismiss="modal"><span
            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
      </div>
      <div class="modal-body">
        <div class="new_enquiry_form col-xs-12">
          <form class="form-inline" name="form" novalidate>

            <!-- <div class="form-group col-3 input_cmn_div" [hidden]="role_type == '1'">
              <label class="font-bold">Assign Team</label>
              <select id="team_dropdown" class="form-control ui dropdown dashboard_dropdown mr-1"
                (change)="reassignTeam($event)">
                <option value="">Select Team</option>
                <option value="retail" [selected]="'retail' === team">Retail Team</option>
                <option value="mandate" [selected]="'mandate' === team">Mandate Team</option>
              </select>
            </div> -->

            <div class="form-group col-3 input_cmn_div">
              <label class="font-bold">Select Property</label>
              <select id="property_dropdown" class="form-control ui dropdown dashboard_dropdown mr-3"
                (change)="reassignPropChange($event)">
                <option value="" selected>Select Project</option>
                <option *ngFor="let projects of mandateprojects" value="{{projects.property_idfk}}"
                  [selected]="projects.property_idfk == selectedMandateProp">
                  {{projects.property_info_name}}</option>
              </select>
            </div>

            <div class="form-group col-3 input_cmn_div">
              <label class="font-bold">Assign Executive Team</label>
              <select id="retail_dropdown" class="form-control ui dropdown dashboard_dropdown mr-1"
                (change)="reassignExecTeam($event)">
                <option value="" selected>All</option>
                <option value="50002">Relationship Executives</option>
                <option value="50014">Customersupport Executives</option>
              </select>
            </div>

            <div class="form-group col-3 input_cmn_div d-flex flex-column align-items-baseline">
              <label class="font-bold">Assign To</label>
              <p-multiSelect id="mandateExec_dropdown" [options]="reassignListExecutives" *ngIf="role_type != '1'"
                [(ngModel)]="selectedEXECUTIVES" [filter]="true" optionLabel="name" #customersupport="ngModel"
                name="customersupport" defaultLabel="Select Executives"
                (onChange)="reAssignexecutiveSelect($event)"></p-multiSelect>

              <p-dropdown id="mandateExec_dropdown" [options]="reassignListExecutives" *ngIf="role_type == '1'"
                optionLabel="name" defaultLabel="Select Executives" placeholder="Select Executives"
                (onChange)="reAssignexecutiveSelect($event)"></p-dropdown>
            </div>

            <!-- <div class="form-group col-3 input_cmn_div" [hidden]="selectedTeamType != 'retail'"
              [ngStyle]="{'padding-top':selectedTeamType != 'retail'?'0.5rem':'0rem'}">
              <label class="font-bold">Assign To</label>
              <p-multiSelect id="retailExec_dropdown" [options]="retailreassignListExecutives"
                [(ngModel)]="selectedEXECUTIVES" [filter]="true" optionLabel="ExecName" #customersupport="ngModel"
                name="customersupport" defaultLabel="Select Executives"
                (onChange)="reAssignexecutiveSelect($event)"></p-multiSelect>
            </div> -->

            <div class="form-group col-3 input_cmn_div">
              <label class="font-bold">Leads Count</label>
              <select id="leadcount_dropdown" class="form-control ui fluid dropdown" (change)="selectcounts($event)">
                <option style="display:none" value="" selected>Select Lead Count</option>
                <option value="Manual">Manual Select</option>
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="30">30</option>
                <option value="40">40</option>
                <option value="50">50</option>
                <option value="60">60</option>
                <option value="70">70</option>
                <option value="80">80</option>
                <option value="90">90</option>
                <option value="100">100</option>
                <option value="150">150</option>
                <option value="200">200</option>
                <option value="250">250</option>
                <option value="300">300</option>
                <option value="350">350</option>
                <option value="400">400</option>
                <option value="450">450</option>
                <option value="500">500</option>
              </select>
            </div>

            <div class="form-group col-2 input_cmn_div pt-3" *ngIf="roleid == '1' || roleid == '2'">
              <button type="button" class="btn btn-warning" (click)="getAssignedLeadsList()">Assign Now</button>
            </div>

            <div class="form-group col-2 input_cmn_div pt-3" *ngIf="role_type == '1'">
              <button type="button" class="btn btn-warning" (click)="teamLeadReassign()">Assign Now</button>
            </div>

            <!-- list of reassign selected leads table  -->
            <div class="assign_table1 pt-3">
              <table id="start2" class="content_table_main table table-striped table-bordered" infinite-scroll
                [fromRoot]="true" [scrollWindow]="false" [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50"
                [infiniteScrollContainer]="'.assign_table1'" (scrolled)="loadMoreassignedleads()">
                <tbody class="enquiry_table_body">
                  <tr *ngFor="let assign of callerleads; let i = index">
                    <td>
                      <div>
                        <input type="checkbox" class="mr-4 loopcheckbox hidecheckbox" id="hidecheckboxid"
                          value="{{assign}}" name='programming' (change)="getselectedleads()"
                          [attr.data-assign]="assign | json" style="display: none;">
                        <label>{{i+1}}</label>
                      </div>
                    </td>
                    <td>
                      <span
                        *ngIf="(assign.leadDate | date: 'dd-MMM-yyyy') !== (assign?.latestDateTime | date: 'dd-MMM-yyyy')">
                        {{assign?.latestDateTime | date: 'dd-MMM-yyyy'}},
                        {{ assign?.latestDateTime | date: 'hh:mm a'}}
                      </span>
                      <hr class="m-0"
                        *ngIf="(assign.leadDate | date: 'dd-MMM-yyyy') !== (assign?.latestDateTime | date: 'dd-MMM-yyyy')">
                      <span style="font-size: 12px; font-weight: 300;display: block;" class="mt-1"
                        *ngIf="(assign.leadDate | date: 'dd-MMM-yyyy') !== (assign?.latestDateTime | date: 'dd-MMM-yyyy')">First
                        Received</span>
                      <span style="font-size: 12px;font-weight: 300"
                        *ngIf="(assign.leadDate | date: 'dd-MMM-yyyy') !== (assign?.latestDateTime | date: 'dd-MMM-yyyy')">{{assign.leadDate
                        | date: 'dd-MMM-yyyy'}}, {{ assign.leadTime}} </span>
                      <span
                        *ngIf="((assign.leadDate | date: 'dd-MMM-yyyy') == (assign?.latestDateTime | date: 'dd-MMM-yyyy')) || assign?.latestDateTime == null">{{assign.leadDate
                        | date: 'dd-MMM-yyyy'}}, {{ assign.leadTime}} </span>
                    </td>
                    <td style="width: 300px;">
                      <div class="statuscard">{{assign.CustomerName}} <span class="statusbatch"
                          *ngIf="assign.Leadphase != 'Final Negotiation'">{{assign.Leadphase}} <i
                            class="fa fa-sync-alt"></i> </span><span class="statusbatch"
                          *ngIf="assign.Leadphase == 'Final Negotiation'">FN <i class="fa fa-sync-alt"></i> </span>
                      </div>
                      <div>{{assign.number}}</div>
                    </td>
                    <!-- <td>{{assign.number}}</td> -->
                    <td>{{assign.source}}</td>
                    <td>{{assign.propertyname}}</td>
                    <td>{{assign.Executivename}}</td>
                    <td>{{assign.assigneddate | date: 'dd-MMM-yyyy'}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ---------------------------- reassign table---------------------------- -->

<!-- ----------------------------feedback assign table---------------------------- -->
<div class="modal fade" id="feedback_assign_lead" tabindex="-1" role="dialog" aria-labelledby="defModalHead"
  aria-hidden="true">
  <div class="modal-dialog assignlead_modal">
    <div class="modal-content enquiry_modal_body" id="assign_leads">
      <div class="modal-header">
        <h4 class="col-10 m-0">Total Re-Assign Leads : {{reassignleadsCount}}</h4>
        <!-- <div class="d-flex" style="gap: 0.2rem">
          <label>Random Assign</label>
          <div class="custom-control custom-switch">
            <input type="checkbox" class="custom-control-input" id="customSwitch5" (change)="checkRandom($event)"
              [disabled]="maxSelectedLabels == 1">
            <label class="custom-control-label" for="customSwitch5"></label>
          </div>
        </div> -->
        <button type="button" class="close" id="closereassignmodal" data-dismiss="modal"><span
            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
      </div>
      <div class="modal-body">
        <div class="new_enquiry_form col-xs-12">
          <form class="form-inline" name="form" novalidate>

            <!-- <div class="form-group col-3 input_cmn_div">
              <label class="font-bold">Select Property</label>
              <select id="property_dropdown" class="form-control ui dropdown dashboard_dropdown mr-3"
                (change)="reassignPropChange($event)">
                <option value="" selected>Select Project</option>
                <option *ngFor="let projects of mandateprojects" value="{{projects.property_idfk}}"
                  [selected]="projects.property_idfk == selectedMandateProp">
                  {{projects.property_info_name}}</option>
              </select>
            </div> -->

            <div class="form-group col-3 input_cmn_div">
              <label class="font-bold justify-content-start">Assign To</label>
              <select id="retailExec_dropdown" class="form-control ui dropdown dashboard_dropdown"
                (change)="feedbackassignExecutive($event)">
                <option value="">Select Executive</option>
                <option *ngFor="let exec of reassignListExecutives" value="{{exec.id}}">{{exec.name}}</option>
              </select>
            </div>

            <!-- <div  class="form-group col-3 input_cmn_div">
              <label class="font-bold justify-content-start">Assign To</label>
              <select id="retailExec_dropdown" class="form-control ui dropdown dashboard_dropdown" (change)="feedbackassignExecutive($event)">
              <option value="">Select Executive</option>
              <option *ngFor="let exec of reassignListExecutives" value="{{exec.id}}"
                [selected]="exec.id === execid">{{exec.name}}</option>
              </select>
            </div> -->

            <div class="form-group col-3 input_cmn_div">
              <label class="font-bold">Leads Count</label>
              <select id="leadcount_dropdown" class="form-control ui fluid dropdown"
                (change)="selectfeedbackcounts($event)">
                <option style="display:none" value="" selected>Select Lead Count</option>
                <option value="Manual">Manual Select</option>
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="30">30</option>
                <option value="40">40</option>
                <option value="50">50</option>
                <option value="60">60</option>
                <option value="70">70</option>
                <option value="80">80</option>
                <option value="90">90</option>
                <option value="100">100</option>
                <option value="150">150</option>
                <option value="200">200</option>
                <option value="250">250</option>
                <option value="300">300</option>
                <option value="350">350</option>
                <option value="400">400</option>
                <option value="450">450</option>
                <option value="500">500</option>
              </select>
            </div>

            <div class="form-group col-2 input_cmn_div pt-3">
              <button type="button" class="btn btn-warning" (click)="postFeedbackLeads()">Assign Now</button>
            </div>

            <!-- list of reassign selected leads table  -->
            <div class="assign_table1 pt-3">
              <table id="start3" class="content_table_main table table-striped table-bordered" infinite-scroll
                [fromRoot]="true" [scrollWindow]="false" [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50"
                [infiniteScrollContainer]="'.assign_table1'" (scrolled)="loadMoreassignedleads()">
                <tbody class="enquiry_table_body">
                  <tr *ngFor="let assign of callerleads; let i = index">
                    <td>
                      <div>
                        <input type="checkbox" class="mr-4 loopcheckbox feedbackhidecheckbox"
                          id="feedbackhidecheckboxid" value="{{assign}}" name='programming'
                          (change)="getselectedleads()" [attr.data-assign]="assign | json" style="display: none;">
                        <label>{{i+1}}</label>
                      </div>
                    </td>
                    <td>
                      <span
                        *ngIf="(assign.leadDate | date: 'dd-MMM-yyyy') !== (assign?.latestDateTime | date: 'dd-MMM-yyyy')">
                        {{assign?.latestDateTime | date: 'dd-MMM-yyyy'}},
                        {{ assign?.latestDateTime | date: 'hh:mm a'}}
                      </span>
                      <hr class="m-0"
                        *ngIf="(assign.leadDate | date: 'dd-MMM-yyyy') !== (assign?.latestDateTime | date: 'dd-MMM-yyyy')">
                      <span style="font-size: 12px; font-weight: 300;display: block;" class="mt-1"
                        *ngIf="(assign.leadDate | date: 'dd-MMM-yyyy') !== (assign?.latestDateTime | date: 'dd-MMM-yyyy')">First
                        Received</span>
                      <span style="font-size: 12px;font-weight: 300"
                        *ngIf="(assign.leadDate | date: 'dd-MMM-yyyy') !== (assign?.latestDateTime | date: 'dd-MMM-yyyy')">{{assign.leadDate
                        | date: 'dd-MMM-yyyy'}}, {{ assign.leadTime}} </span>
                      <span
                        *ngIf="((assign.leadDate | date: 'dd-MMM-yyyy') == (assign?.latestDateTime | date: 'dd-MMM-yyyy')) || assign?.latestDateTime == null">{{assign.leadDate
                        | date: 'dd-MMM-yyyy'}}, {{ assign.leadTime}} </span>
                    </td>
                    <td style="width: 300px;">
                      <div class="statuscard">{{assign.CustomerName}}<span class="statusbatch"
                          *ngIf="assign.Leadphase != 'Final Negotiation'">{{assign.Leadphase}} <i
                            class="fa fa-sync-alt"></i> </span><span class="statusbatch"
                          *ngIf="assign.Leadphase == 'Final Negotiation'">FN <i class="fa fa-sync-alt"></i> </span>
                      </div>
                      <div>{{assign.number}}</div>
                    </td>
                    <!-- <td>{{assign.number}}</td> -->
                    <td>{{assign.source}}</td>
                    <td>{{assign.propertyname}}</td>
                    <td>{{assign.Executivename}}</td>
                    <td>{{assign.assigneddate | date: 'dd-MMM-yyyy'}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ---------------------------- feedback assign table---------------------------- -->

<!-- ----------------------------After reassign Info table---------------------------- -->
<button type="button" data-toggle="modal" data-target="#reassigned_leads_modal" id="reassign_leads_detail"
  style="display: none;">Show
  Details</button>
<div class="modal fade" id="reassigned_leads_modal" tabindex="-1" role="dialog" aria-labelledby="defModalHead"
  aria-hidden="true">
  <div class="modal-dialog reassignlead_modal">
    <div class="modal-content enquiry_modal_body" id="reassign_leads">
      <div class="modal-header">
        <h4 class="col-10 m-0" *ngIf="selectedAssignType != 'feedback'">Re-Assigned Leads Details</h4>
        <h4 class="col-10 m-0" *ngIf="selectedAssignType == 'feedback'">Feedback Assigned Leads Details</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="closeDetailModal()"><span
            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
      </div>
      <div class="modal-body">
        <div class="new_enquiry_form col-xs-12">
          <div class="assign_table1 pt-3">
            <div class="">
            </div>
            <table class="content_table_main table table-striped table-bordered" infinite-scroll [fromRoot]="true"
              [scrollWindow]="false" [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50"
              [infiniteScrollContainer]="'.assign_table1'">
              <thead>
                <tr class="header" *ngIf="(roleid == '1' || roleid == '2') || (role_type == '1' && type == 'leads')">
                  <th>#</th>
                  <th>Name</th>
                  <th>Fresh Assigned</th>
                  <th>Re-Assigned</th>
                  <th *ngIf="selectedAssignType != 'feedback'">Not Assigned</th>
                  <th *ngIf="selectedAssignType != 'feedback'">Untouched Leads</th>
                </tr>

                <tr class="header" *ngIf="role_type == '1' && type == 'visits'">
                  <th>#</th>
                  <th>Executives</th>
                  <th>Assigned</th>
                  <th>Existing</th>
                  <th>Untouched Leads</th>
                </tr>
              </thead>
              <tbody class="enquiry_table_body"
                *ngIf="(roleid == '1' || roleid == '2') || (role_type == '1' && type == 'leads')">
                <tr *ngFor="let reassign of reassignedResponseInfo; let i = index">
                  <td>
                    <div>
                      <label>{{i+1}}</label>
                    </div>
                  </td>
                  <td>{{reassign.execname}}</td>
                  <td>{{reassign.fresh}}</td>
                  <td>{{reassign.reassigned}}</td>
                  <td *ngIf="selectedAssignType != 'feedback'">
                    <div>Already in Fresh - {{reassign.exsiting}}</div>
                    <div>Leads Capacity Reached - {{reassign.leads_skipped_executive_capacity}}</div>
                    <!-- <div>24 hrs not Completed- {{reassign.leads_skipped_executive_capacity}}</div>
                    <div>Moved as Junk - {{reassign.leads_skipped_executive_capacity}}</div> -->
                    <div>Gr-Swara-Leads - {{reassign.gr_swara_leads_skipped}}</div>
                  </td>
                  <td *ngIf="selectedAssignType != 'feedback'">{{(reassign.totalleads?reassign.totalleads:'---')}}</td>
                </tr>
              </tbody>

              <tbody class="enquiry_table_body" *ngIf="role_type == '1' && type == 'visits'">
                <tr *ngFor="let reassign of reassignedResponseInfo; let i = index">
                  <td>
                    <div>
                      <label>{{i+1}}</label>
                    </div>
                  </td>
                  <td>{{reassign.fromexecname}} <i class="fa fa-arrow-right"></i> {{reassign.toexecname}}</td>
                  <td>{{reassign.assignedleadscount}}</td>
                  <td>{{reassign.existingleadscount}}</td>
                </tr>
              </tbody>

            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ----------------------------After reassign Info table---------------------------- -->

<div class="clearfix"></div>

<!-- ----------------------------Approve & Reject popup modal for booking and view only data for booked---------------------------- -->
<div class="modal fade" id="dealcloserequest" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">

        <h4 class="modal-title">Closing Request for {{closepropertyname}}</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body col-12">
        <div class="row" *ngFor="let request of requestedunits">
          <div class="form-group col-4">
            <label class="mb-0">Selected Unit:</label><br />
            <span>{{request.bhk}}</span>
          </div>
          <div class="form-group col-4">
            <label class="mb-0">Unit Number:</label><br />
            <span>{{request.unit_number}}</span>
          </div>
          <div class="form-group col-4">
            <label class="mb-0">Dimension:</label><br />
            <span>{{request.dimension}}</span>
          </div>
          <div class="form-group col-4">
            <label class="mb-0">Rate Per Sqft:</label><br />
            <span>{{request.rate_per_sqft}}</span>
          </div>
          <div class="form-group col-12">
            <label>Uploaded Documents:</label>
            <div class="row">
              <div class="form-group col-6" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'jpg') || getExstendsion(attached.file_name) == 'jpeg' || getExstendsion(attached.file_name) == 'png'"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="100%" height="195px"
                    src="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                </a>

              </div>

              <div class="form-group col-12" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'pdf')" style="color: rgba(0, 0, 0, 0.87);"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="7%" height="50px" src="../../../assets/images/adobe-reader.svg">
                  {{attached.file_name}}
                </a>

              </div>
            </div>
          </div>

          <div style=" width: 100%; " class="modal-footer"
            *ngIf="(bookingRequestParam == 1 || bookingRejectedParam == 1)&& (roleid == 1 || roleid == '2') && leadBookingstatus != 1 && isbuttondisable == false">
            <button type="button" class="btn btn-success"
              (click)="requestapproval(request.Lead_IDFK,request.Exec_IDFK,request.property)">Approve</button>
            <button type="button" class="btn btn-danger" (click)="modaldropadd()" data-toggle="modal"
              data-target="#rejectionreason">Reject</button>
          </div>
          <div style="width: 100%;" class="modal-footer"
            *ngIf="isbuttondisable == true &&( roleid == 1 || roleid == '2') ">
            <button type="button" class="btn btn-warning">Already Rejected</button>
            <h4>(Waiting for the re-submission)</h4>
          </div>
          <div style=" width: 100%; " class="modal-footer" *ngIf="bookedParam == 1">
            <h4 style="color: #29A71A;">Admin approved the lead on {{request.closed_date}}<span
                *ngIf="request.closed_time"> ,</span> {{request.closed_time}}</h4>
          </div>
        </div>

      </div>

    </div>

  </div>
</div>
<!-- ----------------------------Approve & Reject popup modal for booking and view only data for booked---------------------------- -->

<!-- ----------------------------Rejection popup modal ---------------------------- -->
<div class="modal fade" id="rejectionreason" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Rejection Reason for {{closepropertyname}}</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="closeRejectionModal()">&times;</button>
      </div>
      <div class="modal-body col-12">
        <div *ngFor="let request of requestedunits">
          <div class="form-group">
            <label>Remarks:</label>
            <textarea style="height: 150px;" class="form-control rejectedtextarea"></textarea>
          </div>
          <div style="width: 100%;" class="modal-footer">
            <button type="button" class="btn btn-danger"
              (click)="requestrejection(request.Lead_IDFK,request.Exec_IDFK,request.property)">Submit</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ----------------------------Rejection popup modal ---------------------------- -->



<!-- Pop up modal for on call and update status  -->

<!-- <button type="button" data-toggle="modal" data-target="#on_call_modal" id="call_modal_detail"
  style="display: none;">Show Details</button>
<div class="modal fade" id="on_call_modal" tabindex="-1" role="dialog" data-backdrop="static"
  aria-labelledby="defModalHead" style="top: 45px !important;" aria-hidden="true">
  <div class="modal-dialog call_lead_modal modal-lg">
    <div class="modal-content enquiry_modal_body" id="call_leads">
      <div class="answered_call modal-header position-relative" [hidden]="callStatus == 'Call Disconnected'">
        <h4 class="col-12 m-0 text-center d-flex justify-content-center align-items-center"
          style="gap:0.5rem;font-size: 20px !important;font-weight: 500;">
          <dotlottie-wc src="https://lottie.host/c1f893c4-9817-41c0-a9db-30b173ad189c/VxouJL36tR.lottie"
            style="width: 20px;height: 20px;" speed="1" autoplay loop></dotlottie-wc> On Call with {{ calledLead?.number
          }}
        </h4>
      </div>

      <div class="disconnected_call modal-header position-relative" [hidden]="callStatus != 'Call Disconnected'">
        <h4 class="col-12 m-0 text-center d-flex justify-content-center align-items-center"
          style="gap:0.5rem;font-size: 20px !important;font-weight: 500;">
          <dotlottie-wc src="https://lottie.host/c1f893c4-9817-41c0-a9db-30b173ad189c/VxouJL36tR.lottie"
            style="width: 20px;height: 20px;" speed="1" autoplay loop></dotlottie-wc> Disconnected with {{
          calledLead?.number }}
        </h4>
        <button type="button" class="close" data-dismiss="modal"
          style="font-size: 25px !important;font-weight: 500;color: #ffffff !important;position: absolute;right: 10px;"><span aria-hidden="true"
            (click)="onCallModalClose()">&times;</span><span class="sr-only">Close</span></button>
      </div>

      <div class="modal-body">
        <app-mandate-call-details *ngIf="isModalOpen" [calledLead]="calledLead"
          [assignedRm]="assignedRm"></app-mandate-call-details>
      </div>
    </div>
  </div>
</div> -->

<!-- Pop up modal for on call and update status  -->


<!-- Pop up modal for  call recordings  -->
<button type="button" data-toggle="modal" data-target="#recordings_modal" id="call_record_modal_detail"
  style="display: none;">Show Details</button>
<div class="modal fade" id="recordings_modal" tabindex="-1" role="dialog" data-backdrop="static"
  aria-labelledby="defModalHead" style="top: 45px !important;overflow: hidden;" aria-hidden="true">
  <div class="modal-dialog call_lead_modal modal-lg">
    <div class="modal-content enquiry_modal_body" id="call_leads">
      <div class="call_recordings modal-header position-relative">
        <h4 class="col-12 m-0 text-center d-flex justify-content-center align-items-center"
          style="gap:0.5rem;font-size: 20px !important;font-weight: 500;">
          Call Recordings
        </h4>
        <button type="button" class="close" data-dismiss="modal"
          style="font-size: 25px !important;font-weight: 500;color: #ffffff !important;position: absolute;right: 10px;"><span
            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
      </div>

      <div class="modal-body">
        <div class="col-12 d-flex">
          <div class="col-4 pl-0">
            <span class="font_12">Lead Name</span>
            <div class="font_18">{{calledLead?.CustomerName}}</div>
          </div>

          <div class="col-4">
            <span class="font_12">Number</span>
            <div class="font_18">{{calledLead?.number}}</div>
          </div>

          <div class="col-4">
            <span class="font_12">Last Updated</span>
            <div class="font_18">{{calledLead?.lastupdated | date: 'dd-MMM-yyyy'}}</div>
          </div>

        </div>

        <div class="col-12 py-0 py-3">
          <hr>
        </div>

        <div class="col-12 pr-0">
          <span style="font-size: 18px;color: #8C8C8C;" *ngIf="roleid == 1 || roleid == 2">Assignees</span>

          <div class="execnav-scrollable">
            <ul class="execnav execnav-tabs col-12 pt-3" *ngIf="roleid == 1 || roleid == 2">
              <li class="exec-item" *ngFor=" let exec of onRecordExecList;let i = index;">
                <a class="exec-link" [class.active]="exec.Exec_IDFK == selectedRecordExec"
                  (click)="getexecutiveId(exec)">{{exec.exec_name}}&nbsp;
                </a>
              </li>
            </ul>
            <div class="recordings_list_table" style="height: 300px !important;overflow: scroll;">
              <table class="recordings_content_table_main table table-striped">
                <thead>
                  <tr class="header">
                    <!-- ----------------------------sl no---------------------------- -->
                    <th>Call Type</th>
                    <!-- <th>Date</th> -->
                    <th>Duration</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                    <th>Recordings</th>
                  </tr>
                </thead>
                <tbody *ngIf="audioList?.length">
                  <tr *ngFor="let leads of audioList; let i = index">
                    <td>{{leads.direction}}</td>
                    <!-- <td>{{leads.date}}</td> -->
                    <td>{{leads.answeredtime}}</td>
                    <td>{{leads.starttime}}</td>
                    <td>{{leads.endtime}}</td>
                    <td>
                      <div style="flex-direction: column;">
                        <audio class="media-item" [src]="leads.filename" controls (play)="onAudioPlay($event)">
                          Your browser does not support the audio element.
                        </audio>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="text-center lead_norecord" *ngIf="! audioList?.length">
                No Recordings Found.....
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>
</div>
<!-- Pop up modal for call recordings  -->

<!-- Filter Modal  -->
<div class="modal fade" id="filtermodal" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Filters</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body col-12">
        <div class="d-flex">
          <div class="form-group col-6">
            <label>Assignees:</label><br />
            <p-multiSelect id="mandateExec_dropdown" [options]="mandateExecutivesFilter"
              [(ngModel)]="selectedFilteredEXECUTIVES" [filter]="true" optionLabel="name" #customersupport="ngModel"
              name="customersupport" defaultLabel="Select Executives"
              (onChange)="filterExecutiveSelect($event)"></p-multiSelect>
          </div>
        
          <div class="form-group col-6">
            <label>Assigned On:</label><br />
            <input type="text" id="assigedOnDates" class="form-control form-control-sm cursor-pointer" style="height: 2.9rem;"
              placeholder="Select Date Range" readonly />
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
<!-- Filter Modal  -->