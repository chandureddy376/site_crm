<!-- HEADER -->
<app-header></app-header>
<!-- HEADER -->
<!-- MAIN-CONTENTS -->

<div class="col-12 details_bg  d-flex align-items-center" *ngIf="isDisaplyCall" style="padding-inline: 5rem !important;"
  [ngClass]="{'ringing_details_bg' : (callStatus == 'Ringing' || callStatus == 'Answered by agent') , 'details_bg' : (callStatus != 'Ringing')}">
  <div class="col-8 p-0 d-flex align-items-center">
    <div class="col-4 p-0">
      <span class="font_12">Name</span>
      <div class="font_16">{{show_cnt?.customer_name}}</div>
    </div>

    <div class="col-4 p-0">
      <span class="font_12">Mobile Number</span>
      <div class="font_16">{{((assignedrm &&
        assignedrm[0]?.leadstage != 'Fresh' ||
        ((assignedrm && assignedrm[0]?.leadstage == 'Fresh') && (assignedrm && assignedrm[0]?.followupreason == 8))) ?
        show_cnt?.customer_number : 'xxxxxxxxxx')}}</div>
    </div>

    <div class="col-4 p-0">
      <span class="font_12">Call Duration</span>
      <div class="font_16" *ngIf="callDurationStr">
        {{callDurationStr}}</div>
    </div>

    <!-- <div class="col-3 p-0">
            <div><span class="view_detail_btn">View Details</span></div>
          </div> -->
  </div>

  <div class="col-4 p-0 text-right">
    <div class="d-flex justify-content-end align-items-center" style="gap: 2rem;">
      <span class="end call_end_css cursor-pointer"
        *ngIf="((showCloseButton && (callStatus == 'CONNECTING' || callStatus == 'Answered' || callStatus == 'Answered by customer' )) || (showCloseConnectingButton && (callStatus == 'Ringing' || callStatus == 'Answered by agent')))"
        (click)="onCallDisconnect()">
        <span class="font_18"><img src="../../../../assets/images//end_call_btn.png"> Hang Up</span>
      </span>
      <span class="on_call_icon">
        <span><dotlottie-wc src="https://lottie.host/5a600bd0-43b2-4e75-9767-d30268cabec7/pNJ9TlllhB.lottie"
            style="width: 20px;height: 20px;" speed="1" autoplay loop></dotlottie-wc></span>
        <span class="font_18" *ngIf="callStatus != 'CONNECTING' && callStatus != 'Ringing'"> Ringing </span>
        <span class="font_18" *ngIf="callStatus == 'CONNECTING' || callStatus == 'Ringing'"> On Call</span>
      </span>
    </div>
  </div>
</div>
<div class="row body-cntnts-mandate"
  [ngClass]="{'blurred': ((assignedrm && assignedrm[0]?.rnrcount >= 5 && assignedrm[0]?.leadstage == 'Fresh' && roleid != 1 && roleid != '2'))}"
  [ngStyle]="{'padding-left': isSidebarHovered ? '14rem' : '3.5rem'}">

  <!-- <div class="body-cntnts"> -->
  <div class="booking_closure_validate col-6">
    <div class="closure_section_1">
      <div class="row ">
        <div class="top_btns col-12 d-flex justify-content-between">
          <div class="back_btn" [ngClass]="liveCallData ? 'blurred' : ''">
            <a (click)="backClicked()">Back</a>
          </div>
          <div *ngIf="adminview" style="display: flex; gap: 0.25rem;">
            <button class="btn btn-warning" type="button" data-toggle="modal" data-target="#assign_lead"
              *ngIf="(((assignedrm && assignedrm?.length > 0 && assignedrm[0]?.leadstage == 'Fresh') || (assignedrm && assignedrm?.length > 0 && assignedrm[0]?.leadstage == 'USV' && (assignedrm[0]?.leadstatus == '1' || assignedrm[0]?.leadstatus == '2'))) || (!assignedrm  || assignedrm?.length == 0))"
              (click)="assignmodalfetch('mandate','')" aria-haspopup="true" aria-expanded="false"
              style="padding: 0px 5px !important;">Assign<i class="fas fa-share pl-1" style="color: white;"></i>
            </button>

            <button class="btn btn-warning" type="button" data-toggle="modal" data-target="#visit_reassign_lead"
              *ngIf="assignedrm && assignedrm?.length > 0  && (assignedrm[0]?.leadstage == 'RSV' || assignedrm[0]?.leadstage == 'Final Negotiation' || (assignedrm[0]?.leadstage == 'USV' && assignedrm[0]?.leadstatus == '3'))"
              (click)="assignmodalfetch('mandate','visit-reassign')" aria-haspopup="true" aria-expanded="false"
              style="padding: 0px 5px !important;">Visit re-assign<i class="fas fa-share pl-1"
                style="color: white;"></i>
            </button>

            <!-- <div class="dropdown-menu " aria-labelledby="assignLeadDropdown" style="cursor:pointer;">
              <a class="dropdown-item dropDownCursor" data-toggle="modal" data-target="#assign_lead"
                (click)="assignmodalfetch('retail','')">Assign To Retail</a>
              <a class="dropdown-item dropDownCursor" data-toggle="modal" data-target="#assign_lead"
                (click)="assignmodalfetch('mandate','')">Assign To Mandate</a>
            </div> -->

            <div *ngIf="(roleid == '1' || roleid == '2') && fixedPropertiesList?.length > 0">
              <!-- <button class="btn btn-warning" id="visitAssignBtn" type="button" data-toggle="modal"
                data-target="#assign_lead" aria-haspopup="true" aria-expanded="false"
                style="padding: 0px 5px !important;" (click)="assignmodalfetch('mandate','visit')">Visit Assign
                <i class="fas fa-share" style="color: white;"></i>
              </button> -->
              <!-- <button class="btn btn-warning" type="button" id="visitassignLeadDropdown" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false" style="padding: 0px 5px !important;">Visit Assign
                <i class="fas fa-share" style="color: white;"></i>
              </button>
              <div class="dropdown-menu " aria-labelledby="visitassignLeadDropdown" style="cursor:pointer;">
                <a class="dropdown-item dropDownCursor" data-toggle="modal" data-target="#assign_lead"
                  (click)="assignmodalfetch('retail','visit')">Assign To Retail</a>
                <a class="dropdown-item dropDownCursor" data-toggle="modal" data-target="#assign_lead"
                  (click)="assignmodalfetch('mandate','visit')">Assign To Mandate</a>
              </div>  -->
            </div>

          </div>
          <div *ngIf="(roleid == '50013' || roleid == '50014') && fixedPropertiesList?.length > 0">
            <!-- <button class="btn btn-warning" id="visitAssignBtn" type="button" data-toggle="modal"
              data-target="#assign_lead" aria-haspopup="true" aria-expanded="false" style="padding: 0px 5px !important;"
              (click)="assignmodalfetch('mandate','visit')">Visit Assign
              <i class="fas fa-share" style="color: white;"></i>
            </button> -->
            <!-- <button class="btn btn-warning" type="button" id="visitassignLeadDropdown" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false" style="padding: 0px 5px !important;">Visit Assign
            <i class="fas fa-share" style="color: white;"></i>
          </button>
          <div class="dropdown-menu " aria-labelledby="visitassignLeadDropdown" style="cursor:pointer;">
            <a class="dropdown-item dropDownCursor" data-toggle="modal" data-target="#assign_lead"
              (click)="assignmodalfetch('retail','visit')">Assign To Retail</a>
            <a class="dropdown-item dropDownCursor" data-toggle="modal" data-target="#assign_lead"
              (click)="assignmodalfetch('mandate','visit')">Assign To Mandate</a>
          </div> -->
          </div>
        </div>
      </div>


      <div class="row">
        <div class="col-12">

          <div class="hi_profile text-center">
            <!-- if the merge array length == 0  -->
            <div *ngIf="show_cnt?.mergedleads?.length == 0">
              <span class="profile"><i class="fa fa-user-circle"></i></span>
              <h2>{{(show_cnt.enquiry_name?show_cnt.enquiry_name:show_cnt.customer_name)}} <span
                  *ngIf="show_cnt.enquiry_altname"><span
                    *ngIf="show_cnt.customer_name">/</span>{{show_cnt.enquiry_altname}}</span>
                <span class="editicon"><a data-toggle="modal" data-target="#edit_test"
                    (click)="getcustomerupdate(show_cnt.customer_IDPK)"><i class="far fa-edit"
                      style="color: red;"></i></a></span>
              </h2>
              <div class="d-flex flex-column justify-content-center align-items-center pb-1">
                <span class="priority flex" *ngIf="show_cnt.lead_priority == '1'"><span
                    style="font-weight: 600;font-size: 14px;">HOT</span>&nbsp;<img
                    src="../../../assets/images/hot-icon.png"></span>
                <span class="priority-warm flex" *ngIf="show_cnt.lead_priority == '2'"><span
                    style="font-weight: 600;font-size: 14px;">WARM</span>&nbsp;<img
                    src="../../../assets/images/warm-icon.png"></span>
                <span class="priority-cold flex" *ngIf="show_cnt.lead_priority == '3'"><span
                    style="font-weight: 600;font-size: 14px;">COLD</span>&nbsp;<img
                    src="../../../assets/images/cold-clr-icon.png"></span>
              </div>
              <div>
                <p class="mb-1 mail_num">
                  {{(show_cnt.enquiry_mail?show_cnt.enquiry_mail:show_cnt.customer_mail)}} <span
                    *ngIf="show_cnt.enquiry_altmail"><span
                      *ngIf="show_cnt.customer_mail">/</span>{{show_cnt.enquiry_altmail}}</span>
                </p>
                <p class="mail_num">
                  <span *ngIf="roleid != 50001 && roleid != 50002">{{show_cnt.customer_number}} <span
                      *ngIf="show_cnt.enquiry_altnumber"><span
                        *ngIf="show_cnt.customer_number">/</span>{{show_cnt.enquiry_altnumber}}</span></span>
                  <button class="btn btn-outline-warning" type="button" data-toggle="modal" data-target="#mergeModal"
                    style="padding: 0px 10px !important;border-radius: 15px !important;"
                    *ngIf="(roleid == 1 || roleid == 2 || role_type == 1) || (selectedExecId == userid && roleid != 1 && roleid != 2)"><span
                      class="d-flex justify-content-center align-items-center gap-05"><span
                        style="font-size: medium;font-weight: 500;">Merge</span> <img
                        src="../../../../assets/images/merge-icon.svg" height="15px"></span></button>
                </p>
              </div>
              <!-- <div class="pt-2">
                <span class="share_details" (click)="sharePropertyDetails()" *ngIf="!isShared"><i
                    class="fab fa-whatsapp" style="font-size: 16px;"></i> Share Property Details</span>
                <span class="already_shared" (click)="sharePropertyDetails()" *ngIf="isShared"><i
                    class="fab fa-whatsapp" style="font-size: 16px;"></i> Already Shared </span>
              </div> -->
            </div>

            <!-- if the merge array length == 1  -->
            <div class="d-flex justify-evenly align-items-center" *ngIf="show_cnt?.mergedleads?.length == 1">
              <div>
                <span class="profile"><i class="fa fa-user-circle"></i></span>
                <h2>{{(show_cnt.enquiry_name?show_cnt.enquiry_name:show_cnt.customer_name)}} <span
                    *ngIf="show_cnt.enquiry_altname">/{{show_cnt.enquiry_altname}}</span>
                  <span class="editicon"><a data-toggle="modal" data-target="#edit_test"
                      (click)="getcustomerupdate(show_cnt.customer_IDPK)"><i class="far fa-edit"
                        style="color: red;"></i></a></span>
                </h2>
                <div class="d-flex flex-column justify-content-center align-items-center pb-1">
                  <span class="priority flex" *ngIf="show_cnt.lead_priority == '1'"><span
                      style="font-weight: 600;font-size: 14px;">HOT</span>&nbsp;<img
                      src="../../../assets/images/hot-icon.png"></span>
                  <span class="priority-warm flex" *ngIf="show_cnt.lead_priority == '2'"><span
                      style="font-weight: 600;font-size: 14px;">WARM</span>&nbsp;<img
                      src="../../../assets/images/warm-icon.png"></span>
                  <span class="priority-cold flex" *ngIf="show_cnt.lead_priority == '3'"><span
                      style="font-weight: 600;font-size: 14px;">COLD</span>&nbsp;<img
                      src="../../../assets/images/cold-clr-icon.png"></span>
                </div>
                <div>
                  <p class="mb-1 mail_num">
                    {{(show_cnt.enquiry_mail?show_cnt.enquiry_mail:show_cnt.customer_mail)}} <span
                      *ngIf="show_cnt.enquiry_altmail">/{{show_cnt.enquiry_altmail}}</span>
                  </p>
                  <p class="mail_num">
                    {{show_cnt.customer_number}} <span
                      *ngIf="show_cnt.enquiry_altnumber">/{{show_cnt.enquiry_altnumber}}</span>
                    <button class="btn btn-outline-warning" type="button" data-toggle="modal" data-target="#mergeModal"
                      style="padding: 0px 10px !important;border-radius: 15px !important;"><span
                        class="d-flex justify-content-center align-items-center gap-05"><span
                          style="font-size: medium;font-weight: 500;">Merge</span> <img
                          src="../../../../assets/images/merge-icon.svg" height="15px"></span></button>
                  </p>
                </div>
                <!-- <div class="pt-2">
                  <span class="share_details" (click)="sharePropertyDetails()" *ngIf="!isShared"><i
                      class="fab fa-whatsapp" style="font-size: 16px;"></i> Share Property Details</span>
                  <span class="already_shared" (click)="sharePropertyDetails()" *ngIf="isShared"><i
                      class="fab fa-whatsapp" style="font-size: 16px;"></i> Already Shared </span>
                </div> -->
              </div>
              <div class="d-flex align-items-center">
                <i class="fa fa-circle" style="font-size: medium;color: #0B7AB2;"></i>
                <hr style="width: 20px;border: 1.5px solid #0B7AB2;"> <span
                  style="margin-inline: 3px;color: #0B7AB2;font-weight: 600;">
                  {{show_cnt?.mergedleads[0]?.relationship}} </span>
                <hr style="width: 30px;border: 1.5px solid #0B7AB2;">
                <i class="fa fa-play" style="font-size: large;color: #0B7AB2;"></i>
              </div>
              <div>
                <span class="profile"><i class="fa fa-user-circle"></i></span>
                <h2>{{show_cnt.mergedleads[0]?.mergedName}}</h2>
                <div>
                  <p class="mb-1 mail_num">
                    {{show_cnt.mergedleads[0]?.mergedMail}}
                  </p>
                  <p class="mail_num">
                    {{show_cnt.mergedleads[0]?.mergedNumber}}
                  </p>
                </div>
              </div>
            </div>

            <!-- if the merge array length >=2  -->
            <div class="d-flex justify-evenly col-12 p-0" *ngIf="show_cnt?.mergedleads?.length >= 2"
              [ngStyle]="{'align-items': show_cnt.mergedleads?.length == 2 ? 'center' : ''}">
              <div class="col-4 p-0">
                <span class="profile"><i class="fa fa-user-circle"></i></span>
                <h2>{{(show_cnt.enquiry_name?show_cnt.enquiry_name:show_cnt.customer_name)}} <span
                    *ngIf="show_cnt.enquiry_altname">/{{show_cnt.enquiry_altname}}</span>
                  <span class="editicon"><a data-toggle="modal" data-target="#edit_test"
                      (click)="getcustomerupdate(show_cnt.customer_IDPK)"><i class="far fa-edit"
                        style="color: red;"></i></a></span>
                </h2>
                <div class="d-flex flex-column justify-content-center align-items-center pb-1">
                  <span class="priority flex" *ngIf="show_cnt.lead_priority == '1'"><span
                      style="font-weight: 600;font-size: 14px;">HOT</span>&nbsp;<img
                      src="../../../assets/images/hot-icon.png"></span>
                  <span class="priority-warm flex" *ngIf="show_cnt.lead_priority == '2'"><span
                      style="font-weight: 600;font-size: 14px;">WARM</span>&nbsp;<img
                      src="../../../assets/images/warm-icon.png"></span>
                  <span class="priority-cold flex" *ngIf="show_cnt.lead_priority == '3'"><span
                      style="font-weight: 600;font-size: 14px;">COLD</span>&nbsp;<img
                      src="../../../assets/images/cold-clr-icon.png"></span>
                </div>
                <div>
                  <p class="mb-1 mail_num">
                    {{(show_cnt.enquiry_mail?show_cnt.enquiry_mail:show_cnt.customer_mail)}} <span
                      *ngIf="show_cnt.enquiry_altmail">/{{show_cnt.enquiry_altmail}}</span>
                  </p>
                  <p class="mail_num">
                    {{show_cnt.customer_number}} <span
                      *ngIf="show_cnt.enquiry_altnumber">/{{show_cnt.enquiry_altnumber}}</span>
                    <button class="btn btn-outline-warning" type="button" data-toggle="modal" data-target="#mergeModal"
                      style="padding: 0px 10px !important;border-radius: 15px !important;"><span
                        class="d-flex justify-content-center align-items-center gap-05"><span
                          style="font-size: medium;font-weight: 500;">Merge</span> <img
                          src="../../../../assets/images/merge-icon.svg" height="15px"></span></button>
                  </p>
                </div>
                <!-- <div class="pt-2">
                  <span class="share_details" (click)="sharePropertyDetails()" *ngIf="!isShared"><i
                      class="fab fa-whatsapp" style="font-size: 16px;"></i> Share Property Details</span>
                  <span class="already_shared" (click)="sharePropertyDetails()" *ngIf="isShared"><i
                      class="fab fa-whatsapp" style="font-size: 16px;"></i> Already Shared </span>
                </div> -->
              </div>

              <div class="col-8 p-0">
                <div class="col-12 row p-0 mb-0 d-flex gap-1 justify-content-center">
                  <div class="col-5  py-3 px-2 merged_lead_2" *ngFor="let merge of show_cnt?.mergedleads">
                    <h3 class="m-0">{{merge?.mergedName}}</h3>
                    <div>
                      <p class="mb-1 mail_num font-12"
                        style="overflow: hidden;white-space: normal;word-break: break-all;">
                        {{merge?.mergedMail}}
                      </p>
                      <p class="mail_num font-12">
                        {{merge?.mergedNumber}}
                      </p>
                    </div>
                    <div class="relation_ship_text">
                      {{merge?.relationship}}
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="pt-2">
              <p class="d-flex gap-1 justify-content-center">
                <img class="cursor-pointer" src="../../../../assets/images/call_btn_icon.png"
                  style="width: 30px;height: 30px;" [ngClass]="liveCallData ? 'blurred' : ''"
                  (click)="triggerCall(show_cnt)">
                <img class="cursor-pointer" src="../../../../assets/images/whats_btn_icon.png"
                  style="width: 30px;height: 30px;" [ngClass]="liveCallData ? 'blurred' : ''"
                  (click)="moveToWhatsapp(show_cnt)">
                <!-- <img class="cursor-pointer" src="../../../../assets/images/recordings_btn_icon.png"
                  *ngIf="assignedrm && (assignedrm[0]?.leadstage != 'Fresh' || (assignedrm[0]?.leadstage == 'Fresh' && assignedrm[0]?.followupreason == 8))"
                  style="width: 30px;height: 30px;" (click)="recordingList()"> -->
              </p>
            </div>

            <div class="row"
              *ngIf="(((roleid == 1 || roleid == 2) || (selectedExecId == userid && roleid != 1 && roleid != 2)) && (activestagestatus && activestagestatus[0].stage != 'Junk'))">
              <h4 class="col-12 d-flex justify-content-center" data-toggle="modal" data-target="#cssuggestproperties"
                *ngIf="propertyLength == 1">
                <strong>Suggest New Properties </strong><i class="bi bi-building-add"></i>
              </h4>
            </div>

            <!-- <div *ngIf="show_cnt.customer_source.indexOf('Walkin') == -1">
              <p class="mb-1 mail_num"
                *ngIf="show_cnt.registeredmail.toLowerCase() !== show_cnt.customer_mail.toLowerCase()">
                {{show_cnt.registeredmail}} / <span class="mainitemsspan">{{show_cnt.customer_mail}}</span>
              </p>
              <p class="mb-1 mail_num"
                *ngIf="show_cnt.registeredmail.toLowerCase() === show_cnt.customer_mail.toLowerCase()">
                {{show_cnt.registeredmail}}
              </p>
              <p class="mail_num" *ngIf="show_cnt.registerednumber != show_cnt.customer_number">
                {{show_cnt.registerednumber}} / <span class="mainitemsspan">{{show_cnt.customer_number}}</span>
              </p>
              <p class="mail_num" *ngIf="show_cnt.registerednumber == show_cnt.customer_number">
                {{show_cnt.registerednumber}}
              </p>
            </div> -->

            <div *ngIf="adminview" class="row source_div mt-2">
              <p *ngIf="show_cnt?.customer_source != 'Walkin'" class="col-12 text-left" style="position: absolute;">
                Existing</p>
              <p *ngIf="show_cnt?.customer_source == 'walkin'" class="col-12 text-left" style="position: absolute;">
                Fresh
                Visit</p>
              <p *ngIf="show_cnt?.customer_source != 'walkin'"
                class="col-12 d-flex justify-content-end gap-05 align-items-center">
                <!-- <i class="fas fa-info-circle" style="font-size: 18px;"></i>  -->
                <span class="leadrcvdtitle">Lead
                  Recieved - </span>{{show_cnt.datetime | date: 'dd-MMM-yyyy hh:mm: a'}}
              </p>
              <p *ngIf="show_cnt.customer_source == 'walkin'" class="col-12 text-right"><span
                  class="leadrcvdtitle">First Visited - </span>{{show_cnt.walkindate | date: 'dd-MMM-yyyy hh:mm: a'}}
              </p>
            </div>
            <hr class="m-0 mt-2" *ngIf="execview">
            <div class="clearfix"></div>
          </div>

          <!-- <div class="hi_profile text-center" *ngIf="!show_cnt_subarray?.length">
            <span class="profile"><i class="fa fa-user-circle"></i></span>
            <h2>{{show_cnt.customer_name}} <span *ngIf="show_cnt.enquiry_name">/{{show_cnt.enquiry_altname}}</span>
              <span class="editicon"><a data-toggle="modal" data-target="#edit_test"
                  (click)="getcustomerupdate(show_cnt.customer_IDPK)"><i class="far fa-edit"></i></a></span>
            </h2>
              <div class="d-flex flex-column justify-content-center align-items-center pb-1">
                <span class="priority flex" *ngIf="show_cnt.lead_priority == '1'"><span
                    style="font-weight: 600;font-size: 14px;">HOT</span>&nbsp;<img
                    src="../../../assets/images/hot-icon.png"></span>
                <span class="priority-warm flex" *ngIf="show_cnt.lead_priority == '2'"><span
                    style="font-weight: 600;font-size: 14px;">WARM</span>&nbsp;<img
                    src="../../../assets/images/warm-icon.png"></span>
                <span class="priority-cold flex" *ngIf="show_cnt.lead_priority == '3'"><span
                    style="font-weight: 600;font-size: 14px;">COLD</span>&nbsp;<img
                    src="../../../assets/images/cold-clr-icon.png"></span>
              </div>
            <div>
              <p class="mb-1 mail_num">
                {{show_cnt.customer_mail}} <span *ngIf="show_cnt.enquiry_mail">/{{show_cnt.enquiry_altmail}}</span>
              </p>
              <p class="mail_num">
                {{show_cnt.customer_number}} <span *ngIf="show_cnt.enquiry_number">/{{show_cnt.enquiry_altnumber}}</span>
              </p>
            </div>

            <div *ngIf="adminview" class="row source_div">
              <p class="col-12 text-left" style="position: absolute;">{{show_cnt.customer_source}}</p>
              <p class="col-12 text-right"><span class="leadrcvdtitle">Lead Recieved - </span>{{show_cnt.datetime |
                date: 'dd-MMM-yyyy hh:mm: a'}}</p>
            </div>
            <div class="clearfix"></div>
          </div> -->

        </div>
      </div>

      <div class="row">
        <div class="col-12 ml-1 mt-3">
          <div class="hi_info_details">

            <div class="row contact_no" *ngIf="adminview || roleid == '50013' || roleid == '50014'">
              <p class="col-4 hiInfosubtags"> Lead Source
                <span class="mail_num">{{show_cnt.customer_source}}</span>
              </p>
              <p class="col-4 hiInfosubtags">Enquired project
                <span class="mail_num" *ngIf=show_cnt.customer_properties>{{show_cnt.customer_properties}}</span>
                <span class="mail_num" *ngIf=!show_cnt.customer_properties>--</span>
              </p>
              <p class="col-4 hiInfosubtags">Preferred Location
                <span class="mail_num" *ngIf=show_cnt.enquiry_location>{{show_cnt.enquiry_location}}</span>
                <span class="mail_num" *ngIf=!show_cnt.enquiry_location>--</span>
              </p>
              <p class="col-4 hiInfosubtags">Property Type
                <span class="mail_num" *ngIf=leadPropertyType>{{leadPropertyType}}</span>
                <span class="mail_num" *ngIf=!leadPropertyType>--</span>
              </p>
              <p class="col-4 hiInfosubtags">Possession
                <span class="mail_num" *ngIf=leadPossession>{{leadPossession}}</span>
                <span class="mail_num" *ngIf=!leadPossession>--</span>
              </p>
              <p class="col-4 hiInfosubtags">Size
                <span class="mail_num" *ngIf=show_cnt.enquiry_bhksize>{{show_cnt.enquiry_bhksize}} BHK</span>
                <span class="mail_num" *ngIf=!show_cnt.enquiry_bhksize>--</span>
              </p>
              <p class="col-4 hiInfosubtags">Budget
                <span class="mail_num" *ngIf=show_cnt.enquiry_budget>{{show_cnt.enquiry_budget}}</span>
                <span class="mail_num" *ngIf=!show_cnt.enquiry_budget>--</span>
              </p>
              <p class="col-12 hiInfosubtags" *ngIf="closestObject?.length && closestObject[0]?.followup_status == '4'">
                <span style="color: #0B7AB2;font-size: 14px;font-weight: 400;"> Next Followup</span>
                <span class="mail_num"
                  style="color: #01496D;font-size: 16px;font-weight: 500;">{{closestObject[0]?.nextaction_date}}-{{closestObject[0]?.nextaction_time}}({{closestObject[0]?.Exec_name}})</span>
              </p>

              <p class="col-12 hiInfosubtags"
                *ngIf="closestObject?.length && closestObject[0]?.followup_status == null && closestObject[0]?.nextaction_date">
                <span style="color: #0B7AB2;font-size: 14px;font-weight: 400;">Next Action</span>
                <span class="mail_num"
                  style="color: #01496D;font-size: 16px;font-weight: 500;">{{closestObject[0]?.nextaction_date}}-{{closestObject[0]?.nextaction_time}}({{closestObject[0]?.Exec_name}})</span>
              </p>
            </div>

            <div class="row contact_no" *ngIf="execview && roleid != '50013' && roleid != '50014'">
              <!-- <p class="col-4 hiInfosubtags">Enquired project
                <span class="mail_num" *ngIf=show_cnt.customer_properties>{{show_cnt.customer_properties}}</span>
                <span class="mail_num" *ngIf=!show_cnt.customer_properties>--</span>
              </p> -->
              <p class="col-4 hiInfosubtags">Preferred Location
                <span class="mail_num" *ngIf=show_cnt.enquiry_location>{{show_cnt.enquiry_location}}</span>
                <span class="mail_num" *ngIf=!show_cnt.enquiry_location>--</span>
              </p>
              <p class="col-4 hiInfosubtags">Property Type
                <span class="mail_num" *ngIf=leadPropertyType>{{leadPropertyType}}</span>
                <span class="mail_num" *ngIf=!leadPropertyType>--</span>
              </p>
              <p class="col-4 hiInfosubtags">Possession
                <span class="mail_num" *ngIf=leadPossession>{{leadPossession}}</span>
                <span class="mail_num" *ngIf=!leadPossession>--</span>
              </p>
              <p class="col-4 hiInfosubtags">Size
                <span class="mail_num" *ngIf=show_cnt.enquiry_bhksize>{{show_cnt.enquiry_bhksize}} BHK</span>
                <span class="mail_num" *ngIf=!show_cnt.enquiry_bhksize>--</span>
              </p>
              <p class="col-4 hiInfosubtags">Budget
                <span class="mail_num" *ngIf=show_cnt.enquiry_budget>{{show_cnt.enquiry_budget}}</span>
                <span class="mail_num" *ngIf=!show_cnt.enquiry_budget>--</span>
              </p>
              <p class="col-4 hiInfosubtags" *ngFor="let suggested of rm?.suggestedprop | slice: 0: 1">
                <span *ngIf="suggested.followup == '4'"></span> Next Followup
                <span class="mail_num">{{suggested?.followupdate | date: 'dd-MMM-yyyy'}}
                  {{suggested?.followuptime}}</span>
              </p>
            </div>

            <div class="source_web" *ngIf="execview">
              <div class="row">
                <div class="execnav-scrollable" style="padding-block: 0.5rem;">
                  <ul class="execnav execnav-tabs col-12">
                    <li class="exec-item" *ngFor=" let exec of leadsDetailsInfo;let i = index;">
                      <a class="exec-link" [class.active]="i == activeTabIndex" (click)="getexecutiveId(exec)"
                        *ngIf="(((exec.leadstage != 'Fresh' || (exec.leadstage == 'Fresh' && exec.followupreason == 8)) || exec.RMID == this.userid) || role_type == 1)"
                        [style.color]="exec?.suggestedprop && exec.suggestedprop[0]?.currentstage === '5' ? '#004F00' : ''">{{exec.RMID
                        == userid ? 'Self' : exec.customer_assign_name}}&nbsp;
                        <img src="../../../../assets/images/indicatorfordealclosereq.png"
                          *ngIf="exec?.suggestedprop && exec.suggestedprop[0]?.currentstage == '5'"
                          style="position: relative;bottom: 2px;">
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="col-12 pt-3" *ngFor="let rm of assignedrm">
                  <div *ngFor="let suggested of rm.suggestedprop;">
                    <!-- 1 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color:#FFF4E2;"
                      *ngIf="suggested.actions == '0' && suggested.selection == '0' && suggested.currentstage == '0' || suggested.leadstage == 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-8 dis-flexcol py-2">
                        <!-- <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
						  <div>Registered Source :  <span class="mail_num"
							*ngIf="rm.regsource != 'Channel Partners-Walkin'"><p class="font-weight-bold">{{rm.regsource}}</p></span>
						  <span class="mail_num"
							*ngIf="rm.regsource == 'Channel Partners-Walkin'"><p class="font-weight-bold">{{rm.regcpname}}</p></span></div>
						  <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
						  <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div> -->
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Assigned To : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Assigned On : <span class="font-weight-medium">{{rm.assigneddate | date: 'dd-MMM-yyyy
                            hh:mm: a'}}</span></div>
                        <div>Status : <span>Not Visited</span>&nbsp;<i style="color:#242323;"
                            class="bi bi-emoji-frown"></i></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>Followup fixed on :{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                      </div>
                      <div class="col-4 dis-flexcol pt-2 pr-0 d-flex flex-column justify-content-end">
                        <!-- <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm: a'}}</span></div>
						  <div>Stage : <span class="font-weight-bold">{{rm.leadstage}}</span></div>
						  <div>Assigned To : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
						  <div>Status : <span>Not Visited</span>&nbsp;<i style="color:#242323;"
							class="bi bi-emoji-frown"></i></div> -->

                        <!-- <div class="propdiv" *ngIf="suggested.name"><span
                            class="propnameclass font-weight-bold">{{suggested.name}}</span></div> -->
                      </div>
                    </div>
                    <!-- 2 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.selection == '1' && suggested.stagestatus == '1' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2 pr-0" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Assigned To : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status : <span>USV Fixed On <br />{{suggested.nextdate | date: 'dd-MMM-yyyy'}} -
                            {{suggested.nexttime }} <i style="color:rgb(34, 33, 33)"
                              class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 3 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important;background-color: #b6ebb0;"
                      *ngIf="suggested.selection == '1' && suggested.stagestatus == '2' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Assigned To : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status : <span>USV Refixed On <br />{{ suggested.nextdate | date: 'dd-MMM-yyyy'}} -
                            {{ suggested.nexttime}} <i class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 4 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '1' && suggested.selection == '0' && suggested.currentstage == '1' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Accompanied by : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status : <span> USV Done (Interested Client <i class="bi bi-emoji-heart-eyes"></i>)</span>
                        </div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 5 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '2' && suggested.selection == '0' && suggested.currentstage == '1'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Assigned To : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span> USV Cancelled &nbsp;<i class="bi bi-emoji-angry"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 6 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '1'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Accompanied by : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span> USV Done( Not Interested Client<i class="bi bi-emoji-frown"></i>)</span>
                        </div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 7 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '0' && suggested.selection == '1' && suggested.stagestatus == '3' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Accompanied by : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status:<span> USV Done (Status Not Updated <i class="bi bi-emoji-frown"></i>)</span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 8 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.selection == '2' && suggested.stagestatus == '1' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Assigned To : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status : <span> RSV Fixed On <br />{{suggested.nextdate | date: 'dd-MMM-yyyy'}} -
                            {{suggested.nexttime}} <i class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 9 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.selection == '2' && suggested.stagestatus == '2'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Assigned To : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status : <span> RSV Refixed On <br />{{suggested.nextdate | date: 'dd-MMM-yyyy'}} -
                            {{suggested.nexttime}} <i class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 10 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '1' && suggested.selection == '0' && suggested.currentstage == '3' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Accompanied by : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status :<span> RSV Done (Interested Client <i class="bi bi-emoji-heart-eyes"></i>)</span>
                        </div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 11 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '5' && suggested.selection == '0' && suggested.currentstage == '3'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Assigned To : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status : <span> RSV Cancelled <i class="bi bi-emoji-angry"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 12 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '3'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Accompanied by : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span> RSV Done (Not Interested Client <i class="bi bi-emoji-frown"></i>)</span>
                        </div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 13 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="(suggested.actions == '1' || suggested.actions == '0') && suggested.selection == '2' && suggested.stagestatus == '3'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Accompanied by : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span> RSV Done (Visit Status Not Updated <i class="bi bi-emoji-frown"></i>)</span>
                        </div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 14 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.selection == '3' && suggested.stagestatus == '1'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Assigned To : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status :<span> Negotiation Fixed <br />{{suggested.nextdate | date: 'dd-MMM-yyyy'}} -
                            {{suggested.nexttime}} <i class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 15 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.selection == '3' && suggested.stagestatus == '2'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Assigned To : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status :<span> Negotiation Refixed <br />{{suggested.nextdate | date: 'dd-MMM-yyyy'}} -
                            {{suggested.nexttime}} <i class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 16 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '4' && suggested.selection == '0' && suggested.currentstage == '4' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Accompanied by : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status :<span> Negotiation Done (Interested Client <i
                              class="bi bi-emoji-heart-eyes"></i>)</span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 17 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '2' && suggested.selection == '0' && suggested.currentstage == '4'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Assigned To : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span> Negotiation Cancelled <i class="bi bi-emoji-angry"></i></span></div>
                      </div>
                      <!-- <div class="propdiv"><span class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 18 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '4' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Accompanied by : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status :<span> Negotiation Done (Not Interested
                            Client <i class="bi bi-emoji-frown"></i>)</span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 19 -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '0' && suggested.selection == '3' && suggested.stagestatus == '3'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Accompanied by : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span> Negotiation Done (Visit Status Not Updated <i
                              class="bi bi-emoji-frown"></i></span>)</div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 20 Request for deal closure -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '7' && suggested.currentstage == '5'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Accompanied by : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span style="color: green;">Requested For Deal Closure <i
                              class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 21 deal closed sucesfully  -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '6' && suggested.currentstage == '5'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Accompanied by : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status : <span class="font-weight-bold" style="color: green;">Deal Successfully Closed <i
                              class="bi bi-emoji-heart-eyes"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 22 Rejection request  -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '8' && suggested.currentstage == '5'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div *ngIf="role_type == '1'">Accompanied by : <span
                            class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span style="color: red;"> Rejected - Waiting for Response <i
                              class="bi bi-emoji-angry"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- lead junk  -->
                    <div class="row col-12 mt-1 pr-0" [ngClass]="rm.suggestedprop?.length > 1 ? 'margin-top-2' : ''"
                      style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '3' && suggested.selection == '0' && (suggested.currentstage == '0' || suggested.currentstage == null) && suggested.leadstage != 'Junk' && roleid != 1 && roleid != 2">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                Registered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <!-- <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div> -->
                        <div>Status :<span> Lead Pushed to Junk<i class="bi bi-emoji-frown"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- <div class="row source_web" *ngIf="execview">
              <div class="col-12 p-0" *ngFor="let rm of assignedrm">
                <table class="table table-bordered" *ngFor="let suggested of rm.suggestedprop;">
                  <thead class="">
                    <tr class="text-center thead-light">
                      <th colspan="2">
                        <span class="float-left p-2">{{suggested.name}}</span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '0' && suggested.selection == '0' && suggested.currentstage == '0'"
                          style="background: red;">Not Visited <i style="font-size: 23px;"
                            class="bi bi-emoji-frown"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.selection == '1' && suggested.stagestatus == '1'"
                          style="background: green;"><span>USV Fixed On </span>{{suggested.nextdate}} -
                          {{suggested.nexttime}} <i style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.selection == '1' && suggested.stagestatus == '2'"
                          style="background: green;"><span>USV Refixed On </span>{{suggested.nextdate}} -
                          {{suggested.nexttime}} <i style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '1' && suggested.selection == '0' && suggested.currentstage == '1'"
                          style="background: green;"><span> USV Done </span> Interested Client <i
                            style="font-size: 23px;" class="bi bi-emoji-heart-eyes"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '2' && suggested.selection == '0' && suggested.currentstage == '1'"
                          style="background: red;"><span> USV Cancelled </span><i style="font-size: 23px;"
                            class="bi bi-emoji-angry"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '1'"
                          style="background: rgb(255, 187, 0);"><span> USV Done </span> Not Interested Client<i
                            style="font-size: 23px;" class="bi bi-emoji-frown"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '0' && suggested.selection == '1' && suggested.stagestatus == '3'"
                          style="background: red;"><span> USV Done </span> Visit Status Not Updated <i
                            style="font-size: 23px;" class="bi bi-emoji-frown"></i></span>

                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.selection == '2' && suggested.stagestatus == '1'"
                          style="background: green;"><span> RSV Fixed On </span>{{suggested.nextdate}} -
                          {{suggested.nexttime}} <i style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.selection == '2' && suggested.stagestatus == '2'"
                          style="background: green;"><span> RSV Refixed On </span>{{suggested.nextdate}} -
                          {{suggested.nexttime}} <i style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '1' && suggested.selection == '0' && suggested.currentstage == '3'"
                          style="background: green;"><span> RSV Done </span> Interested Client <i
                            style="font-size: 23px;" class="bi bi-emoji-heart-eyes"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '5' && suggested.selection == '0' && suggested.currentstage == '3'"
                          style="background: red;"><span> RSV Cancelled </span><i style="font-size: 23px;"
                            class="bi bi-emoji-angry"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '3'"
                          style="background: rgb(255, 187, 0);"><span> RSV Done </span> Not Interested Client <i
                            style="font-size: 23px;" class="bi bi-emoji-frown"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '1' && suggested.selection == '2' && suggested.stagestatus == '3'"
                          style="background: red;"><span> RSV Done </span> Visit Status Not Updated <i
                            style="font-size: 23px;" class="bi bi-emoji-frown"></i></span>

                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.selection == '3' && suggested.stagestatus == '1'"
                          style="background: green;"><span> Negotiation Fixed </span>{{suggested.nextdate}} -
                          {{suggested.nexttime}} <i style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.selection == '3' && suggested.stagestatus == '2'"
                          style="background: green;"><span> Negotiation Refixed </span>{{suggested.nextdate}} -
                          {{suggested.nexttime}} <i style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '4' && suggested.selection == '0' && suggested.currentstage == '4'"
                          style="background: green;"><span> Negotiation Done </span> Interested Client <i
                            style="font-size: 23px;" class="bi bi-emoji-heart-eyes"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '2' && suggested.selection == '0' && suggested.currentstage == '4'"
                          style="background: red;"><span> Negotiation Cancelled </span><i style="font-size: 23px;"
                            class="bi bi-emoji-angry"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '4'"
                          style="background: rgb(255, 187, 0);"><span> Negotiation Done </span> Not Interested Client <i
                            style="font-size: 23px;" class="bi bi-emoji-frown"></i></span>
                        <span class="float-right leadstatusspan_exec"
                          *ngIf="suggested.actions == '4' && suggested.selection == '3' && suggested.stagestatus == '3'"
                          style="background: red;"><span> Negotiation Done </span> Visit Status Not Updated <i
                            style="font-size: 23px;" class="bi bi-emoji-frown"></i></span>

                        <span *ngIf="suggested.actions == '7' && suggested.currentstage == '5'">
                          <a class="leadstatusspan_exec" style="background: green;text-decoration: underline;"
                            *ngIf="adminview" href=""
                            (click)="verifyrequest(rm.customer_IDPK,suggested.propid,rm.RMID,suggested.name)"
                            data-toggle="modal" data-target="#dealcloserequest">Requested For Deal Closure <i
                              style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></a>
                          <a class="leadstatusspan_exec" style="background: green;text-decoration: underline;"
                            *ngIf="execview">Deal Closure Pending <i style="font-size: 23px;"
                              class="bi bi-emoji-sunglasses"></i></a>
                        </span>
                        <span *ngIf="suggested.actions == '6' && suggested.currentstage == '5'">
                          <a class="leadstatusspan_exec" style="background: green;text-decoration: underline;"
                            *ngIf="adminview" href=""
                            (click)="verifyrequest(rm.customer_IDPK,suggested.propid,rm.RMID,suggested.name)"
                            data-toggle="modal" data-target="#closeddeal">Deal Successfully Closed <i
                              style="font-size: 23px;" class="bi bi-emoji-heart-eyes"></i></a>
                          <a class="leadstatusspan_exec" style="background: green;" *ngIf="execview" href=""
                            (click)="verifyrequest(rm.customer_IDPK,suggested.propid,rm.RMID,suggested.name)"
                            data-toggle="modal" data-target="#closeddeal">Deal Closed <i style="font-size: 23px;"
                              class="bi bi-emoji-heart-eyes"></i></a>
                        </span>
                        <span *ngIf="suggested.actions == '8' && suggested.currentstage == '5'">
                          <a class="leadstatusspan_exec" style="background: red;text-decoration: underline;"
                            *ngIf="adminview" href=""
                            (click)="verifyrequest(rm.customer_IDPK,suggested.propid,rm.RMID,suggested.name)"
                            data-toggle="modal" data-target="#rejectdetails">Rejected - Waiting for Response <i
                              style="font-size: 23px;" class="bi bi-emoji-angry"></i></a>
                          <a class="leadstatusspan_exec" style="background: red;text-decoration: underline;"
                            *ngIf="execview" href=""
                            (click)="verifyrequest(rm.customer_IDPK,suggested.propid,rm.RMID,suggested.name)"
                            data-toggle="modal" data-target="#bookingreeditform">Request Rejected <i
                              style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></a>
                        </span>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="2">
                        <div class="row contact_no">
                          <p class="col-4 hiInfosubtags"> Registered Name
                            <span class="mail_num">{{rm.regname}}</span>
                          </p>
                          <p class="col-4 hiInfosubtags"> Registered Source
                            <span class="mail_num"
                              *ngIf="rm.regsource != 'Channel Partners-Walkin'">{{rm.regsource}}</span>
                            <span class="mail_num"
                              *ngIf="rm.regsource == 'Channel Partners-Walkin'">{{rm.regcpname}}</span>
                          </p>
                          <p class="col-4 hiInfosubtags">Bedroom
                            <span class="mail_num">{{rm.regbhk}} BHK</span>
                          </p>
                          <p class="col-4 hiInfosubtags">Budget
                            <span class="mail_num">{{rm.budget}}</span>
                          </p>
                          <p class="col-4 hiInfosubtags">Walkin Time
                            <span class="mail_num">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm: a'}}</span>
                          </p>
                          <p class="col-4 hiInfosubtags" *ngIf="suggested.followup == '4'">Next Followup
                            <span class="mail_num">{{suggested.followupdate | date: 'dd-MMM-yyyy'}}
                              {{suggested.followuptime}}</span>
                          </p>
                        </div>
                      </td>
                    </tr>

                  </tbody>
                </table>
              </div>
            </div> -->


            <!-- <div class="row source_web" *ngIf="adminview">
              <div class="col-6" *ngFor="let rm of assignedrm">
                <table class="table table-bordered" *ngFor="let suggested of rm.suggestedprop;">
                  <thead class="">
                    <tr class="text-center thead-light">
                      <th colspan="2">{{suggested.name}}</th>
                    </tr>
                  </thead>
                  <tbody *ngIf="rm.suggestedprop.length !== 0">
                    <tr>
                      <td *ngIf="rm.regname">
                        <p class="spacing_p"><span class="spantitle">Registered Name :</span> <span
                            class="mail_num">{{rm.regname}}</span></p>
                        <p class="spacing_p"><span class="spantitle">Registered Source :</span>
                          <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">{{rm.regsource}}</span>
                          <span class="mail_num"
                            *ngIf="rm.regsource == 'Channel Partners-Walkin'">{{rm.regcpname}}</span>
                        </p>
                        <p class="spacing_p"><span class="spantitle">Bedroom :</span> <span
                            class="mail_num">{{rm.regbhk}} BHK</span></p>
                        <p class="spacing_p"><span class="spantitle">Budget :</span> <span
                            class="mail_num">{{rm.budget}}</span></p>
                        <p class="spacing_p"><span class="spantitle">Walkin Time :</span> <span
                            class="mail_num">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm: a'}}</span></p>
                        <p class="spacing_p"><span class="spantitle">Accompanied by :</span> <span
                            class="mail_num">{{rm.accompany}}</span></p>
                        <p class="spacing_p" *ngIf="suggested.followup == '4'"><span class="spantitle">Next Followup
                            :</span> <span class="mail_num">{{suggested.followupdate | date: 'dd-MMM-yyyy'}}
                            {{suggested.followuptime}}</span></p>
                      </td>              
                    </tr>

                    <div>
                      <span class="leadstatusspan text-center"
                        *ngIf="suggested.actions == '0' && suggested.selection == '0' && suggested.currentstage == '0'"
                        style="background: red;">Not Visited <i style="font-size: 23px;"
                          class="bi bi-emoji-frown"></i></span>
                      <span class="leadstatusspan" *ngIf="suggested.selection == '1' && suggested.stagestatus == '1'"
                        style="background: green;"><span>USV Fixed On </span><br />{{suggested.nextdate}} -
                        {{suggested.nexttime}} <i style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></span>
                      <span class="leadstatusspan" *ngIf="suggested.selection == '1' && suggested.stagestatus == '2'"
                        style="background: green;"><span>USV Refixed On </span><br />{{suggested.nextdate}} -
                        {{suggested.nexttime}} <i style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></span>
                      <span class="leadstatusspan"
                        *ngIf="suggested.actions == '1' && suggested.selection == '0' && suggested.currentstage == '1'"
                        style="background: green;"><span> USV Done </span><br /> Interested Client <i
                          style="font-size: 23px;" class="bi bi-emoji-heart-eyes"></i></span>
                      <span class="leadstatusspan"
                        *ngIf="suggested.actions == '2' && suggested.selection == '0' && suggested.currentstage == '1'"
                        style="background: red;"><span> USV Cancelled </span><br /><i style="font-size: 23px;"
                          class="bi bi-emoji-angry"></i></span>
                      <span class="leadstatusspan"
                        *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '1'"
                        style="background: rgb(255, 187, 0);"><span> USV Done </span><br /> Not Interested Client<i
                          style="font-size: 23px;" class="bi bi-emoji-frown"></i></span>
                      <span class="leadstatusspan"
                        *ngIf="suggested.actions == '0' && suggested.selection == '1' && suggested.stagestatus == '3'"
                        style="background: red;"><span> USV Done </span><br /> Visit Status Not Updated <i
                          style="font-size: 23px;" class="bi bi-emoji-frown"></i></span>

                      <span class="leadstatusspan" *ngIf="suggested.selection == '2' && suggested.stagestatus == '1'"
                        style="background: green;"><span> RSV Fixed On </span><br />{{suggested.nextdate}} -
                        {{suggested.nexttime}} <i style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></span>
                      <span class="leadstatusspan" *ngIf="suggested.selection == '2' && suggested.stagestatus == '2'"
                        style="background: green;"><span> RSV Refixed On </span><br />{{suggested.nextdate}} -
                        {{suggested.nexttime}} <i style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></span>
                      <span class="leadstatusspan"
                        *ngIf="suggested.actions == '1' && suggested.selection == '0' && suggested.currentstage == '3'"
                        style="background: green;"><span> RSV Done </span><br /> Interested Client <i
                          style="font-size: 23px;" class="bi bi-emoji-heart-eyes"></i></span>
                      <span class="leadstatusspan"
                        *ngIf="suggested.actions == '5' && suggested.selection == '0' && suggested.currentstage == '3'"
                        style="background: red;"><span> RSV Cancelled </span><br /><i style="font-size: 23px;"
                          class="bi bi-emoji-angry"></i></span>
                      <span class="leadstatusspan"
                        *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '3'"
                        style="background: rgb(255, 187, 0);"><span> RSV Done </span><br /> Not Interested Client <i
                          style="font-size: 23px;" class="bi bi-emoji-frown"></i></span>
                      <span class="leadstatusspan"
                        *ngIf="suggested.actions == '1' && suggested.selection == '2' && suggested.stagestatus == '3'"
                        style="background: red;"><span> RSV Done </span><br /> Visit Status Not Updated <i
                          style="font-size: 23px;" class="bi bi-emoji-frown"></i></span>

                      <span class="leadstatusspan" *ngIf="suggested.selection == '3' && suggested.stagestatus == '1'"
                        style="background: green;"><span> Negotiation Fixed </span><br />{{suggested.nextdate}} -
                        {{suggested.nexttime}} <i style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></span>
                      <span class="leadstatusspan" *ngIf="suggested.selection == '3' && suggested.stagestatus == '2'"
                        style="background: green;"><span> Negotiation Refixed </span><br />{{suggested.nextdate}} -
                        {{suggested.nexttime}} <i style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></span>
                      <span class="leadstatusspan"
                        *ngIf="suggested.actions == '4' && suggested.selection == '0' && suggested.currentstage == '4'"
                        style="background: green;"><span> Negotiation Done </span><br /> Interested Client <i
                          style="font-size: 23px;" class="bi bi-emoji-heart-eyes"></i></span>
                      <span class="leadstatusspan"
                        *ngIf="suggested.actions == '2' && suggested.selection == '0' && suggested.currentstage == '4'"
                        style="background: red;"><span> Negotiation Cancelled </span><br /><i style="font-size: 23px;"
                          class="bi bi-emoji-angry"></i></span>
                      <span class="leadstatusspan"
                        *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '4'"
                        style="background: rgb(255, 187, 0);"><span> Negotiation Done </span><br /> Not Interested
                        Client <i style="font-size: 23px;" class="bi bi-emoji-frown"></i></span>
                      <span class="leadstatusspan"
                        *ngIf="suggested.actions == '4' && suggested.selection == '3' && suggested.stagestatus == '3'"
                        style="background: red;"><span> Negotiation Done </span><br /> Visit Status Not Updated <i
                          style="font-size: 23px;" class="bi bi-emoji-frown"></i></span>
                    </div>

                    <span *ngIf="suggested.actions == '7' && suggested.currentstage == '5'">
                      <a class="leadstatusspan" style="background: green;text-decoration: underline;" *ngIf="adminview"
                        href="" (click)="verifyrequest(rm.customer_IDPK,suggested.propid,rm.RMID,suggested.name)"
                        data-toggle="modal" data-target="#dealcloserequest">Requested For Deal Closure <i
                          style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></a>
                      <a class="leadstatusspan" style="background: green;text-decoration: underline;"
                        *ngIf="execview">Deal Closure Pending <i style="font-size: 23px;"
                          class="bi bi-emoji-sunglasses"></i></a>
                    </span>
                    <span *ngIf="suggested.actions == '6' && suggested.currentstage == '5'">
                      <a class="leadstatusspan" style="background: green;text-decoration: underline;" *ngIf="adminview"
                        href="" (click)="verifyrequest(rm.customer_IDPK,suggested.propid,rm.RMID,suggested.name)"
                        data-toggle="modal" data-target="#closeddeal">Deal Successfully Closed <i
                          style="font-size: 23px;" class="bi bi-emoji-heart-eyes"></i></a>
                      <a class="leadstatusspan" style="background: green;" *ngIf="execview" href=""
                        (click)="verifyrequest(rm.customer_IDPK,suggested.propid,rm.RMID,suggested.name)"
                        data-toggle="modal" data-target="#closeddeal">Deal Closed <i style="font-size: 23px;"
                          class="bi bi-emoji-heart-eyes"></i></a>
                    </span>
                    <span *ngIf="suggested.actions == '8' && suggested.currentstage == '5'">
                      <a class="leadstatusspan" style="background: red;text-decoration: underline;" *ngIf="adminview"
                        href="" (click)="verifyrequest(rm.customer_IDPK,suggested.propid,rm.RMID,suggested.name)"
                        data-toggle="modal" data-target="#rejectdetails">Rejected - Waiting for Response <i
                          style="font-size: 23px;" class="bi bi-emoji-angry"></i></a>
                      <a class="leadstatusspan" style="background: red;text-decoration: underline;" *ngIf="execview"
                        href="" (click)="verifyrequest(rm.customer_IDPK,suggested.propid,rm.RMID,suggested.name)"
                        data-toggle="modal" data-target="#bookingreeditform">Request Rejected <i
                          style="font-size: 23px;" class="bi bi-emoji-sunglasses"></i></a>
                    </span>

                  </tbody>
                  <tbody *ngIf="rm.suggestedprop.length == 0">
                    <tr class="text-center">
                      <td colspan="2">
                        <span style="color: red;">
                          No Properties Suggested Till Now
                        </span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div> -->

            <div class="source_web" *ngIf="adminview">
              <div class="row" style="margin-right:-10px;">
                <div class="execnav-scrollable" style="padding-block: 0.5rem;">
                  <ul class="execnav execnav-tabs col-12">
                    <li class="exec-item" *ngFor=" let exec of leadsDetailsInfo;let i = index;">
                      <a class="exec-link" [class.active]="i == activeTabIndex" (click)="getexecutiveId(exec)"
                        [style.color]="exec?.suggestedprop && exec.suggestedprop[0]?.currentstage === '5' ? '#004F00' : ''">{{exec.customer_assign_name}}&nbsp;
                        <img src="../../../../assets/images/indicatorfordealclosereq.png"
                          *ngIf="exec?.suggestedprop && exec.suggestedprop[0]?.currentstage == '5'"
                          style="position: relative;bottom: 2px;">
                        <span class="pl-1" *ngIf="exec.rnrcount >= 5" (click)="revertToActive(exec)"><i
                            class="fas fa-exclamation-circle" style="color: #f01616;font-size: 18px;"></i></span>
                      </a>
                    </li>
                  </ul>
                </div>
                <div class="col-12 relative" *ngFor="let rm of assignedrm">
                  <span *ngIf="rm.rnrcount >= 5" style="position: absolute;top: 50%;right: 50%;z-index: 999;"><button
                      type="button" class="btn btn-warning" (click)="revertToActive(rm)">Active Now</button></span>
                  <div *ngFor="let suggested of rm.suggestedprop;" [ngClass]="rm.rnrcount >= 5 ? 'blurred' : ''">
                    <!-- 1 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color:#FFF4E2;"
                      *ngIf="suggested.actions == '0' && suggested.selection == '0' && suggested.currentstage == '0' || suggested.leadstage == 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-8 dis-flexcol py-2">
                        <!-- <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                      <div>Registered Source :  <span class="mail_num"
                        *ngIf="rm.regsource != 'Channel Partners-Walkin'"><p class="font-weight-bold">{{rm.regsource}}</p></span>
                      <span class="mail_num"
                        *ngIf="rm.regsource == 'Channel Partners-Walkin'"><p class="font-weight-bold">{{rm.regcpname}}</p></span></div>
                      <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                      <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div> -->
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Assigned To : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Assigned On : <span class="font-weight-medium">{{rm.assigneddate | date: 'dd-MMM-yyyy
                            hh:mm: a'}}</span></div>
                        <div>Status : <span>Not Visited</span>&nbsp;<i style="color:#242323;"
                            class="bi bi-emoji-frown"></i></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on
                            :{{suggested.followupdate | date: 'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                      </div>
                      <div class="col-4 dis-flexcol pt-2 pr-0 d-flex flex-column justify-content-end">
                        <!-- <div class="propdiv" *ngIf="suggested.name"><span
                            class="propnameclass font-weight-bold">{{suggested.name}}</span></div> -->
                      </div>
                    </div>
                    <!-- 2 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.selection == '1' && suggested.stagestatus == '1' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class=" dis-flexcol pt-2 pr-0" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Assigned To : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status : <span>USV Fixed On <br />{{suggested.nextdate | date: 'dd-MMM-yyyy'}} -
                            {{suggested.nexttime }} <i style="color:rgb(37, 37, 37)"
                              class="bi bi-emoji-sunglasses"></i></span>
                        </div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span></div> -->
                    </div>
                    <!-- 3 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important;background-color: #b6ebb0;"
                      *ngIf="suggested.selection == '1' && suggested.stagestatus == '2' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Assigned To : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status : <span>USV Refixed On <br />{{ suggested.nextdate | date: 'dd-MMM-yyyy'}} -
                            {{ suggested.nexttime}} <i class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span></div> -->
                    </div>
                    <!-- 4 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '1' && suggested.selection == '0' && suggested.currentstage == '1' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2 " *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on
                            :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status : <span> USV Done <br>(Interested Client <i
                              class="bi bi-emoji-heart-eyes"></i>)</span>
                        </div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 5 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '2' && suggested.selection == '0' && suggested.currentstage == '1' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Assigned To : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span> USV Cancelled &nbsp;<i class="bi bi-emoji-angry"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 6 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '1' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <!-- <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on
                            :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}</div> -->
                        <div>Status :<span> USV Done <br>( Not Interested Client<i
                              class="bi bi-emoji-frown"></i>)</span>
                        </div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span></div> -->
                    </div>
                    <!-- 7 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '0' && suggested.selection == '1' && suggested.stagestatus == '3' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <!-- <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on
                            :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}</div> -->
                        <div>Status:<span> USV Done <br>(Status Not Updated <i class="bi bi-emoji-frown"></i>)</span>
                        </div>
                        <!-- <div class="propdiv"><span class="propnameclass font-weight-bold">{{suggested.name}}</span>
                        </div> -->
                      </div>
                    </div>
                    <!-- 8 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.selection == '2' && suggested.stagestatus == '1' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Assigned To : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on
                            :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status : <span> RSV Fixed On <br />{{suggested.nextdate | date: 'dd-MMM-yyyy'}} -
                            {{suggested.nexttime}} <i class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 9 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.selection == '2' && suggested.stagestatus == '2' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Assigned To : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status : <span> RSV Refixed On <br />{{suggested.nextdate | date: 'dd-MMM-yyyy'}} -
                            {{suggested.nexttime}} <i class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 10 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '1' && suggested.selection == '0' && suggested.currentstage == '3'&& suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on
                            :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status :<span> RSV Done <br>(Interested Client <i
                              class="bi bi-emoji-heart-eyes"></i>)</span>
                        </div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 11 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '5' && suggested.selection == '0' && suggested.currentstage == '3' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Assigned To : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status : <span> RSV Cancelled <i class="bi bi-emoji-angry"></i></span></div>
                      </div>
                      <!-- <div class="propdiv"><span class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 12 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '3' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on
                            :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status :<span> RSV Done <br>(Not Interested Client <i
                              class="bi bi-emoji-frown"></i>)</span>
                        </div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 13 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="(suggested.actions == '1' || suggested.actions == '0') && suggested.selection == '2' && suggested.stagestatus == '3' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span> RSV Done <br>(Visit Status Not Updated <i
                              class="bi bi-emoji-frown"></i>)</span>
                        </div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 14 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.selection == '3' && suggested.stagestatus == '1' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Assigned To : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <!-- <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on
                            :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}</div> -->
                        <div>Status :<span> Negotiation Fixed <br />{{suggested.nextdate | date: 'dd-MMM-yyyy'}} -
                            {{suggested.nexttime}} <i class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 15 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.selection == '3' && suggested.stagestatus == '2' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                              </a>
                              <span style="color: #006C00;"
                                *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'">AlreadyRegistered</span>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Assigned To : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span> Negotiation Refixed <br />{{suggested.nextdate | date: 'dd-MMM-yyyy'}} -
                            {{suggested.nexttime}} <i class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 16 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '4' && suggested.selection == '0' && suggested.currentstage == '4' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on
                            :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status :<span> Negotiation Done <br>(Interested Client <i
                              class="bi bi-emoji-heart-eyes"></i>)</span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 17 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '2' && suggested.selection == '0' && suggested.currentstage == '4'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Assigned To : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span> Negotiation Cancelled <i class="bi bi-emoji-angry"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 18 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '4' && suggested.leadstage != 'Fresh'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div *ngIf="suggested.followup == '4' && suggested.followupdate != null">Next Action :
                          <span>followup fixed on
                            :<br />{{suggested.followupdate | date:
                            'dd-MMM-yyyy'}}</span>&nbsp;{{suggested.followuptime}}
                        </div>
                        <div>Status :<span> Negotiation Done <br>(Not Interested
                            Client <i class="bi bi-emoji-frown"></i>)</span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 19 -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '0' && suggested.selection == '3' && suggested.stagestatus == '3'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span> Negotiation Done <br>(Visit Status Not Updated <i
                              class="bi bi-emoji-frown"></i></span>)</div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 20 Request for deal closure -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '7' && suggested.currentstage == '5'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span style="color: green;">Requested For Deal Closure <i
                              class="bi bi-emoji-sunglasses"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 21 deal closed sucesfully  -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '6' && suggested.currentstage == '5'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold" style="color: green;">Deal Successfully
                            Closed <i class="bi bi-emoji-heart-eyes"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- 22 Rejection request  -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #b6ebb0;"
                      *ngIf="suggested.actions == '8' && suggested.currentstage == '5'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span style="color: red;"> Rejected - <br>Waiting for Response <i
                              class="bi bi-emoji-angry"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                    <!-- lead junk  -->
                    <div class="row col-12 mt-4 pr-0" style="margin-left: -8px !important; background-color: #e07979;"
                      *ngIf="suggested.actions == '3' && suggested.selection == '0' && suggested.currentstage == '0'">
                      <div class="col-12 p-0 register_now">
                        <span class="reg_common">
                          <span *ngIf="suggested.registered?.length">
                            <span *ngFor="let register of suggested.registered;">
                              <a href="#" data-toggle="modal" data-target="#registration">
                                <span style="color: red;font-weight: 500"
                                  *ngIf="isDateOver30Days(register.registered_date)"
                                  (click)="fetchmails(suggested.name,suggested.propid)">Expired - Register Now</span>
                              </a>
                              <a href="#" data-toggle="modal" data-target="#registerddata">
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && (register.Exec_IDFK == userid || userid == '1')"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Registered</span>
                                <span style="color: #006C00;"
                                  *ngIf="!isDateOver30Days(register.registered_date) && register.Exec_IDFK != userid && userid != '1'"
                                  (click)="fetchregistereddata(register.Lead_IDFK,register.registered_propertyid)">Already
                                  Registered</span>
                              </a>
                            </span>
                          </span>

                          <span *ngIf="!suggested.registered?.length">
                            <a href="#" data-toggle="modal" data-target="#registration">
                              <span style="color: #0074AE;font-weight: 500"
                                (click)="fetchmails(suggested.name,suggested.propid)">Register
                                Now</span>
                            </a>
                          </span>
                        </span>
                        <span class="reg_common font-weight-bold">{{suggested.name}}</span>
                      </div>
                      <div class="col-6 dis-flexcol pt-2" *ngIf="rm.regname">
                        <div>Registered Name : <span class="font-weight-bold">{{rm.regname}}</span></div>
                        <div>Registered Source : <span class="mail_num"
                            *ngIf="rm.regsource != 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regsource}}</p>
                          </span>
                          <span class="mail_num" *ngIf="rm.regsource == 'Channel Partners-Walkin'">
                            <p class="font-weight-bold">{{rm.regcpname}}</p>
                          </span>
                        </div>
                        <div>Bedroom : <span class="font-weight-bold">{{rm.regbhk}} BHK</span></div>
                        <div>Budget : <span class="font-weight-bold">{{rm.budget}}</span></div>
                      </div>
                      <div class="pr-0 dis-flexcol pt-2" [ngClass]="rm.regname ? 'col-6' : 'col-12'">
                        <div>Walkin Time : <span class="font-weight-bold">{{rm.walkintime | date: 'dd-MMM-yyyy hh:mm:
                            a'}}</span></div>
                        <div>Stage : <span class="font-weight-bold">{{suggested.leadstage}}</span></div>
                        <div>Accompanied by : <span class="font-weight-bold">{{rm.customer_assign_name}}</span></div>
                        <div>Status :<span> Lead Pushed to Junk<i class="bi bi-emoji-frown"></i></span></div>
                      </div>
                      <!-- <div class="propdiv col-12 p-0"><span
                          class="propnameclass font-weight-bold">{{suggested.name}}</span>
                      </div> -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- here previously !show_cnt_subarray?.length based on this condition was there -->
        </div>
      </div>

    </div>
  </div>

  <div class="col-6 scroll-height">
    <!-- Nav tabs -->
    <ul *ngIf="execview ||  adminview" class="nav nav-tabs " role="tablist" style="justify-content: space-evenly;">
      <li class="nav-item"
        [ngClass]="{'blurred' : userid != selectedExecId && roleid != 1 && roleid != 2 && ((role_type == 1 && assignedrm && (assignedrm[0]?.roleid == 50013 || assignedrm[0]?.roleid == 50014)) || role_type != 1) && feedbackId != 1}">
        <a class="nav-link updateActivities active" id="updateActivitiesTab" data-toggle="tab" href="#home" role="tab"
          (click)="getstages();accessCheck();selectTab('updateActivities')">
          <i class="now-ui-icons objects_umbrella-13"></i> Update Status
        </a>
      </li>

      <li class="nav-item"
        [ngClass]="{'blurred' : userid != selectedExecId && roleid != 1 && roleid != 2 && ((role_type == 1 && assignedrm && (assignedrm[0]?.roleid == 50013 || assignedrm[0]?.roleid == 50014)) || role_type != 1) && feedbackId != 1}"
        [hidden]="fixedPropertiesList?.length == 0" (click)="checkstage();selectTab('fixPlan')">
        <a class="nav-link" data-toggle="tab" href="#plans" role="tab"
          *ngIf="assignedrm && (assignedrm[0]?.leadstage == 'USV' || assignedrm[0]?.leadstage == 'RSV' || assignedrm[0]?.leadstage == 'Final Negotiation')">
          <i class="now-ui-icons shopping_cart-simple"></i>
          <span *ngIf="selectedSuggestedProp && selectedSuggestedProp.weekplan == null">Fix a Plan</span>
          <span *ngIf="selectedSuggestedProp && selectedSuggestedProp.weekplan != null">Fixed Plan</span>
        </a>
        <a class="nav-link cursor-pointer"
          *ngIf="assignedrm && assignedrm[0]?.leadstage == 'Fresh' && assignedrm[0]?.followupreason == '8'">
          <i class="now-ui-icons shopping_cart-simple"></i>
          <span>Fix a Plan</span>
        </a>
      </li>

      <li class="nav-item"
        [ngClass]="{'blurred' : activestagestatus && activestagestatus[0]?.stage == 'Fresh' && (assignedrm && assignedrm[0]?.followupreason != '8') && roleid != 1 && roleid != 2}">
        <a class="nav-link allActivities" id="allActivitiesTab" data-toggle="tab" href="#profile" role="tab"
          (click)="logsTab('lead');selectTab('allActivities')">
          <i class="now-ui-icons shopping_cart-simple"></i> All Activities
        </a>
      </li>
    </ul>


    <hr class="m-0" style="border-top: 1px solid #D9D9D9;">
    <!-- <div class="d-flex justify-content-center align-items-center flex-column" style="padding-block: 8rem;"
      *ngIf="(execview && isAccompanyBy)">
      <span class="font-weight-bold">{{assignedrm[0]?.visitaccompaniedby}} has assisted the Visit.</span>
      <div><button class="btn btn-warning" type="button" (click)="accessNow(assignedrm)">Access Now</button></div>
    </div> -->
    <!-- <div class="card-body" *ngIf="(execview && !isAccompanyBy) ||  adminview"> this code was for tl account , if the lead is in done for tl it ask for access now -->
    <div class="card-body" *ngIf="execview ||  adminview">
      <!-- Tab panes -->
      <div *ngIf="execview || adminview" class="tab-content">
        <div [hidden]="activeTab != 'updateActivities'"
          *ngIf="assignedrm?.length && assignedrm[0]?.suggestedprop?.length > 1 && assignedrm[0]?.suggestedprop?.length < 4"
          class="p-0 d-flex">
          <div *ngFor="let property of assignedrm[0]?.suggestedprop;  let i = index">
          <button  id="closedsection" *ngIf="(property.leadstage != 'Junk' && roleid != 1 && roleid != 2) || (roleid == 1 || roleid == 2)"
            [ngClass]="{'selected': i === selectedItem}" (click)='tabclick(i,property); selectedItem = i;' type="button"
            class="btn btnTab commonbtnss actionbtnss actionss{{i}}">
            <span *ngIf="assignedrm[0]?.suggestedprop"><i class="fa fa-check-circle iconmarks selectMarks{{i}}"
                aria-hidden="true"></i></span>&nbsp;&nbsp; {{property.name}}
          </button>&nbsp;
          </div>
        </div>
        <div *ngIf="assignedrm?.length && assignedrm[0]?.suggestedprop?.length > 3" class="p-0">
          <select id="property_dropdown" class="form-control dropdown dashboard_dropdown mr-3"
            style="width: 100% !important;padding: 0.5em 0.75em !important;height: 2.7em;color: #000;"
            (change)="onPropertyChange($event)">
            <option value="" selected>Select Property</option>
            <option *ngFor="let property of assignedrm[0]?.suggestedprop;let i = index" value="{{i}}"
              [selected]="property.propid == selectedSuggestedProp.propid">
              {{property.name}}</option>
          </select>
        </div>
        <div class="tab-pane active" id="home" role="tabpanel"
          [ngClass]="{'blurred' : (callStatus != undefined && callStatus != 'Answered' && callStatus != 'Customer Answered' && callStatus != 'Answered by customer' && callStatus != 'Call Disconnected' && callDirection != 'inbound')}"
          *ngIf="( USV != 'false' || RSV != 'false' || Negotiation != 'false' || leadclose != 'false' || followup != 'false' || junkmove != 'false') && ((activestagestatus?.length && activestagestatus[0]?.stage != 'Junk' && feedbackId == '0') || feedbackId == '1')">
          <!-- Confirmed-Action -->
          <div>
            <div class="pt-3" *ngIf="!isSuggestedPropBoolean && showRejectionForm == false  ">
              <div class="wrapper">
                <input *ngIf="followup" type="radio" class="radiocheck" name="select4" value="Follow Up" id="option-20"
                  (click)="actionChange($event.target.value)">
                <label *ngIf="followup" for="option-20" class="option option-20">
                  <span>Follow Up</span>
                </label>
                <input *ngIf="USV" type="radio" class="radiocheck" name="select4" value="USV" id="option-21"
                  (click)="actionChange($event.target.value)">
                <label *ngIf="USV" for="option-21" class="option option-21">
                  <span>USV</span>
                </label>
                <input *ngIf="RSV" type="radio" class="radiocheck" name="select4" value="RSV" id="option-23"
                  (click)="actionChange($event.target.value)">
                <label *ngIf="RSV" for="option-23" class="option option-23">
                  <span>RSV</span>
                </label>
                <input *ngIf="Negotiation" type="radio" class="radiocheck" name="select4" value="Final Negotiation"
                  id="option-24" (click)="actionChange($event.target.value)">
                <label *ngIf="Negotiation" for="option-24" class="option option-24">
                  <span>FN</span>
                </label>
                <input *ngIf="leadclose && feedbackId != 1" type="radio" class="radiocheck" name="select4"
                  value="Lead Closed" id="option-25" (click)="actionChange($event.target.value)">
                <label *ngIf="leadclose && feedbackId != 1" for="option-25" class="option option-25">
                  <span>Lead Closed</span>
                </label>
                <!-- [ngClass]="{'blurred' : assignedrm && assignedrm[0]?.callCounts <= 3 && roleid != 1 && roleid != 2}" -->
                <input *ngIf="junkmove" type="radio" class="radiocheck" name="select4" value="Move to Junk"
                  id="option-26" (click)="actionChange($event.target.value)">
                <!-- [ngClass]="{'blurred' : assignedrm && assignedrm[0]?.callCounts <= 3 && roleid != 1 && roleid != 2}" -->
                <label *ngIf="junkmove" for="option-26" class="option option-26">
                  <span>Junk</span>
                </label>
              </div>
              <input type="hidden" id="customer_phase4">
              <input type="hidden" id="sectionselector">
            </div>
            <div *ngIf="followform">
              <app-mandate-followupform [selectedExecId]="selectedExecId" [callStatus]="callStatus"
                [selectedSuggestedProp]="selectedSuggestedProp"></app-mandate-followupform>
            </div>
            <div *ngIf="usvform">
              <app-mandate-usvform [selectedExecId]="selectedExecId"
                [selectedSuggestedProp]="selectedSuggestedProp"></app-mandate-usvform>
            </div>
            <div *ngIf="rsvform">
              <app-mandate-rsvform [selectedExecId]="selectedExecId"
                [selectedSuggestedProp]="selectedSuggestedProp"></app-mandate-rsvform>
            </div>
            <div *ngIf="finalnegoform">
              <app-mandate-negoform [selectedExecId]="selectedExecId"
                [selectedSuggestedProp]="selectedSuggestedProp"></app-mandate-negoform>
            </div>
            <div *ngIf="leadclosedform">
              <app-mandate-closedform [selectedExecId]="selectedExecId"
                [selectedSuggestedProp]="selectedSuggestedProp"></app-mandate-closedform>
            </div>
            <div *ngIf="junkform">
              <app-mandate-junkform [selectedExecId]="selectedExecId"
                [selectedSuggestedProp]="selectedSuggestedProp"></app-mandate-junkform>
            </div>
            <!-- <div *ngIf="inactiveform">
              <app-mandate-inactiveform [selectedExecId]="selectedExecId" [selectedSuggestedProp]="selectedSuggestedProp"></app-mandate-inactiveform>
            </div> -->

          </div>
          <!-- Confirmed-Action -->

          <!-- Not-Confirmed-Action -->
          <!-- <div *ngIf="notconfirmedstatus" class="face_to_drop_form">
            <form method="POST" (submit)="addconfirmdata()">
              <div class="form-group input_cmn_div">
                <label>Reason for Not Confirmation</label>
                <select class="customerstatus form-control btn btn-default dropdown-toggle" id="customer_phase4"
                  [(ngModel)]="editmodela.statusid" #statusid="ngModel" required name="statusid" style="width:100%;"
                  (change)="changestatus($event)">
                  <option value="">Select Status</option>
                  <option *ngFor="let status of leadstatus" value="{{status.Status}}">{{status.Status}}</option>
                </select>
              </div>
              <div>
                <div>
                  <label class="next-followup-label">Next Follow Up</label>
                </div>
                <div class="date">
                  <label>Date</label>
                  <div class="calendardate">
                    <input type="text" autocomplete="off" bsDatepicker [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }"
                      class="form-control datetime" id="f2fmeetdate" [(ngModel)]="facemodel.customer_facetoface_date"
                      name="customer_facetoface_date" placeholder="Date">
                  </div>
                </div>
                <div class="remarksdiv">
                  <label>Remarks</label>
                  <textarea id="textarearemarks" required></textarea>
                </div>
                <div>
                  <button type="submit" class="save_btn">Save</button>
                </div>
              </div>
            </form>
          </div> -->
          <!-- Not-Confirmed-Action -->

        </div>

        <div
          *ngIf="activestagestatus?.length &&  activestagestatus[0]?.stage == 'Junk' && leadMoveJunkExec && (roleid == '1' || roleid == '2') && feedbackId == '0'"
          style="display: flex;flex-direction: column;justify-content: center;align-items: center;gap: 1rem;">
          <div style="font-size:medium;font-weight: 700;display: flex;justify-content: center;color: #a9a9a9;">Lead
            Moved to Junk</div>
          <button class="btn btn-warning" type="button" (click)="revertStage()">Revert</button>
        </div>

        <div
          *ngIf="roleid != '1' && roleid != '2' && activestagestatus?.length && activestagestatus[0]?.stage == 'Junk' && feedbackId == '0'">
          <div style="font-size:medium;font-weight: 700;display: flex;justify-content: center;color: #a9a9a9;">Lead
            Moved to Junk</div>
        </div>

        <div
          *ngIf="((roleid == '50013' || roleid == '50014') && activestagestatus?.length && (activestagestatus[0]?.stage == 'Deal Closing Requested' || activestagestatus[0]?.stage == 'Deal Closed' || activestagestatus[0]?.stage == 'Closing Request Rejected' || activestagestatus[0]?.stage == 'Deal Closing Pending') && feedbackId == '0' && userid == selectedExecId) || (assignedrm && (assignedrm[0].roleid == 50013 || assignedrm[0].roleid == 50014) && userid == 1)">
          <div style="font-size:medium;font-weight: 700;display: flex;justify-content: center;color: #a9a9a9;">
            <span class="pt-3"
              *ngIf="activestagestatus && activestagestatus[0]?.stage == 'Deal Closed' && assignedrm">Lead Closed by
              {{assignedrm[0]?.accompany}}</span>
            <span class="pt-3"
              *ngIf="activestagestatus && activestagestatus[0]?.stage == 'Deal Closing Requested' && assignedrm">Deal
              Closing Requested sent by {{assignedrm[0]?.accompany}}</span>
            <span class="pt-3"
              *ngIf="activestagestatus && activestagestatus[0]?.stage == 'Deal Closing Pending' && assignedrm">Deal
              Closing Pending request sent to {{assignedrm[0]?.accompany}}</span>
            <span class="pt-3"
              *ngIf="activestagestatus && activestagestatus[0]?.stage == 'Closing Request Rejected'">Closing Request
              Rejected by Admin</span>
          </div>
        </div>

        <div class="tab-pane active" id="home" role="tabpanel" *ngIf="showRejectionForm == true ">

          <!-- closure request for admin -->
          <div
            *ngIf="(selectedSuggestedProp.actions == '7' && selectedSuggestedProp.currentstage == '5'  && adminview) || (adminBookingEdit && adminview)">
            <div class="modal-content">
              <div class="modal-header bookingForm" *ngIf="!adminBookingEdit">
                Booking Approval Request
              </div>
              <div class="modal-header"
                *ngIf="adminBookingEdit && selectedSuggestedProp.actions == '8' && selectedSuggestedProp.currentstage == '5'"
                style="background: #ebcfd9;color: #971B47;padding: 0.5rem !important;">
                Booking Request is Rejected
                <p (click)="showBookingRejection()"><i class="fa fa-times"></i></p>
              </div>
              <div class="modal-header"
                *ngIf="adminBookingEdit && selectedSuggestedProp.actions == '6' && selectedSuggestedProp.currentstage == '5'"
                style="background: #cef3c9;color:#29A71A;padding: 0.2rem !important;">
                Booking Request is Approved
              </div>
              <div class="modal-body col-12">

                <div class="row" *ngFor="let request of requestedunits">
                  <div class="form-group col-6">
                    <label>Selected Unit:</label>
                    <!-- <input class="form-control" id="unit" type="text" [(ngModel)]="request.bhk" name="bhk"
                      #bhk="ngModel" required> -->
                    <select id="project_dropdown unit"
                      class="customerstatus form-control btn btn-default dropdown-toggle ui dropdown dashboard_dropdown"
                      [(ngModel)]="request.bhk" #bhk="ngModel" name="bhk">
                      <option value="">Select Status</option>
                      <option value="1BHK" [selected]="'1BHK' == request.bhk">1 BHK</option>
                      <option value="2BHK" [selected]="'2BHK' == request.bhk">2 BHK</option>
                      <option value="3BHK" [selected]="'3BHK' == request.bhk">3 BHK</option>
                      <option value="4BHK" [selected]="'4BHK' == request.bhk">4 BHK</option>
                      <option value="5BHK" [selected]="'5BHK' == request.bhk">5 BHK</option>
                    </select>
                  </div>
                  <div class="form-group col-6">
                    <label>Unit Number:</label>
                    <input class="form-control" id="unit_number" type="text" [(ngModel)]="request.unit_number"
                      name="unit_number" #unit_number="ngModel" required>
                  </div>
                  <div class="form-group col-6">
                    <label>Dimension:</label>
                    <input class="form-control" id="dimension" type="text" [(ngModel)]="request.dimension"
                      name="dimension" #dimension="ngModel" required>
                  </div>
                  <div class="form-group col-6">
                    <label>Rate Per Sqft:</label>
                    <input class="form-control" id="rate_per_sqft" type="text" [(ngModel)]="request.rate_per_sqft"
                      name="rate_per_sqft" #rate_per_sqft="ngModel" required>
                  </div>

                  <div class="form-group col-12">
                    <label>Executive Remarks:</label>
                    <div *ngFor="let remark of request.suggested">
                      <span *ngIf="editNowClicked == false">{{remark.remarks}}</span>
                      <span *ngIf="editNowClicked == true">
                        <input class="form-control" id="remarks" type="text" [(ngModel)]="remark.remarks" name="remarks"
                          #remarks="ngModel" required>
                      </span>
                    </div>
                  </div>

                  <div class="form-group col-12">
                    <label>Uploaded Documents:</label>
                    <div class="row" *ngIf="editNowClicked == false">
                      <div class="form-group col-6" *ngFor="let attached of request.images;">
                        <div class="position-relative">
                          <a *ngIf="getExstendsion(attached.file_name) === 'jpg' || getExstendsion(attached.file_name) === 'jpeg' || getExstendsion(attached.file_name) === 'png'"
                            target="_blank"
                            href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{ attached.file_name }}">
                            <img width="100%" height="195px"
                              src="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{ attached.file_name }}">
                          </a>
                          <div class="icon-container top-right"
                            *ngIf="getExstendsion(attached.file_name) === 'jpg' || getExstendsion(attached.file_name) === 'jpeg' || getExstendsion(attached.file_name) === 'png'">
                            <a style="padding-left: 2px;"
                              (click)="removeImage(attached,request.Lead_IDFK,request.Exec_IDFK,request.property)">
                              <i class="fa fa-times"></i>
                            </a>
                          </div>
                        </div>

                        <div class="position-relative">
                          <a *ngIf="getExstendsion(attached.file_name) === 'pdf'" style="color: rgba(0, 0, 0, 0.87);"
                            target="_blank"
                            href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{ attached.file_name }}">
                            <img width="7%" height="50px" src="../../../assets/images/adobe-reader.svg">
                            {{ attached.file_name }}
                          </a>
                          <div class="icon-container top-right" *ngIf="getExstendsion(attached.file_name) === 'pdf'">
                            <a (click)="removeImage($event,request.Lead_IDFK,request.Exec_IDFK,request.property)">
                              <i class="fa fa-times"></i>
                            </a>
                          </div>
                        </div>
                      </div>



                      <div class="form-group col-6" style="height: 12rem;">
                        <div class="content_center"
                          style="height: 100%; border: 1px solid #D2D2E4; border-radius: 6px; background: #F1F1F8;">
                          <label for="file"
                            style="height: 100%; display: flex; align-items: center; justify-content: center;">
                            <i class="fa fa-plus" style="font-size: 2.5rem;color: #bbb4b4 ;"></i>
                            <input (change)="imageuploads($event,request.Lead_IDFK,request.Exec_IDFK,request.property);"
                              type="file" id="file" style="display: none;" name="image"
                              accept="image/gif,image/jpeg,image/jpg,image/png" multiple
                              data-original-title="upload photos">
                          </label>
                        </div>
                      </div>
                    </div>

                    <div class="row" *ngIf="editNowClicked == true">
                      <div class="form-group col-6" *ngFor="let attached of uploadedData[0]?.images;">
                        <div class="position-relative">
                          <a *ngIf="getExstendsion(attached.file_name) === 'jpg' || getExstendsion(attached.file_name) === 'jpeg' || getExstendsion(attached.file_name) === 'png'"
                            target="_blank"
                            href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{ attached.file_name }}">
                            <img width="100%" height="195px"
                              src="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{ attached.file_name }}">
                          </a>
                          <div class="icon-container top-right"
                            *ngIf="getExstendsion(attached.file_name) === 'jpg' || getExstendsion(attached.file_name) === 'jpeg' || getExstendsion(attached.file_name) === 'png'">
                            <a style="padding-left: 2px;"
                              (click)="removeImage(attached,uploadedData[0]?.Lead_IDFK,uploadedData[0]?.Exec_IDFK,uploadedData[0]?.property)">
                              <i class="fa fa-times"></i>
                            </a>
                          </div>
                        </div>

                        <div class="position-relative">
                          <a *ngIf="getExstendsion(attached.file_name) === 'pdf'" style="color: rgba(0, 0, 0, 0.87);"
                            target="_blank"
                            href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{ attached.file_name }}">
                            <img width="7%" height="50px" src="../../../assets/images/adobe-reader.svg">
                            {{ attached.file_name }}
                          </a>
                          <div class="icon-container top-right" *ngIf="getExstendsion(attached.file_name) === 'pdf'">
                            <a
                              (click)="removeImage($event,uploadedData[0]?.Lead_IDFK,uploadedData[0]?.Exec_IDFK,uploadedData[0]?.property)">
                              <i class="fa fa-times"></i>
                            </a>
                          </div>
                        </div>
                      </div>

                      <div class="form-group col-6" style="height: 12rem;">
                        <div class="content_center"
                          style="height: 100%; border: 1px solid #D2D2E4; border-radius: 6px; background: #F1F1F8;">
                          <label for="file"
                            style="height: 100%; display: flex; align-items: center; justify-content: center;">
                            <i class="fa fa-plus" style="font-size: 2.5rem;color: #bbb4b4 ;"></i>
                            <input
                              (change)="imageuploads($event,uploadedData[0]?.Lead_IDFK,uploadedData[0]?.Exec_IDFK,uploadedData[0]?.property);"
                              type="file" id="file" style="display: none;" name="image"
                              accept="image/gif,image/jpeg,image/jpg,image/png" multiple
                              data-original-title="upload photos">
                          </label>
                        </div>
                      </div>
                    </div>

                    <div class="form-group col-12" *ngIf="editNowClicked == false">
                      <label>Reason for Rejection:</label>
                      <span>
                        <textarea style="height: 70px;" [(ngModel)]="remarks" class="form-control rejectedtextarea"
                          (input)="enableButton();"></textarea>
                      </span>
                    </div>
                    <div style=" width: 100%; " class="col-12 d-flex justify-content-end "
                      *ngIf="editNowClicked == false">
                      <button type="button" class="btn btn-success mr-1"
                        (click)="requestapproval(request.Lead_IDFK,request.Exec_IDFK,request.property)"
                        [disabled]="enablebuttonApprove == false"> Approve</button>
                      <button type="button" class="btn btn-danger"
                        (click)="requestrejection(request.Lead_IDFK,request.Exec_IDFK,request.property)"
                        [disabled]="enablebuttonReject == false">Reject</button>
                    </div>

                    <div style=" width: 100%; " class="col-12 d-flex justify-content-end "
                      *ngIf="editNowClicked == true">
                      <button type="button" class="btn btn-success mr-1"
                        (click)="editNow(request.Lead_IDFK,request.Exec_IDFK,request.property,request.closedlead_id)">
                        Submit</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- booking rejected info for admin -->
          <div
            *ngIf="selectedSuggestedProp.actions == '8' && selectedSuggestedProp.currentstage == '5' && adminview && !adminBookingEdit ">
            <div class="modal-content">
              <div class="modal-header" style="background: #ebcfd9;color: #971B47;padding: 0.5rem !important;">
                <h4 class="modal-title">Booking Request is Rejected</h4>
                <button type="button" class="edit" (click)="showEditForm('')">Edit <i class="fa fa-edit"></i></button>
              </div>
              <div class="modal-body col-12">
                <div class="row" *ngFor="let request of requestedunits">
                  <div class="form-group col-12">
                    <label><strong>Reason For Rejection:</strong> </label>
                    <div class="px-3" style="background-color: #D9D9D9;" *ngFor="let reject of request.suggested">
                      <strong>{{reject.remarks}}</strong>
                    </div>
                  </div>
                  <div class="form-group col-6">
                    <label>Selected Unit:</label>
                    <p><strong>{{request.bhk}}</strong></p>
                  </div>
                  <div class="form-group col-6">
                    <label>Unit Number:</label>
                    <p><strong>{{request.unit_number}}</strong></p>
                  </div>
                  <div class="form-group col-6">
                    <label>Dimension:</label>
                    <p><strong>{{request.dimension}}</strong></p>
                  </div>
                  <div class="form-group col-6">
                    <label>Rate Per Sqft:</label>
                    <p><strong>{{request.rate_per_sqft}}</strong></p>
                  </div>
                  <div class="form-group col-12">
                    <label>Uploaded Documents:</label>
                    <div class="row">
                      <div class="form-group col-6" *ngFor="let attached of request.images">

                        <a *ngIf="(getExstendsion(attached.file_name) == 'jpg') || getExstendsion(attached.file_name) == 'jpeg' || getExstendsion(attached.file_name) == 'png'"
                          target="_blank"
                          href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                          <img width="100%" height="195px"
                            src="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                        </a>

                      </div>

                      <div class="form-group col-12" *ngFor="let attached of request.images">

                        <a *ngIf="(getExstendsion(attached.file_name) == 'pdf')" style="color: rgba(0, 0, 0, 0.87);"
                          target="_blank"
                          href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                          <img width="7%" height="50px" src="../../../assets/images/adobe-reader.svg">
                          {{attached.file_name}}
                        </a>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- booking approved from admin -->
          <div
            *ngIf="selectedSuggestedProp.actions == '6' && selectedSuggestedProp.currentstage == '5' && adminview && !adminBookingEdit">
            <div class="modal-content">
              <div class="modal-header" style="background: #cef3c9;padding: 0.2rem !important;">
                <span class="adminBookingApproved">Booking Request is Approved</span>
                <!-- <h4 class="modal-title">Booking details for {{closepropertyname}}</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button> -->
              </div>
              <div class="modal-body col-12">

                <div class="row" *ngFor="let request of requestedunits; let i = index">
                  <div class="form-group col-6">
                    <label>Selected Unit:</label>
                    <p><strong>{{request.bhk}}</strong></p>
                  </div>
                  <div class="form-group col-6">
                    <label>Unit Number:</label>
                    <p><strong>{{request.unit_number}}</strong></p>
                  </div>
                  <div class="form-group col-6">
                    <label>Dimension:</label>
                    <p><strong>{{request.dimension}}</strong></p>
                  </div>
                  <div class="form-group col-6">
                    <label>Rate Per Sqft:</label>
                    <p><strong>{{request.rate_per_sqft}}</strong></p>
                  </div>
                  <div class="form-group col-12">
                    <label>Uploaded Documents:</label>
                    <div class="row">
                      <div class="form-group col-6" *ngFor="let attached of request.images">

                        <a *ngIf="(getExstendsion(attached.file_name) == 'jpg') || getExstendsion(attached.file_name) == 'jpeg' || getExstendsion(attached.file_name) == 'png'"
                          target="_blank"
                          href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                          <img width="100%" height="195px"
                            src="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                        </a>

                      </div>

                      <div class="form-group col-12" *ngFor="let attached of request.images">

                        <a *ngIf="(getExstendsion(attached.file_name) == 'pdf')" style="color: rgba(0, 0, 0, 0.87);"
                          target="_blank"
                          href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                          <img width="7%" height="50px" src="../../../assets/images/adobe-reader.svg">
                          {{attached.file_name}}
                        </a>

                      </div>
                    </div>
                  </div>

                  <div style=" width: 100%; " class="modal-footer">
                    <button *ngIf="adminview" type="button" class="btn btn-danger"
                      (click)="showEditForm('admin');uploadedImagesgetData(request.Lead_IDFK,request.property,request.Exec_IDFK,'',i)">Edit
                      Now</button>
                    <!-- <button *ngIf="execview || adminview" type="button" class="btn btn-danger"
                      data-toggle="modal" data-target="#rejectionreason">Request For Edit</button> -->
                  </div>

                </div>

              </div>

            </div>
          </div>

          <!-- closure approval pending for executive-->
          <div *ngIf="selectedSuggestedProp.actions == '7' && selectedSuggestedProp.currentstage == '5'  && execview">
            <div class="d-flex justify-content-center align-items-center">
              <img src="../../../../assets/images/pending-icon.png" width="65%">
            </div>
            <span class="closure">
              Closure Approval Pending
            </span>
            <div class="d-flex justify-content-center">Your property closure request has been sent.</div>
            <div class="d-flex justify-content-center"> You can now &nbsp;<a
                style="color:#0B7AB2;text-decoration: underline;cursor: pointer;" data-toggle="modal"
                data-target="#viewDetailsExec"> View booking details</a></div>
          </div>

          <!-- rejection form for executive-->
          <div *ngIf="selectedSuggestedProp?.actions == '8' && selectedSuggestedProp?.currentstage == '5'  && execview">
            <div class="modal-content">
              <div class="modal-header closureForm">
                Closure Request is Rejected
              </div>
              <div class="modal-body col-12">
                <div class="row" *ngFor="let request of requestedunits">
                  <div class="form-group col-12">
                    <label><strong>Reason For Rejection:</strong> </label>
                    <div class="px-3" style="background-color: #D9D9D9;" *ngFor="let reject of request.suggested">
                      <strong>{{reject.remarks}}</strong>
                    </div>
                  </div>
                  <div class="form-group col-6">
                    <label>Selected Unit:</label>
                    <input class="form-control" id="unit" type="text" [(ngModel)]="request.bhk" name="bhk"
                      #bhk="ngModel" required>
                  </div>
                  <div class="form-group col-6">
                    <label>Unit Number:</label>
                    <input class="form-control" id="unit_number" type="text" [(ngModel)]="request.unit_number"
                      name="unit_number" #unit_number="ngModel" required>
                  </div>
                  <div class="form-group col-6">
                    <label>Dimension:</label>
                    <input class="form-control" id="dimension" type="text" [(ngModel)]="request.dimension"
                      name="dimension" #dimension="ngModel" required>
                  </div>
                  <div class="form-group col-6">
                    <label>Rate Per Sqft:</label>
                    <input class="form-control" id="rate_per_sqft" type="text" [(ngModel)]="request.rate_per_sqft"
                      name="rate_per_sqft" #rate_per_sqft="ngModel" required>
                  </div>
                  <div class="form-group col-12">
                    <label>Uploaded Documents:</label>

                    <div class="row">
                      <div class="form-group col-6" *ngFor="let attached of request.images;">
                        <div class="position-relative">
                          <a *ngIf="getExstendsion(attached.file_name) === 'jpg' || getExstendsion(attached.file_name) === 'jpeg' || getExstendsion(attached.file_name) === 'png'"
                            target="_blank"
                            href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{ attached.file_name }}">
                            <img width="100%" height="195px"
                              src="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{ attached.file_name }}">
                          </a>
                          <div class="icon-container top-right"
                            *ngIf="getExstendsion(attached.file_name) === 'jpg' || getExstendsion(attached.file_name) === 'jpeg' || getExstendsion(attached.file_name) === 'png'">
                            <a style="padding-left: 2px;"
                              (click)="removeImage(attached,request.Lead_IDFK,request.Exec_IDFK,request.property)">
                              <i class="fa fa-times"></i>
                            </a>
                          </div>
                        </div>

                        <div class="position-relative">
                          <a *ngIf="getExstendsion(attached.file_name) === 'pdf'" style="color: rgba(0, 0, 0, 0.87);"
                            target="_blank"
                            href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{ attached.file_name }}">
                            <img width="7%" height="50px" src="../../../assets/images/adobe-reader.svg">
                            {{ attached.file_name }}
                          </a>
                          <div class="icon-container top-right" *ngIf="getExstendsion(attached.file_name) === 'pdf'">
                            <a (click)="removeImage($event,request.Lead_IDFK,request.Exec_IDFK,request.property)">
                              <i class="fa fa-times"></i>
                            </a>
                          </div>
                        </div>
                      </div>

                      <div class="form-group col-6" style="height: 12rem;">
                        <div class="content_center"
                          style="height: 100%; border: 1px solid #D2D2E4; border-radius: 6px; background: #F1F1F8;">
                          <label for="file"
                            style="height: 100%; display: flex; align-items: center; justify-content: center;">
                            <i class="fa fa-plus" style="font-size: 2.5rem;color: #bbb4b4 ;"></i>
                            <input (change)="imageuploads($event,request.Lead_IDFK,request.Exec_IDFK,request.property);"
                              type="file" id="file" style="display: none;" name="image"
                              accept="image/gif,image/jpeg,image/jpg,image/png" multiple
                              data-original-title="upload photos">
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div style=" width: 100%; " class="modal-footer">
                    <button type="button" class="btn btn-success"
                      (click)="resubmitdata(request.Lead_IDFK,request.Exec_IDFK,request.property)">Resubmit</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- closure approved for executive-->
          <div *ngIf="selectedSuggestedProp.actions == '6' && selectedSuggestedProp.currentstage == '5' && execview">
            <div class="d-flex justify-content-center align-items-center">
              <img src="../../../../assets/images/approved-icon.png" width="65%">
            </div>
            <span class="closure-Approved">
              Closure Approved
            </span>
            <div class="d-flex justify-content-center">Your property closure request has been approved .</div>
            <!-- <div class="d-flex justify-content-center"> You can now View only activities</div> -->
            <div class="d-flex justify-content-center"> You can now &nbsp;<a
                style="color:#0B7AB2;text-decoration: underline;cursor: pointer;" data-toggle="modal"
                data-target="#viewDetailsExec"> View the booked details</a></div>
          </div>
        </div>

        <div *ngIf="execview && (activestagestatus && activestagestatus[0]?.stage != 'Junk' && feedbackId == '0')"
          class="tab-pane" id="profile" role="tabpanel">

          <div class="button_section  p-2 d-flex ">
            <div class="planleadassign">

              <a class="add_class lead_section active other_section" (click)="logsTab('lead')">
                Lead History
              </a>

              <a class="add_class call_section other_section" (click)="logsTab('call')"
                [ngClass]="{'blurred' : (activestagestatus && activestagestatus[0]?.stage == 'Fresh' && assignedrm && assignedrm[0]?.followupreason != 8) || (activestagestatus[0]?.stage != 'Fresh' && (selectedExecId != userid && roleid != 1 && roleid != 2 && role_type != 1))}">
                Call History
              </a>

              <a class="add_class executive_section other_section" (click)="logsTab('executive')">
                <span *ngIf="assignedrm && assignedrm.length > 0">{{assignedrm[0]?.customer_assign_name}}'s
                  History</span>
              </a>

            </div>
          </div>

          <div *ngIf="logsType == 'lead'" style="height: calc(100vh - 170px);overflow: scroll;">
            <div class="col-12 p-0" *ngIf="leadtrack">
              <div class="col-12 p-0" *ngIf="leadtrack?.length" style="height: calc(100vh - 170px);overflow: scroll;">
                <div class="history-tl-container">
          
                  <ng-container *ngFor="let leadhistory of leadtrack; let i = index">
          
                    <div class="date_row" *ngIf="leadhistory.item_type == 'message_date'">
                      {{ leadhistory.Saveddate }}
                    </div>
          
                    <div class="timeline-item" *ngIf="leadhistory.item_type != 'message_date'">
                      <div class="timeline-left">
                        <span class="dot"></span>
                        <span class="line"
                          *ngIf="i < leadtrack.length - 1 && leadtrack[i + 1].item_type !== 'message_date'"></span>
                      </div>
          
                      <div class="timeline-content d-flex">
                        <div class="time">
                          {{ leadhistory.Saveddate | date:'hh:mm a' }}
                        </div>
                        <div class="text">
                          <div class="title">
                            <strong>{{((leadhistory.autoremarks == 'got this new lead from Admin' || leadhistory.autoremarks == 'got this lead from Admin' || leadhistory.autoremarks == 'got this new lead from Admin Auto-Assigned' || leadhistory.autoremarks == 'got this lead from Admin auto assigned' || leadhistory.autoremarks == 'got this new lead from Admin auto') ? leadhistory.executivename : leadhistory.updatebyname)}}</strong>
                            {{ leadhistory.autoremarks }}
                          </div>
                          <div class="remarks">
                            {{ leadhistory.Remarks || 'Here well have the remarks.' }}
                          </div>
                        </div>
                      </div>
                    </div>
          
                  </ng-container>
          
                </div>
              </div>
          
            </div>
          </div>

          <div *ngIf="logsType == 'call'" style="height: calc(100vh - 170px);overflow: scroll;">
            <div *ngIf="groupedByDate && groupedByDate.length > 0; else noData">
              <div *ngFor="let group of groupedByDate">
                <div class="m-0"
                  style="font-size:18px;color:#00476A;font-weight: 400;background: #EBF8FF;width:100%;padding-block: 0.5rem;padding-inline: 1rem;margin-top: 0.2rem !important;">
                  {{ group.date }}
                </div>

                <div *ngFor="let call of group.calls">
                  <div class="d-flex align-items-center justify-content-between gap-3"
                    style="border: 1px solid #C7C7C7;border-radius: 4px;padding-inline: 1rem;padding-block: 0.5rem;margin-top: 0.4rem;">
                    <div class="d-flex align-items-center gap-3">
                      <div class=""
                        [ngClass]="{'blurred' : (call.callstatus == 'ANSWER' || call.callstatus == 'Answered')}">
                        <audio #audioRef [src]="call.filename"></audio>
                        <i class="fa fa-play play-icon" (click)="playAudio(audioRef, $event)"></i>
                      </div>
                      <div class="d-flex flex-column">
                        <div>{{ call.leadname }}</div>
                        <div>{{ call.starttime | date:'h:mm a' }} <span *ngIf="call.answeredtime > '00:00:00'">/
                            {{call.answeredtime}}
                          </span>/ {{call.direction}}</div>
                      </div>
                    </div>
                    <div class="d-flex align-items-center" style="gap: 0.5rem;">
                      <span class="cursor-pointer"
                        *ngIf="(call.callstatus == 'ANSWER' || call.callstatus == 'Answered') && assignedrm && assignedrm[0]?.leadstage != 'Fresh'  && assignedrm[0]?.leadstage != 'Junk'"
                        (click)="downloadRecordings(call)"><i class="fas fa-download"
                          style="font-size: 18px;color: #0B7AB2;"></i></span>
                      <span class="answered_cal"
                        *ngIf="call.callstatus == 'ANSWER' || call.callstatus == 'Answered'">Answered</span>
                      <!-- <span class="missed_cal" *ngIf="call.callstatus == 'BUSY'">Missed</span> -->
                      <span class="busy_cal"
                        *ngIf="call.callstatus == 'BUSY' || call.callstatus == 'Executive Busy'">Busy</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <ng-template #noData>
              <p class="text-center lead_norecord">No recordings found.</p>
            </ng-template>
          </div>

        <div *ngIf="logsType == 'executive'" style="height: calc(100vh - 170px);overflow: scroll;">
          <div class="col-12 p-0" *ngIf="leadtrack">
            <div class="col-12 p-0" *ngIf="leadtrack?.length" style="height: calc(100vh - 170px);overflow: scroll;">
              <div class="history-tl-container">
        
                <ng-container *ngFor="let leadhistory of leadtrack; let i = index">
        
                  <div class="date_row" *ngIf="leadhistory.item_type == 'message_date'">
                    {{ leadhistory.Saveddate }}
                  </div>
        
                  <div class="timeline-item" *ngIf="leadhistory.item_type != 'message_date'">
                    <div class="timeline-left">
                      <span class="dot"></span>
                      <span class="line"
                        *ngIf="i < leadtrack.length - 1 && leadtrack[i + 1].item_type !== 'message_date'"></span>
                    </div>
        
                    <div class="timeline-content d-flex">
                      <div class="time">
                        {{ leadhistory.Saveddate | date:'hh:mm a' }}
                      </div>
                      <div class="text">
                        <div class="title">
                          <strong>{{((leadhistory.autoremarks == 'got this new lead from Admin' || leadhistory.autoremarks == 'got this lead from Admin' || leadhistory.autoremarks == 'got this new lead from Admin Auto-Assigned' || leadhistory.autoremarks == 'got this lead from Admin auto assigned' || leadhistory.autoremarks == 'got this new lead from Admin auto') ? leadhistory.executivename : leadhistory.updatebyname)}}</strong>
                          {{ leadhistory.autoremarks }}
                        </div>
                        <div class="remarks">
                          {{ leadhistory.Remarks || 'Here well have the remarks.' }}
                        </div>
                      </div>
                    </div>
                  </div>
        
                </ng-container>
        
              </div>
            </div>
        
          </div>
          <div class="col-12 d-flex justify-content-center py-5" *ngIf="leadtrack?.length == 0 || !leadtrack">
            <span style="font-size: 20px;font-weight: bolder;font-style: italic;">No History Found</span>
          </div>
        </div>
        </div>

        <div class="tab-pane" id="plans" role="tabpanel"
          [ngClass]="{'blurred' : (callStatus != undefined && callStatus != 'Answered' && callStatus != 'Customer Answered' && callStatus != 'Answered by customer' && callStatus != 'Call Disconnected' && callDirection != 'inbound')}"
          *ngIf="assignedrm &&  (assignedrm[0]?.leadstage == 'USV' ||  assignedrm[0]?.leadstage == 'RSV' ||  assignedrm[0]?.leadstage == 'Final Negotiation')">
          <div>
            <div class="col-sm-12">
              <div class="wrapper mt-2">
                <input type="radio" class="radiocheck" name="select5" value="weekend" id="option-41"
                  [(ngModel)]="selectedPlanType" (click)="selectedplan('weekend')">
                <label for="option-41" class="option option-41">
                  <span>Weekend
                    <img
                      *ngIf="selectedSuggestedProp && selectedSuggestedProp.weekplan == '2' || selectedPlanType == '2'"
                      src="../../../../assets/images/checkin.png">
                    <img
                      *ngIf="selectedSuggestedProp && selectedSuggestedProp.weekplan == '2' && selectedPlanType != '2'"
                      src="../../../../assets/images/whitetick.png">
                  </span>
                </label>

                <input type="radio" class="radiocheck" name="select5" value="weekdays" id="option-42"
                  [(ngModel)]="selectedPlanType" (click)="selectedplan('weekdays')" checked>
                <label for="option-42" class="option option-42">
                  <span>Weekdays <img
                      *ngIf="selectedSuggestedProp && selectedSuggestedProp.weekplan == '1' || selectedPlanType == '1'"
                      src="../../../../assets/images/checkin.png"> <img
                      *ngIf="selectedSuggestedProp && selectedSuggestedProp.weekplan == '1' && selectedPlanType != '1'"
                      src="../../../../assets/images/whitetick.png"></span>
                </label>

                <!-- <input type="radio" class="radiocheck" name="select5" value="ytc" [(ngModel)]="selectedPlanType"
                id="option-43" (click)="selectedplan('ytc')">
              <label for="option-43" class="option option-43">
                <span>Yet to Confirm <img *ngIf="visitpanelselection && visitpanelselection[0]?.weekplan == '0'" src="../../../../assets/images/checkin.png"></span>
              </label> -->
              </div>

            </div>
            <div class="px-3 py-3" *ngIf="selectedPlanType != '' && editplan == false">
              <div class="col-12 text-center" style="font-size: 14px;font-weight: 600;">
                <div class="col-10 d-inline-block p-2 mb-2"
                  style="border: 1px solid #BEBEBE;background-color: #0B7AB21F;">
                  <span *ngIf="activestagestatus"
                    style="line-height: 2rem;word-spacing: 2px;">{{(activestagestatus[0].stage == 'Final Negotiation' ?
                    'FN' : activestagestatus[0].stage)}} Fixed on
                    <span *ngIf="visitPlanNextDate">{{visitPlanNextDate | date : 'dd-MMMM-yy'}}
                      <span *ngIf="visitPlanNextTime"> , {{visitPlanNextTime}}
                      </span>
                    </span></span>
                  <div style="font-size: 12px;font-weight: 500;color: #676767;line-height: 2rem;"
                    *ngIf="selectedSuggestedProp">{{selectedSuggestedProp.name}} were Fixed</div>
                </div>
              </div>
              <div class="col-12 d-flex justify-content-end gap-1" *ngIf="visitPlanDone == false">
                <button class="btn btn-primary " type="button" (click)="editvisitPlan('edit')">Edit Plan</button>
                <button type="button" class="btn btn-primary" (click)="confirmPlan()">Confirm Plan</button>
              </div>

              <div class="col-12 d-flex justify-content-center gap-1" *ngIf="visitPlanDone == true">
                <button class="btn btn-primary " type="button" (click)="editvisitPlan('change')">Change The
                  Plan</button>
              </div>
            </div>
            <div class="pt-3" *ngIf="editplan == true">
              <div class="d-flex">
                <div class="col-6 form-group headingdesign" [hidden]="selectedPlanType == 'ytc'">
                  <label class="heads">Visit Date</label>
                  <div class="ui calendar" id="disableddaysofweek_calendar">
                    <div class="ui fluid input left icon">
                      <i class="calendar icon"></i>
                      <input type="text" autocomplete="off" id="visitPlandate" placeholder="Date">
                    </div>
                  </div>
                </div>
                <div class="col-6 form-group headingdesign" [hidden]="selectedPlanType == 'ytc'">
                  <label class="heads">Visit Time</label>
                  <div class="ui calendar calendartime">
                    <div class="ui input left icon timepickerdiv">
                      <i class="time icon"></i>
                      <input class="form-control" autocomplete="off" id="visitPlantime" type="text" placeholder="Time">
                    </div>
                  </div>
                </div>
              </div>
              <!-- <div class="col-12 form-group headingdesign">
              <span class="d-flex justify-content-between align-items-baseline">
                <label class="heads">Suggested Properties </label> -->
              <!-- <span role="button" style="color: #4183C4;" data-toggle="modal" data-target="#suggestproperties02">Add Properties<i class="bi bi-building-add" style="font-size: 20px; cursor: pointer;"></i></span> -->
              <!-- </span> -->
              <!-- <div class="main_suggested_div">
                <ul class="ks-cboxtags" *ngIf="activestagestatus[0].stage == 'USV'">
                  <li *ngFor="let property of suggestedpropertylists; let i = index">
                    <span *ngIf="property.selection == '1'">
                      <input type="checkbox" id="suggestcheckbox{{i}}" value="{{property.propid}}" name='programming'
                      (change)="refixsuggested(i,property.propid,property.name)" checked>
                    <label for="suggestcheckbox{{i}}">{{property.name}}</label>
                    </span>
                    <span *ngIf="property.selection != '1'">
                      <input type="checkbox" id="suggestcheckbox{{i}}" value="{{property.propid}}" name='programming'
                      (change)="refixsuggested(i,property.propid,property.name)">
                    <label for="suggestcheckbox{{i}}">{{property.name}}</label>
                    </span>
                  </li>
                </ul>

                <ul class="ks-cboxtags" *ngIf="activestagestatus[0].stage == 'SV'">
                  <li *ngFor="let property of suggestedpropertylists; let i = index">
                    <span *ngIf="property.selection == '4'">
                      <input type="checkbox" id="suggestcheckbox{{i}}" value="{{property.propid}}" name='programming'
                      (change)="refixsuggested(i,property.propid,property.name)" checked>
                    <label for="suggestcheckbox{{i}}">{{property.name}}</label>
                    </span>
                    <span *ngIf="property.selection != '4'">
                      <input type="checkbox" id="suggestcheckbox{{i}}" value="{{property.propid}}" name='programming'
                      (change)="refixsuggested(i,property.propid,property.name)">
                    <label for="suggestcheckbox{{i}}">{{property.name}}</label>
                    </span>
                  </li>
                </ul>

                <ul class="ks-cboxtags" *ngIf="activestagestatus[0].stage == 'RSV'">
                  <li *ngFor="let property of suggestedpropertylists; let i = index">
                    <span *ngIf="property.selection == '2'">
                      <input type="checkbox" id="suggestcheckbox{{i}}" value="{{property.propid}}" name='programming'
                      (change)="refixsuggested(i,property.propid,property.name)" checked>
                    <label for="suggestcheckbox{{i}}">{{property.name}}</label>
                    </span>
                    <span *ngIf="property.selection != '2'">
                      <input type="checkbox" id="suggestcheckbox{{i}}" value="{{property.propid}}" name='programming'
                      (change)="refixsuggested(i,property.propid,property.name)">
                    <label for="suggestcheckbox{{i}}">{{property.name}}</label>
                    </span>
                  </li>
                </ul>

                <ul class="ks-cboxtags" *ngIf="activestagestatus[0].stage == 'Final Negotiation'">
                  <li *ngFor="let property of suggestedpropertylists; let i = index">
                    <span *ngIf="property.selection == '3'">
                      <input type="checkbox" id="suggestcheckbox{{i}}" value="{{property.propid}}" name='programming'
                      (change)="refixsuggested(i,property.propid,property.name)" checked>
                    <label for="suggestcheckbox{{i}}">{{property.name}}</label>
                    </span>
                    <span *ngIf="property.selection != '3'">
                      <input type="checkbox" id="suggestcheckbox{{i}}" value="{{property.propid}}" name='programming'
                      (change)="refixsuggested(i,property.propid,property.name)">
                    <label for="suggestcheckbox{{i}}">{{property.name}}</label>
                    </span>
                  </li>
                </ul>
                <p *ngIf="!suggestedpropertylists?.length" class="comma-list">
                  No Properties Suggested Till Now
                </p>
              </div> -->
              <!-- </div> -->
            </div>
            <div class="d-flex justify-content-end pt-2 gap-1" *ngIf="editplan == true">
              <button type="button" class="btn btn-primary" style="float: left;" (click)="clearPlandata()"
                [disabled]="selectedPlanType !== ''">Cancel</button>
              <button type="button" class="btn btn-primary" style="float: left;" (click)="fixPlan()">Confirm</button>
            </div>
          </div>
        </div>

        <div *ngIf="adminview" class="tab-pane" id="profile" role="tabpanel">

          <div class="button_section  p-2 d-flex ">
            <div class="planleadassign">

              <a class="add_class lead_section active other_section" (click)="logsTab('lead')">
                Lead History
              </a>

              <a class="add_class call_section other_section" (click)="logsTab('call')">
                Call History
              </a>

              <a class="add_class executive_section other_section" (click)="logsTab('executive')">
                <span *ngIf="assignedrm && assignedrm.length > 0">{{assignedrm[0]?.customer_assign_name}}'s
                  History</span>
              </a>

            </div>
          </div>

          <div *ngIf="logsType == 'lead'" style="height: calc(100vh - 170px);overflow: scroll;">
            <div class="col-12 p-0" *ngIf="leadtrack">
              <div class="col-12 p-0" *ngIf="leadtrack?.length"  style="height: calc(100vh - 170px);overflow: scroll;">
                <div class="history-tl-container">

                  <ng-container *ngFor="let leadhistory of leadtrack; let i = index">

                    <div class="date_row" *ngIf="leadhistory.item_type == 'message_date'">
                      {{ leadhistory.Saveddate }}
                    </div>

                    <div class="timeline-item" *ngIf="leadhistory.item_type != 'message_date'">
                      <div class="timeline-left">
                        <span class="dot"></span>
                        <span class="line"
                          *ngIf="i < leadtrack.length - 1 && leadtrack[i + 1].item_type !== 'message_date'"></span>
                      </div>

                      <div class="timeline-content d-flex">
                        <div class="time">
                          {{ leadhistory.Saveddate | date:'hh:mm a' }}
                        </div>
                        <div class="text">
                          <div class="title">
                            <strong>{{((leadhistory.autoremarks == 'got this new lead from Admin' || leadhistory.autoremarks == 'got this lead from Admin' || leadhistory.autoremarks == 'got this new lead from Admin Auto-Assigned' || leadhistory.autoremarks == 'got this lead from Admin auto assigned' || leadhistory.autoremarks == 'got this new lead from Admin auto') ? leadhistory.executivename : leadhistory.updatebyname)}}</strong>
                            {{ leadhistory.autoremarks }}
                          </div>
                          <div class="remarks">
                            {{ leadhistory.Remarks || 'Here well have the remarks.' }}
                          </div>
                        </div>
                      </div>
                    </div>

                  </ng-container>

                </div>
              </div>

            </div>
            
            <div class="col-12 d-flex justify-content-center py-5" *ngIf="leadtrack?.length == 0 || !leadtrack">
              <span style="font-size: 20px;font-weight: bolder;font-style: italic;">No History Found</span>
            </div>
          </div>

          <div *ngIf="logsType == 'call'" style="height: calc(100vh - 170px);overflow: scroll;">
            <div *ngIf="groupedByDate && groupedByDate.length > 0; else noData">
              <div *ngFor="let group of groupedByDate">
                <div class="m-0"
                  style="font-size:18px;color:#00476A;font-weight: 400;background: #EBF8FF;width:100%;padding-block: 0.5rem;padding-inline: 1rem;margin-top: 0.2rem !important;">
                  {{ group.date }}
                </div>

                <div *ngFor="let call of group.calls">
                  <div class="d-flex align-items-center justify-content-between gap-3"
                    style="border: 1px solid #C7C7C7;border-radius: 4px;padding-inline: 1rem;padding-block: 0.5rem;margin-top: 0.4rem;">
                    <div class="d-flex align-items-center gap-3">
                      <div class=""
                        [ngClass]="{'blurred' : (call.callstatus != 'ANSWER' && call.callstatus != 'Answered')}">
                        <audio #audioRef [src]="call.filename"></audio>
                        <i class="fa fa-play play-icon" (click)="playAudio(audioRef, $event)"></i>
                      </div>
                      <div class="d-flex flex-column">
                        <div>{{ call.leadname }}</div>
                        <div>{{ call.starttime | date:'h:mm a' }} <span *ngIf="call.answeredtime > '00:00:00'">/
                            {{call.answeredtime}}
                          </span>/ {{call.direction}}</div>
                      </div>
                    </div>
                    <div class="d-flex align-items-center" style="gap: 0.5rem;">
                      <span class="cursor-pointer" *ngIf="call.callstatus == 'ANSWER' || call.callstatus == 'Answered'"
                        (click)="downloadRecordings(call)"><i class="fas fa-download"
                          style="font-size: 18px;color: #0B7AB2;"></i></span>
                      <span class="answered_cal"
                        *ngIf="call.callstatus == 'ANSWER' || call.callstatus == 'Answered'">Answered</span>
                      <!-- <span class="missed_cal" *ngIf="call.callstatus == 'BUSY'">Missed</span> -->
                      <span class="busy_cal"
                        *ngIf="call.callstatus == 'BUSY' || call.callstatus == 'Executive Busy'">Busy</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <ng-template #noData>
              <p class="text-center lead_norecord">No recordings found.</p>
            </ng-template>
          </div>

          <div *ngIf="logsType == 'executive'" style="height: calc(100vh - 170px);overflow: scroll;">
          <div class="col-12 p-0" *ngIf="leadtrack">
            <div class="col-12 p-0" *ngIf="leadtrack?.length" style="height: calc(100vh - 170px);overflow: scroll;">
              <div class="history-tl-container">
          
                <ng-container *ngFor="let leadhistory of leadtrack; let i = index">
          
                  <div class="date_row" *ngIf="leadhistory.item_type == 'message_date'">
                    {{ leadhistory.Saveddate }}
                  </div>
          
                  <div class="timeline-item" *ngIf="leadhistory.item_type != 'message_date'">
                    <div class="timeline-left">
                      <span class="dot"></span>
                      <span class="line" *ngIf="i < leadtrack.length - 1 && leadtrack[i + 1].item_type !== 'message_date'"></span>
                    </div>
          
                    <div class="timeline-content d-flex">
                      <div class="time">
                        {{ leadhistory.Saveddate | date:'hh:mm a' }}
                      </div>
                      <div class="text">
                        <div class="title">
                          <strong>{{((leadhistory.autoremarks == 'got this new lead from Admin' || leadhistory.autoremarks == 'got this lead from Admin' || leadhistory.autoremarks == 'got this new lead from Admin Auto-Assigned' || leadhistory.autoremarks == 'got this lead from Admin auto assigned' || leadhistory.autoremarks == 'got this new lead from Admin auto') ? leadhistory.executivename : leadhistory.updatebyname)}}</strong>
                          {{ leadhistory.autoremarks }}
                        </div>
                        <div class="remarks">
                          {{ leadhistory.Remarks || 'Here well have the remarks.' }}
                        </div>
                      </div>
                    </div>
                  </div>
          
                </ng-container>
          
              </div>
            </div>
          
          </div>
            <div class="col-12 d-flex justify-content-center py-5" *ngIf="leadtrack?.length == 0 || !leadtrack">
              <span style="font-size: 20px;font-weight: bolder;font-style: italic;">No History Found</span>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
  <!-- </div> -->
</div>

<!-- MAIN-CONTENTS -->
<div class="clearfix"></div>

<!-- START Edit MODALS -->
<button type="button" data-toggle="modal" data-target="#edit_test" id="auto_edit_trigger" style="display: none;">Show
  Details</button>
<div class="modal fade" id="edit_test" tabindex="-1" role="dialog" aria-labelledby="defModalHead" aria-hidden="true">
  <div class="modal-dialog" style="max-width: 100%;">
    <div class="modal-content" id="edit_details">
      <div class="modal-header">
        <button type="button" class="close" #myModalClose data-dismiss="modal"><span
            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="defModalHead">Update Customer Details</h4>

      </div>
      <div class="modal-body">
        <div class="edit_details_form col-xs-12">

          <div class="py-3"
            style="background-color: #0B7AB240;border-radius: 5px;padding-inline: 1rem;margin-inline: 1rem;">
            <div>
              <h3 style="color:#0B7AB2;">Enquiry Details</h3>
            </div>
            <div class="row px-3 ">
              <div class="col-3 pt-2 pl-0" *ngIf="show_cnt?.customer_name">
                <label class="mb-1">Name</label>
                <div>{{show_cnt?.customer_name}}</div>
              </div>

              <div class="col-3 pt-2 pl-0" *ngIf="show_cnt?.customer_mail" style="max-width: 30% !important;">
                <label class="mb-1">Mail-ID</label>
                <div>{{show_cnt?.customer_mail}}</div>
              </div>

              <div class="col-3 pt-2 pl-0" *ngIf="show_cnt?.customer_number" style="max-width: 20% !important;">
                <label class="mb-1">Number</label>
                <div>{{(((assignedrm && assignedrm[0]?.leadstage != 'Fresh') || (assignedrm && assignedrm[0]?.leadstage
                  == 'Fresh' && assignedrm[0]?.followupreason == 8)) || (roleid == 1 || roleid == 2)) ?
                  show_cnt?.customer_number : 'xxxxxxxxxx'}}</div>
              </div>

              <div class="col-3 pt-2" *ngIf="show_cnt?.customer_properties && (roleid == '1' || roleid == '2')">
                <label class="mb-1">Project</label>
                <div>{{show_cnt?.customer_properties}}</div>
              </div>

              <div class="col-3 pt-2 pl-0" *ngIf="show_cnt?.customer_location">
                <label class="mb-1">Location</label>
                <div>{{show_cnt?.customer_location}}</div>
              </div>

              <div class="col-3 pt-2 pl-0" *ngIf="show_cnt?.customer_proptype ">
                <label class="mb-1">Property Type</label>
                <div>{{show_cnt?.customer_proptype}}</div>
              </div>

              <div class="col-3 pt-2 pl-0" *ngIf="show_cnt?.customer_timeline">
                <label class="mb-1">Possession</label>
                <div>{{show_cnt?.customer_timeline}}</div>
              </div>

              <div class="col-3 pt-2 pl-0" *ngIf="show_cnt?.customer_size">
                <label class="mb-1">Size</label>
                <div>{{show_cnt?.customer_size}}</div>
              </div>

              <div class="col-3 pt-2 pl-0" *ngIf="show_cnt?.customer_budget">
                <label class="mb-1">Budget</label>
                <div>{{show_cnt?.customer_budget}}</div>
              </div>
            </div>
          </div>

          <div class="row pt-2">
            <!-- MODAL-SESSION1 -->
            <div class="form-group input_cmn_div col-xs-6">

              <label>Primary Name</label>
              <input class="form-control" id="customer_name" type="text"
                [(ngModel)]="editmodela.enquiry_name?editmodela.enquiry_name:editmodela.customer_name"
                name="customer_name" #customer_name="ngModel" placeholder="Enter the Name" required>
            </div>

            <div class="form-group input_cmn_div col-xs-6">
              <label>Alternate Name</label>
              <input class="form-control" id="enquiry_name" type="text" [(ngModel)]="editmodela.enquiry_altname"
                name="enquiry_name" #enquiry_name="ngModel" placeholder="Enter the Alternate Name" required>
            </div>

            <!-- MODAL-SESSION2 -->
            <div class="form-group input_cmn_div col-xs-6">
              <label>Primary Number</label>
              <input class="form-control" id="customer_number" type="text" [(ngModel)]="displayCustomerNumber"
                name="customer_number" #customer_number="ngModel" placeholder="Enter the Number" required disabled>
            </div>

            <div class="form-group input_cmn_div col-xs-6">
              <label>Alternate Number</label>
              <input class="form-control" id="enquiry_number" type="text" [(ngModel)]="editmodela.enquiry_altnumber"
                name="enquiry_number" #enquiry_number="ngModel" maxlength="10" (input)="alternateNumbercheck($event)"
                placeholder="Enter the Alternate Number" required>
            </div>
            <!-- MODAL-SESSION12 -->


            <!-- MODAL-SESSION3 -->
            <div class="form-group input_cmn_div col-xs-6">
              <label>Primary Email ID</label>
              <input class="form-control" id="customer_mail" type="text"
                [(ngModel)]="editmodela.enquiry_mail?editmodela.enquiry_mail:editmodela.customer_mail"
                name="customer_mail" #customer_mail="ngModel" placeholder="Enter the mail" required>
            </div>

            <div class="form-group input_cmn_div col-xs-6">
              <label>Alternate Email ID</label>
              <input class="form-control" id="enquiry_mail" type="text" [(ngModel)]="editmodela.enquiry_altmail"
                name="enquiry_mail" #enquiry_mail="ngModel" placeholder="Enter Alternate mail" required>
            </div>

            <!-- MODAL-SESSION4 -->
            <div class="form-group input_cmn_div col-xs-6">
              <label>Prefered Location</label>
              <search-dropdown [items]="locality" [size]="'small'" [label]="'locality'" [uid]="'id'"
                [(ngModel)]="selectedlocality"></search-dropdown>
              <input type="hidden" id="customer_location" [(ngModel)]="selectedlocality">
            </div>

            <div class="form-group col-md-6 input_cmn_div">
              <label>Priority</label>
              <div class="wrapper">
                <input type="radio" class="radiocheck" name="select4" value="1" id="option-33"
                  [checked]="editmodela.lead_priority == '1'" (click)="editPriority($event)">
                <input type="radio" class="radiocheck" name="select4" value="2" id="option-34"
                  [checked]="editmodela.lead_priority == '2'" (click)="editPriority($event)">
                <input type="radio" class="radiocheck" name="select4" value="3" id="option-35"
                  [checked]="editmodela.lead_priority == '3'" (click)="editPriority($event)">
                <label for="option-33" class="option option-33">
                  <span>HOT</span>
                </label>
                <label for="option-34" class="option option-34">
                  <span>WARM</span>
                </label>
                <label for="option-35" class="option option-35">
                  <span>COLD</span>
                </label>
              </div>
              <input type="hidden" id="priorityselect">
            </div>
            <!-- MODAL-SESSION18 -->

            <!-- MODAL-SESSION8 -->
            <div class="form-group col-md-12 input_cmn_div">
              <label>Prefered Type</label>
              <div class="wrapper">
                <input type="radio" class="radiocheck" name="select6" value="1" id="option-29"
                  [checked]="editmodela.enquiry_proptype == '1'" (click)="typeselection($event)">
                <input type="radio" class="radiocheck" name="select6" value="2" id="option-30"
                  [checked]="editmodela.enquiry_proptype == '2'" (click)="typeselection($event)">
                <input type="radio" class="radiocheck" name="select6" value="3" id="option-31"
                  [checked]="editmodela.enquiry_proptype == '3'" (click)="typeselection($event)">
                <input type="radio" class="radiocheck" name="select6" value="4" id="option-32"
                  [checked]="editmodela.enquiry_proptype == '4'" (click)="typeselection($event)">
                <label for="option-29" class="option option-29">
                  <span>Apartment</span>
                </label>
                <label for="option-30" class="option option-30">
                  <span>Villa</span>
                </label>
                <label for="option-31" class="option option-31">
                  <span>Plot</span>
                </label>
                <label for="option-32" class="option option-32">
                  <span>Villament</span>
                </label>
              </div>
              <input type="hidden" id="proptypeselect">
            </div>
            <!-- MODAL-SESSION9 -->

            <div class="form-group col-md-12 input_cmn_div">
              <label>Possession With</label>
              <div class="wrapper">
                <input type="radio" class="radiocheck" name="select2" value="2" id="option-19"
                  [checked]="editmodela.enquiry_possession == '1'" (click)="possessionselection($event)">

                <input type="radio" class="radiocheck" name="select2" value="3" id="option-4"
                  [checked]="editmodela.enquiry_possession == '2'" (click)="possessionselection($event)">

                <input type="radio" class="radiocheck" name="select2" value="4" id="option-5"
                  [checked]="editmodela.enquiry_possession == '3'" (click)="possessionselection($event)">

                <input type="radio" class="radiocheck" name="select2" value="5" id="option-6"
                  [checked]="editmodela.enquiry_possession == '4'" (click)="possessionselection($event)">

                <label for="option-19" class="option option-19">
                  <span>
                    < 6 Months</span>
                </label>
                <label for="option-4" class="option option-4">
                  <span>1 Year</span>
                </label>
                <label for="option-5" class="option option-5">
                  <span>1-2 Year</span>
                </label>
                <label for="option-6" class="option option-6">
                  <span>
                    > 2 years</span>
                </label>
              </div>
              <input type="hidden" id="possessionselect">
            </div>
            <!-- MODAL-SESSION10 -->

            <div class="form-group input_cmn_div col-12"
              [hidden]="editmodela.enquiry_proptype == '3' || propertyType == '3'">
              <label>Size</label>
              <div class="wrapper">
                <input type="radio" class="radiocheck" name="select3" value="1" id="option-7"
                  [checked]="editmodela.enquiry_bhksize == '1'" (click)="sizeselection($event)">

                <input type="radio" class="radiocheck" name="select3" value="2" id="option-8"
                  [checked]="editmodela.enquiry_bhksize == '2'" (click)="sizeselection($event)">

                <input type="radio" class="radiocheck" name="select3" value="3" id="option-9"
                  [checked]="editmodela.enquiry_bhksize == '3'" (click)="sizeselection($event)">

                <input type="radio" class="radiocheck" name="select3" value="3.5" id="option-38"
                  [checked]="editmodela.enquiry_bhksize == '3.5'" (click)="sizeselection($event)">

                <input type="radio" class="radiocheck" name="select3" value="4" id="option-10"
                  [checked]="editmodela.enquiry_bhksize == '4'" (click)="sizeselection($event)">

                <input type="radio" class="radiocheck" name="select3" value="4.5" id="option-39"
                  [checked]="editmodela.enquiry_bhksize == '4.5'" (click)="sizeselection($event)">

                <input type="radio" class="radiocheck" name="select3" value="5" id="option-11"
                  [checked]="editmodela.enquiry_bhksize == '5'" (click)="sizeselection($event)">

                <input type="radio" class="radiocheck" name="select3" value="5.5" id="option-40"
                  [checked]="editmodela.enquiry_bhksize == '5.5'" (click)="sizeselection($event)">

                <label for="option-7" class="option option-7"
                  [hidden]="((editmodela.enquiry_proptype == '2' || editmodela.enquiry_proptype == '4') && propertyType != 1)|| propertyType == '2' || propertyType == '4'">
                  <span>1 BHK</span>
                </label>
                <label for="option-8" class="option option-8"
                  [hidden]="((editmodela.enquiry_proptype == '2' || editmodela.enquiry_proptype == '4') && propertyType != 1)|| propertyType == '2' || propertyType == '4'">
                  <span>2 BHK</span>
                </label>
                <label for="option-9" class="option option-9">
                  <span>3 BHK</span>
                </label>
                <label for="option-38" class="option option-38"
                  [hidden]="((editmodela.enquiry_proptype == null || editmodela.enquiry_proptype == '1') && propertyType != 2 && propertyType != 4 ) || propertyType == '1'">
                  <span>3.5 BHK</span>
                </label>
                <label for="option-10" class="option option-10">
                  <span>4 BHK</span>
                </label>
                <label for="option-39" class="option option-39"
                  [hidden]="((editmodela.enquiry_proptype == null || editmodela.enquiry_proptype == '1') && propertyType != 2 && propertyType != 4 ) || propertyType == '1'">
                  <span>4.5 BHK</span>
                </label>
                <label for="option-11" class="option option-11">
                  <span>5 BHK</span>
                </label>
                <label for="option-40" class="option option-40"
                  [hidden]="((editmodela.enquiry_proptype == null || editmodela.enquiry_proptype == '1') && propertyType != 2 && propertyType != 4 ) || propertyType == '1'">
                  <span>5.5 BHK</span>
                </label>
              </div>
              <input type="hidden" id="sizeselect">
            </div>
            <!-- MODAL-SESSION11 -->

            <!-- MODAL-SESSION6 -->
            <div class="form-group input_cmn_div col-12">
              <label>Budget</label>
              <div class="wrapper">
                <!-- <input type="radio" class="radiocheck" name="select" value="20L - 40L" id="option-12"
                  [checked]="show_cnt.enquiry_budget == '20L - 40L'" (click)="budgetselection($event)"> -->
                <input type="radio" class="radiocheck" name="select" value="< 60L" id="option-13"
                  [checked]="editmodela.enquiry_budget == '< 60L'" (click)="budgetselection($event)">
                <input type="radio" class="radiocheck" name="select" value="60L - 80L" id="option-14"
                  [checked]="editmodela.enquiry_budget == '60L - 80L'" (click)="budgetselection($event)">
                <input type="radio" class="radiocheck" name="select" value="80L - 1Cr" id="option-15"
                  [checked]="editmodela.enquiry_budget == '80L - 1Cr'" (click)="budgetselection($event)">
                <input type="radio" class="radiocheck" name="select" value="1Cr - 1.2Cr" id="option-16"
                  [checked]="editmodela.enquiry_budget == '1Cr - 1.2Cr'" (click)="budgetselection($event)">
                <input type="radio" class="radiocheck" name="select" value="> 1.2Cr" id="option-17"
                  [checked]="editmodela.enquiry_budget == '> 1.2Cr'" (click)="budgetselection($event)">
                <!-- rates for villa and villament  -->
                <input type="radio" class="radiocheck" name="select" value="1.5Cr - 2Cr" id="option-44"
                  [checked]="editmodela.enquiry_budget == '1.5Cr - 2Cr'" (click)="budgetselection($event)">
                <input type="radio" class="radiocheck" name="select" value="2Cr - 3Cr" id="option-45"
                  [checked]="editmodela.enquiry_budget == '2Cr - 3Cr'" (click)="budgetselection($event)">
                <input type="radio" class="radiocheck" name="select" value="3Cr - 4Cr" id="option-46"
                  [checked]="editmodela.enquiry_budget == '3Cr - 4Cr'" (click)="budgetselection($event)">
                <input type="radio" class="radiocheck" name="select" value="> 4Cr" id="option-47"
                  [checked]="editmodela.enquiry_budget == '> 4Cr'" (click)="budgetselection($event)">
                <!-- <input type="radio" class="radiocheck" name="select" value="Above 1Cr" id="option-18"
                  [checked]="editmodela.enquiry_budget == 'Above 1Cr'" (click)="budgetselection($event)"> -->
                <!-- <label for="option-12" class="option option-12">
                  <span>20L - 40L</span> -->
                <!-- </label> -->
                <label for="option-13" class="option option-13"
                  *ngIf="(editmodela.enquiry_proptype == '1' || editmodela.enquiry_proptype == '3') || (editmodela.enquiry_proptype == null && propertyType != '2' && propertyType != '4')">
                  <span>
                    < 60L</span>
                </label>
                <label for="option-14" class="option option-14"
                  *ngIf="(editmodela.enquiry_proptype == '1' || editmodela.enquiry_proptype == '3') || (editmodela.enquiry_proptype == null && propertyType != '2' && propertyType != '4')">
                  <span>60L - 80L</span>
                </label>
                <label for="option-15" class="option option-15"
                  *ngIf="(editmodela.enquiry_proptype == '1' || editmodela.enquiry_proptype == '3') || (editmodela.enquiry_proptype == null && propertyType != '2' && propertyType != '4')">
                  <span>80L - 1Cr</span>
                </label>
                <label for="option-16" class="option option-16"
                  *ngIf="(editmodela.enquiry_proptype == '1' || editmodela.enquiry_proptype == '3') || (editmodela.enquiry_proptype == null && propertyType != '2' && propertyType != '4')">
                  <span>1Cr - 1.2Cr</span>
                </label>
                <label for="option-17" class="option option-17"
                  *ngIf="(editmodela.enquiry_proptype == '1' || editmodela.enquiry_proptype == '3') || (editmodela.enquiry_proptype == null && propertyType != '2' && propertyType != '4')">
                  <span>> 1.2Cr</span>
                </label>

                <!-- villament and villa code  -->
                <label for="option-44" class="option option-44"
                  *ngIf="(editmodela.enquiry_proptype == '2' || editmodela.enquiry_proptype == '4') || (propertyType == '2' || propertyType == '4')">
                  <span>1.5Cr - 2Cr</span>
                </label>
                <label for="option-45" class="option option-45"
                  *ngIf="(editmodela.enquiry_proptype == '2' || editmodela.enquiry_proptype == '4') || (propertyType == '2' || propertyType == '4')">
                  <span>2Cr - 3Cr</span>
                </label>
                <label for="option-46" class="option option-46"
                  *ngIf="(editmodela.enquiry_proptype == '2' || editmodela.enquiry_proptype == '4') || (propertyType == '2' || propertyType == '4')">
                  <span>3Cr - 4Cr</span>
                </label>
                <label for="option-47" class="option option-47"
                  *ngIf="(editmodela.enquiry_proptype == '2' || editmodela.enquiry_proptype == '4') || (propertyType == '2' || propertyType == '4')">
                  <span>> 4Cr</span>
                </label>
                <!-- <label for="option-18" class="option option-18">
                  <span>Above 1Cr</span>
                </label> -->
              </div>
              <input type="hidden" id="budgetselect">
            </div>

            <div class="input_cmn_div enqre_modal_txtarea col-12">
              <label>Address</label>
              <textarea class="form-control" id="customer_address" [(ngModel)]="editmodela.address"
                name="customer_address" #customer_address="ngModel" required></textarea>
            </div>
            <!-- MODAL-SESSION13 -->

            <div class="actions save_btn input_cmn_div">
              <button (click)="updateCustomer()" class="approve">Update</button>
            </div>
          </div>


        </div>
        <div class="clearfix"></div>
        <div class="modal-footer">

        </div>
      </div>
    </div>
  </div>
</div>

<!-- Deal Request Modal -->

<div class="modal fade" id="dealcloserequest" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Closing Request for {{closepropertyname}}</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body col-12">
        <div class="row" *ngFor="let request of requestedunits">
          <div class="form-group col-4">
            <label>Selected Unit:</label>
            <p>{{request.bhk}}</p>
          </div>
          <div class="form-group col-4">
            <label>Unit Number:</label>
            <p>{{request.unit_number}}</p>
          </div>
          <div class="form-group col-4">
            <label>Dimension:</label>
            <p>{{request.dimension}}</p>
          </div>
          <div class="form-group col-4">
            <label>Rate Per Sqft:</label>
            <p>{{request.rate_per_sqft}}</p>
          </div>
          <div class="form-group col-12">
            <label>Uploaded Documents:</label>
            <div class="row">
              <div class="form-group col-6" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'jpg') || getExstendsion(attached.file_name) == 'jpeg' || getExstendsion(attached.file_name) == 'png'"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="100%" height="195px"
                    src="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                </a>

              </div>

              <div class="form-group col-12" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'pdf')" style="color: rgba(0, 0, 0, 0.87);"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="7%" height="50px" src="../../../assets/images/adobe-reader.svg">
                  {{attached.file_name}}
                </a>

              </div>
            </div>
          </div>

          <div style=" width: 100%; " class="modal-footer">
            <button type="button" class="btn btn-success"
              (click)="requestapproval(request.Lead_IDFK,request.Exec_IDFK,request.property)">Approve</button>
            <button type="button" class="btn btn-danger" data-toggle="modal"
              data-target="#rejectionreason">Reject</button>
          </div>

        </div>

      </div>

    </div>

  </div>
</div>
<!-- Deal Request Modal -->

<!-- Closed deal Modal -->

<div class="modal fade" id="closeddeal" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">

        <h4 class="modal-title">Booking details for {{closepropertyname}}</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body col-12">

        <div class="row" *ngFor="let request of requestedunits">
          <div class="form-group col-4">
            <label>Selected Unit:</label>
            <p>{{request.bhk}}</p>
          </div>
          <div class="form-group col-4">
            <label>Unit Number:</label>
            <p>{{request.unit_number}}</p>
          </div>
          <div class="form-group col-4">
            <label>Dimension:</label>
            <p>{{request.dimension}}</p>
          </div>
          <div class="form-group col-4">
            <label>Rate Per Sqft:</label>
            <p>{{request.rate_per_sqft}}</p>
          </div>
          <div class="form-group col-12">
            <label>Uploaded Documents:</label>
            <div class="row">
              <div class="form-group col-6" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'jpg') || getExstendsion(attached.file_name) == 'jpeg' || getExstendsion(attached.file_name) == 'png'"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="100%" height="195px"
                    src="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                </a>

              </div>

              <div class="form-group col-12" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'pdf')" style="color: rgba(0, 0, 0, 0.87);"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="7%" height="50px" src="../../../assets/images/adobe-reader.svg">
                  {{attached.file_name}}
                </a>

              </div>
            </div>
          </div>

          <div style=" width: 100%; " class="modal-footer">
            <button *ngIf="adminview" type="button" class="btn btn-danger" data-toggle="modal"
              data-target="#adminreeditform">Edit Now</button>
            <!-- <button *ngIf="execview || adminview" type="button" class="btn btn-danger"
              data-toggle="modal" data-target="#rejectionreason">Request For Edit</button> -->
          </div>

        </div>

      </div>

    </div>

  </div>
</div>

<!-- Closed deal Modal -->

<!-- Rejection-Reason -->

<div class="modal fade" id="rejectionreason" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Rejection Reason for {{closepropertyname}}</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body col-12">
        <div *ngFor="let request of requestedunits">
          <div class="form-group">
            <label>Remarks:</label>
            <textarea style="height: 150px;" class="form-control rejectedtextarea"></textarea>
          </div>
          <div style="width: 100%;" class="modal-footer">
            <button type="button" class="btn btn-danger"
              (click)="requestrejection(request.Lead_IDFK,request.Exec_IDFK,request.property)">Submit</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Rejection-Reason -->

<!-- Rejection-details -->

<div class="modal fade" id="rejectdetails" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Rejection Details for {{closepropertyname}}</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body col-12">
        <div class="row" *ngFor="let request of requestedunits">
          <div class="form-group col-12">
            <label><strong>Reason For Rejection:</strong> </label>
            <p *ngFor="let reject of request.suggested"><strong>{{reject.remarks}}</strong></p>
          </div>
          <div class="form-group col-4">
            <label>Selected Unit:</label>
            <p>{{request.bhk}}</p>
          </div>
          <div class="form-group col-4">
            <label>Unit Number:</label>
            <p>{{request.unit_number}}</p>
          </div>
          <div class="form-group col-4">
            <label>Dimension:</label>
            <p>{{request.dimension}}</p>
          </div>
          <div class="form-group col-4">
            <label>Rate Per Sqft:</label>
            <p>{{request.rate_per_sqft}}</p>
          </div>
          <div class="form-group col-12">
            <label>Uploaded Documents:</label>
            <div class="row">
              <div class="form-group col-6" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'jpg') || getExstendsion(attached.file_name) == 'jpeg' || getExstendsion(attached.file_name) == 'png'"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="100%" height="195px"
                    src="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                </a>

              </div>

              <div class="form-group col-12" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'pdf')" style="color: rgba(0, 0, 0, 0.87);"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="7%" height="50px" src="../../../assets/images/adobe-reader.svg">
                  {{attached.file_name}}
                </a>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Rejection-details -->

<!-- booking details Form -->

<div class="modal fade" id="bookingreeditform" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Rejection Details for {{closepropertyname}}</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body col-12">
        <div class="row" *ngFor="let request of requestedunits">
          <div class="form-group col-12">
            <label><strong>Reason For Rejection:</strong> </label>
            <p *ngFor="let reject of request.suggested"><strong>{{reject.remarks}}</strong></p>
          </div>
          <div class="form-group col-4">
            <label>Selected Unit:</label>
            <input class="form-control" id="unit" type="text" [(ngModel)]="request.bhk" name="bhk" #bhk="ngModel"
              required>
          </div>
          <div class="form-group col-4">
            <label>Unit Number:</label>
            <input class="form-control" id="unit_number" type="text" [(ngModel)]="request.unit_number"
              name="unit_number" #unit_number="ngModel" required>
          </div>
          <div class="form-group col-4">
            <label>Dimension:</label>
            <input class="form-control" id="dimension" type="text" [(ngModel)]="request.dimension" name="dimension"
              #dimension="ngModel" required>
          </div>
          <div class="form-group col-4">
            <label>Rate Per Sqft:</label>
            <input class="form-control" id="rate_per_sqft" type="text" [(ngModel)]="request.rate_per_sqft"
              name="rate_per_sqft" #rate_per_sqft="ngModel" required>
          </div>
          <div class="form-group col-12">
            <label>Uploaded Documents:</label>
            <div class="row">
              <div class="form-group col-6" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'jpg') || getExstendsion(attached.file_name) == 'jpeg' || getExstendsion(attached.file_name) == 'png'"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="100%" height="195px"
                    src="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                </a>

              </div>

              <div class="form-group col-12" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'pdf')" style="color: rgba(0, 0, 0, 0.87);"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="7%" height="50px" src="../../../assets/images/adobe-reader.svg">
                  {{attached.file_name}}
                </a>

              </div>
            </div>
          </div>
          <div style=" width: 100%; " class="modal-footer">
            <button type="button" class="btn btn-success"
              (click)="resubmitdata(request.Lead_IDFK,request.Exec_IDFK,request.property)">Resubmit</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- booking details Form -->


<!-- Admin Editing Modal -->

<div class="modal fade" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Update the Details</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body col-12">
        <div class="row" *ngFor="let request of requestedunits">
          <div class="form-group col-4">
            <label>Selected Unit:</label>
            <input class="form-control" id="unit" type="text" [(ngModel)]="request.bhk" name="bhk" #bhk="ngModel"
              required>
          </div>
          <div class="form-group col-4">
            <label>Unit Number:</label>
            <input class="form-control" id="unit_number" type="text" [(ngModel)]="request.unit_number"
              name="unit_number" #unit_number="ngModel" required>
          </div>
          <div class="form-group col-4">
            <label>Dimension:</label>
            <input class="form-control" id="dimension" type="text" [(ngModel)]="request.dimension" name="dimension"
              #dimension="ngModel" required>
          </div>
          <div class="form-group col-4">
            <label>Rate Per Sqft:</label>
            <input class="form-control" id="rate_per_sqft" type="text" [(ngModel)]="request.rate_per_sqft"
              name="rate_per_sqft" #rate_per_sqft="ngModel" required>
          </div>
          <div class="form-group col-12">
            <label>Uploaded Documents:</label>
            <div class="row">
              <div class="form-group col-6" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'jpg') || getExstendsion(attached.file_name) == 'jpeg' || getExstendsion(attached.file_name) == 'png'"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="100%" height="195px"
                    src="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                </a>

              </div>

              <div class="form-group col-12" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'pdf')" style="color: rgba(0, 0, 0, 0.87);"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="7%" height="50px" src="../../../assets/images/adobe-reader.svg">
                  {{attached.file_name}}
                </a>

              </div>
            </div>
          </div>
          <div style=" width: 100%; " class="modal-footer">
            <button type="button" class="btn btn-success"
              (click)="resubmitdata(request.Lead_IDFK,request.Exec_IDFK,request.property)">Update Now</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="viewDetailsExec" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Lead Details for {{closepropertyname}}</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body col-12">
        <div class="row" *ngFor="let request of requestedunits">
          <div class="form-group col-4">
            <label>Selected Unit:</label>
            <p><strong>{{request.bhk}}</strong></p>
          </div>
          <div class="form-group col-4">
            <label>Unit Number:</label>
            <p><strong>{{request.unit_number}}</strong></p>
          </div>
          <div class="form-group col-4">
            <label>Dimension:</label>
            <p><strong>{{request.dimension}}</strong></p>
          </div>
          <div class="form-group col-4">
            <label>Rate Per Sqft:</label>
            <p><strong>{{request.rate_per_sqft}}</strong></p>
          </div>
          <div class="form-group col-12">
            <label>Uploaded Documents:</label>
            <div class="row">
              <div class="form-group col-6" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'jpg') || getExstendsion(attached.file_name) == 'jpeg' || getExstendsion(attached.file_name) == 'png'"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="100%" height="195px"
                    src="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                </a>

              </div>

              <div class="form-group col-12" *ngFor="let attached of request.images">

                <a *ngIf="(getExstendsion(attached.file_name) == 'pdf')" style="color: rgba(0, 0, 0, 0.87);"
                  target="_blank"
                  href="https://superadmin-azure.right2shout.in/images/crm/closurefiles/{{attached.file_name}}">
                  <img width="7%" height="50px" src="../../../assets/images/adobe-reader.svg">
                  {{attached.file_name}}
                </a>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- assign lead modal  -->
<div class="modal fade" id="assign_lead" tabindex="-1" role="dialog" aria-labelledby="defModalHead" aria-hidden="true">
  <div class="modal-dialog assignlead_modal">
    <div class="modal-content enquiry_modal_body" id="assign_leads">
      <div class="modal-header">
        <span>
          <h4 class="col-12 m-0" *ngIf="assigntype != 'visit'">Assign Lead</h4>
          <h4 class="col-12 m-0" *ngIf="assigntype == 'visit'">Visit Assign</h4>
        </span>
        <span>
          <button type="button" class="close" data-dismiss="modal" id="leadAssignClose"><span
              aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        </span>
      </div>

      <div class="modal-body">
        <div class="new_enquiry_form ">
          <div style="display: flex; gap:3rem">

            <div class="form-group col-3 input_cmn_div">
              <label class="font-bold">Select Property</label>
              <select id="property_dropdown" class="form-control dropdown dashboard_dropdown mr-3"
                style="width: 215px;padding: 0.5em 0.75em !important;height: 2.7em;color: #000;"
                (change)="getselectedprop($event)">
                <option value="" selected>Select Project</option>
                <option *ngFor="let projects of mandateproperties" value="{{projects.property_idfk}}"
                  [disabled]="!projects?.isSelected">
                  {{projects.property_info_name}}</option>
              </select>
            </div>

            <div class="form-group col-3 input_cmn_div d-flex flex-column">
              <label class="font-bold">Select Team</label>
              <p-dropdown id="exec_designation" [options]="retailExecutiveTeam" [(ngModel)]="selectedTeam"
                optionLabel="team" name="selectedTeam" defaultLabel="Select Team" placeholder="Select Team"
                (onChange)="getselectedteam($event)"></p-dropdown>
            </div>

            <div class="form-group col-3 input_cmn_div">
              <label class="font-bold">Select Executives</label>
              <p-multiSelect id="rm_dropdown" [options]="mandateExecutives" [(ngModel)]="selectedEXEC" [filter]="true"
                *ngIf="(roleid == '1' || roleid == '2') && assigntype != 'visit'" optionLabel="name"
                #customersupport="ngModel" name="customersupport" defaultLabel="Select Executives"
                (onChange)="executiveSelect($event)"></p-multiSelect>

              <p-dropdown id="rm_dropdown" [options]="mandateExecutives"
                *ngIf="roleid == '50013' || roleid == '50014' || assigntype == 'visit'" optionLabel="name"
                name="selectedLeads" defaultLabel="Select Team" placeholder="Select Executive"
                (onChange)="executiveSelect($event)">
              </p-dropdown>
            </div>
          </div>


          <div class="form-group col-3s input_cmn_div justify-content-end ml-3">
            <button class="approve btn btn-warning" (click)="assignLeadNow()" type="submit">Assign Now</button>

            <!-- <button class="approve btn btn-warning" type="submit"
              *ngIf="assigntype == 'visit' || roleid == '50013' || roleid == '50014'" (click)="visitConvert()">Assign
              Now</button> -->
          </div>
        </div>
      </div>

    </div>
  </div>
</div>


<div class="modal fade" id="visit_reassign_lead" tabindex="-1" role="dialog" aria-labelledby="defModalHead"
  aria-hidden="true">
  <div class="modal-dialog assignlead_modal">
    <div class="modal-content enquiry_modal_body" id="assign_leads">
      <div class="modal-header">
        <span>
          <h4 class="col-12 m-0">Visit Re-Assign</h4>
        </span>
        <span>
          <button type="button" class="close" data-dismiss="modal" id="leadAssignClose"><span
              aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        </span>
      </div>

      <div class="modal-body">
        <div class="new_enquiry_form ">
          <div style="display: flex; gap:3rem">

            <div class="form-group col-3 input_cmn_div">
              <label class="font-bold">Select Executives</label>

              <p-dropdown id="rm_dropdown" [options]="mandateExecutives" optionLabel="name" name="selectedLeads"
                defaultLabel="Select Team" placeholder="Select Executive" (onChange)="visitExecutiveSelect($event)">
              </p-dropdown>
            </div>
          </div>


          <div class="form-group col-3s input_cmn_div justify-content-end ml-3">
            <button class="approve btn btn-warning" (click)="VisitReassignLeadNow()" type="submit">Assign Now</button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>


<!-- Visit Assign Modal  -->
<button type="button" data-toggle="modal" data-target="#visit_assign_lead" id="visit_leads_btn"
  style="display: none;">Show
  Details</button>
<div class="modal fade" id="visit_assign_lead" tabindex="-1" role="dialog" aria-labelledby="defModalHead"
  aria-hidden="true">
  <div class="modal-dialog assignlead_modal">
    <div class="modal-content enquiry_modal_body" id="assign_leads">
      <div class="modal-header">
        <span>
          <h4 class="col-12 m-0">Visit Assign</h4>
        </span>
        <span>
          <button type="button" class="close" data-dismiss="modal" id="leadvisitAssignClose"><span
              aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        </span>
      </div>

      <div class="modal-body">
        <div class="new_enquiry_form ">
          <div style="display: flex; gap:3rem;flex-direction: column;">
            <div class="form-group col-3 input_cmn_div">
              <label class="font-bold">Select Property</label>
              <!-- <select id="property_dropdown" class="form-control ui dropdown dashboard_dropdown mr-3"
                (change)="getselectedVisitprop($event)">
                <option value="" selected>Select Project</option>
                <option *ngFor="let projects of mandateproperties" value="{{projects.property_idfk}}">
                  {{projects.property_info_name}}</option>
              </select> -->

              <p-dropdown id="property_dropdown" [options]="mandateproperties" optionLabel="property_info_name"
                name="property_info_name" defaultLabel="Select Project" placeholder="Select Project"
                (onChange)="getselectedVisitprop($event)"></p-dropdown>
            </div>

            <div class="form-group col-3s input_cmn_div justify-content-end ml-3">
              <button class="approve btn btn-warning" type="submit" (click)="visitSelfAssignToCS()">Assign</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- merge lead pop up  -->
<div class="modal fade" id="mergeModal" tabindex="-1" aria-labelledby="mergeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm" style="max-width: 600px;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="mergeModalLabel">Merge the Lead</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group col-12">
          <label>Search by Name/Number</label>
          <!-- <input class="form-control" type="text" [(ngModel)]="search_name" name="search_name" placeholder="Search by name or number" (keyup)="searchByName()" style="border-radius: 15px;"/> -->
          <div class="search my-1">
            <input class="form-control" type="text" [(ngModel)]="search_name" name="search_name"
              placeholder="Search by name or number" (keyup)="searchByName()" style="border-radius: 15px;" />
            <div class="search-result" *ngIf="search_name?.length > 0">
              <ul class="searchline">
                <li *ngFor="let client of clients ">
                  <a (click)="selectedMergeLead(client)">{{client.customer_name}} <span *ngIf="client.customer_number">
                      -
                      {{client.customer_number}}</span>
                  </a>
                </li>
              </ul>
            </div>
          </div>
          <div *ngIf="clients?.length == 0 && search_name?.length > 0"
            style="color: rgb(0, 0, 0);position: absolute;display: flex;justify-content: center;align-items: center;width: 98%;font-size: 16px;font-weight: 500;">
            No Leads found.</div>
        </div>

        <div *ngIf="selectedLead != '' && selectedLead != undefined && selectedLead != null "
          class="spacing-margin mt-4 py-3">
          <div class="col-12 d-flex justify-content-between align-items-center ">
            <span>
              <div class="text-center text-font">{{selectedLead.customer_name}}</div>
              <div>Lead Name</div>
            </span>

            <span>
              <div class="text-center text-font">{{selectedLead.customer_number}}</div>
              <div>Contact Number</div>
            </span>

            <span>
              <div class="text-center text-font">{{selectedLead.Lead_stage}}</div>
              <div>Lead Stage</div>
            </span>

            <span>
              <div class="text-center text-font">{{selectedLead.execname}}</div>
              <div>Executive</div>
            </span>
          </div>
          <div class="d-flex">
            <div class="pt-2 col-6">
              <span>
                <div>Relationship Between Them</div>
                <select id="relationship_dropdown" class="form-control ui dropdown dashboard_dropdown mr-3"
                  (change)="relationship($event.target.value)" required
                  style="height: 30px !important;padding: 0.3rem !important;border: 1px solid #0B7AB2;width: 200px;">
                  <option value="" selected disabled>Select the Relation</option>
                  <option value="Father">Father</option>
                  <option value="Mother">Mother</option>
                  <option value="Sister">Sister</option>
                  <option value="Brother">Brother</option>
                  <option value="Husband">Husband</option>
                  <option value="Wife">Wife</option>
                  <option value="Others">Others</option>
                </select>
              </span>
            </div>

            <div class="pt-2 col-6">
              <span>
                <div>Primary Lead</div>
                <div class="col-3 p-0">
                  <select id="primary_dropdown" class="form-control ui dropdown dashboard_dropdown mr-3"
                    (change)="primaryLeadSelection($event.target.value)" required
                    style="height: 30px !important;padding: 0.3rem !important;border: 1px solid #0B7AB2;width: 200px;">
                    <option value="" selected disabled>Select Primary Lead</option>
                    <option *ngFor="let lead of primaryLeads" value="{{lead.id}}">{{lead.name}}</option>
                  </select>
                </div>
              </span>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer" *ngIf="selectedLead != '' && selectedLead != undefined && selectedLead != null ">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" (click)="mergeLeads()">Merge</button>
      </div>
    </div>
  </div>
</div>

<!-- Client Lead Registration Modal -->
<div class="modal fade" id="registration" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" style="max-width: 1100px;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Client Registration</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form name="form" novalidate>
          <div class="row">
            <div class="form-group col-6 mail_div">
              <div class="form_grpcol">
                <label for="deeveloper">Send To:</label>
                <select id="mailtoselect" class="form-control sendto ui selection fluid dropdown normalmail"
                  style="padding:.29em 3.2em .29em 1em !important;">
                  <option value="">Select Mail</option>
                  <option *ngFor="let mail of mails" value="{{mail.builder_mail}}">{{mail.builder_mail}}</option>
                </select>
              </div>
            </div>

            <div class="form-group col-6 cc_div">
              <div class="form_grpcol d-flex flex-column">
                <label for="developer">Add CC:</label>
                <p-multiSelect class="ccmail_drop" id="ccselect" [options]="mails" [filter]="true"
                  [(ngModel)]="selectedCCMail" optionLabel="builder_mail" name="customersupport"
                  defaultLabel="Select Mail"></p-multiSelect>
              </div>
            </div>
          </div>


          <div class="form-group">
            <div class="col-xs-12 form_grpcol">
              <label for="notes">Remarks:</label>
              <textarea id="regremarks" class="form-control"></textarea>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn" style="background-color: #0B7AB2; color: #fff;"
          (click)="clientregisteration()">Register Now</button>
      </div>
    </div>
  </div>
</div>
<!-- Client Lead Registration Modal -->


<!-- Already Registered Mail Template -->
<div class="modal fade" id="registerddata" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" style="max-width: 1100px;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Client Registration Details</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <div class="container">
          <div class="row inbox-wrapper">
            <div class="col-lg-12">
              <div class="card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-lg-12 email-content" *ngIf="clientregistereddata">
                      <div class="email-head">
                        <div class="email-head-subject">
                          <div class="title d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center">
                              <a class="mr-3" style="color: #000;">Send To</a>
                              <span style="color: #9999;">{{clientregistereddata.sendto}}</span>
                            </div>
                            <div class="icons">
                              <a class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                  stroke-linecap="round" stroke-linejoin="round"
                                  class="feather feather-printer text-muted" data-toggle="tooltip" title=""
                                  data-original-title="Print">
                                  <polyline points="6 9 6 2 18 2 18 9"></polyline>
                                  <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2">
                                  </path>
                                  <rect x="6" y="14" width="12" height="8"></rect>
                                </svg></a>
                            </div>
                          </div>
                        </div>
                        <div class="email-head-sender d-flex align-items-center justify-content-between flex-wrap">
                          <div class="d-flex align-items-center">
                            <div class="sender d-flex align-items-center">
                              <a class="mr-3">Send Cc</a>
                              <span style="color: #9999;">{{clientregistereddata.sendcc}}</span>
                            </div>
                          </div>
                          <div class="date">{{clientregistereddata.datetime | date: 'dd-MMM-yyyy hh:mm: a'}}</div>
                        </div>
                      </div>
                      <div class="email-body">
                        <p [innerHTML]="clientregistereddata.mailbody"></p>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <!-- <button type="button" class="btn" style="background-color: #0B7AB2; color: #fff;" (click)="clientregisteration()">Register Now</button> -->
        <p>Mail Footer</p>
      </div>
    </div>
  </div>
</div>
<!-- Already Registered Mail Template -->


<button type="button" data-toggle="modal" data-target="#recordings_modal" id="call_record_modal_detail"
  style="display: none;">Show Details</button>

<div class="modal fade" id="recordings_modal" tabindex="-1" role="dialog" data-backdrop="static"
  aria-labelledby="defModalHead" style="top: 45px !important;overflow: hidden;" aria-hidden="true">
  <div class="modal-dialog call_lead_modal modal-lg">
    <div class="modal-content enquiry_modal_body" id="call_leads">
      <div class="call_recordings modal-header position-relative">
        <h4 class="col-12 m-0 text-center d-flex justify-content-center align-items-center"
          style="gap:0.5rem;font-size: 20px !important;font-weight: 500;">
          Call Recordings
        </h4>
        <button type="button" class="close" data-dismiss="modal"
          style="font-size: 25px !important;font-weight: 500;color: #ffffff !important;position: absolute;right: 10px;"><span
            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
      </div>

      <div class="modal-body">
        <div class="col-12 pr-0 recordings">
          <!-- <span style="font-size: 18px;color: #8C8C8C;">Assignees</span> -->

          <div class="execnav-scrollable">
            <ul class="execnav execnav-tabs col-12 pt-3" *ngIf="roleid == 1 || roleid == 2">
              <li class="exec-item" *ngFor=" let exec of onRecordExecList;let i = index;">
                <a class="exec-link" [class.active]="exec.Exec_IDFK == selectedRecordExec"
                  (click)="selectedExecutiveId(exec)">{{exec.exec_name}}&nbsp;
                </a>
              </li>
            </ul>
            <div class="recordings_list_table" style="height: 300px !important;overflow: scroll;">
              <table class="recordings_content_table_main table table-striped">
                <thead>
                  <tr class="header">
                    <!-- ----------------------------sl no---------------------------- -->
                    <th>Call Type</th>
                    <!-- <th>Date</th> -->
                    <th>Duration</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                    <th>Recordings</th>
                  </tr>
                </thead>
                <tbody *ngIf="audioList?.length">
                  <tr *ngFor="let leads of audioList; let i = index">
                    <td>{{leads.direction}}</td>
                    <!-- <td>{{leads.date}}</td> -->
                    <td>{{leads.answeredtime}}</td>
                    <td>{{leads.starttime}}</td>
                    <td>{{leads.endtime}}</td>
                    <td>
                      <div style="flex-direction: column;">
                        <audio class="media-item" [src]="leads.filename" controls (play)="onAudioPlay($event)">
                          Your browser does not support the audio element.
                        </audio>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="text-center lead_norecord" *ngIf="! audioList?.length">
                No Recordings Found.....
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<button type="button" data-toggle="modal" data-target="#assigned_leads_modal" id="assign_leads_detail"
  style="display: none;">Show Details</button>
<div class="modal fade" id="assigned_leads_modal" tabindex="-1" role="dialog" aria-labelledby="defModalHead"
  aria-hidden="true" tabindex="-1" role="dialog" data-backdrop="static">
  <div class="modal-dialog reassignlead_modal modal-lg">
    <div class="modal-content enquiry_modal_body" id="reassign_leads">
      <div class="modal-header">
        <h4 class="col-10 m-0"> Assigned Leads Details</h4>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true"
            (click)="assignleadModalClose()">&times;</span><span class="sr-only">Close</span></button>
      </div>
      <div class="modal-body">
        <div class="new_enquiry_form col-xs-12">
          <div class="assign_table1 pt-3">
            <table class="content_table_main table table-striped table-bordered">
              <thead>
                <tr class="header" style="color: white !important;">
                  <th>#</th>
                  <th>Name</th>
                  <th>Fresh Assigned</th>
                  <th>Not Assigned</th>
                  <th>Untouched Leads</th>
                </tr>
              </thead>
              <tbody class="enquiry_table_body">
                <tr *ngFor="let assign of assignedResponseInfo; let i = index">
                  <td>
                    <div>
                      <label>{{i+1}}</label>
                    </div>
                  </td>
                  <td>{{assign.execname}}</td>
                  <td>{{assign.fresh}}</td>
                  <td>
                    <div>Already in Fresh - {{assign.exsiting}}</div>
                    <div>Leads Capacity Reached - {{assign.leads_skipped_executive_capacity}}</div>
                    <!-- <div>24 hrs not Completed- {{assign.leads_skipped_executive_capacity}}</div>
                    <div>Moved as Junk - {{assign.leads_skipped_executive_capacity}}</div> -->
                    <div>Gr-Swara-Leads - {{assign.gr_swara_leads_skipped}}</div>
                  </td>
                  <td>{{assign.initial_lead_count}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Suggestproperties Modal -->
<div id="cssuggestproperties" class="modal fade" role="dialog">
  <div class="modal-dialog" style="width: 40%;">
    <div class="modal-content">
      <div class="modal-header headingdesign" style="display: block;">
        <button type="button" class="close" #myModalClose data-dismiss="modal" id="suggestmodalclose">&times;</button>
        <label class="heads">Suggest Properties</label>
        <button type="button" class="btn btn-warning" style="float: right;" (click)="addpropertiestolist00()">Add to
          List</button>
      </div>
      <div class="modal-body">
        <div class="col-sm-12 form-group headingdesign">
          <select class="ui fluid search dropdown onchangeforsuggestproperties00" multiple="">
            <option value="">Select Properties</option>
            <option *ngFor="let select of properties" value="{{select.id}}">{{select.name}}</option>
          </select>

        </div>
      </div>
      <hr />
    </div>
  </div>
</div>
<!-- Suggestproperties Modal -->


<div *ngIf=filterLoader class="main-lds-ring-div">
  <!-- <div class="lds-ring">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div> -->
  <img src="../../../../assets/images/infinity_loader.gif">
</div>